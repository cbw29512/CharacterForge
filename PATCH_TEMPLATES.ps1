# CharacterForge â€” Template Library Patch
$root = "C:\Users\dmchris\Desktop\CharacterForge"
Write-Host "Applying template library patch..." -ForegroundColor Cyan
New-Item -ItemType Directory -Force -Path "$root\templates\templates" | Out-Null

# models\__init__.py
$b = "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQpmcm9tIGRiIGltcG9ydCBkYgoKCmNsYXNzIFVzZXIoZGIuTW9kZWwpOgogICAgX190YWJsZW5hbWVfXyA9ICJ1c2VycyIKICAgIGlkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICB1c2VybmFtZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCB1bmlxdWU9VHJ1ZSwgbnVsbGFibGU9RmFsc2UsIGluZGV4PVRydWUpCiAgICBwYXNzd29yZF9oYXNoID0gZGIuQ29sdW1uKGRiLlN0cmluZygyNTUpLCBudWxsYWJsZT1GYWxzZSkKICAgIHJvbGUgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDIwKSwgbnVsbGFibGU9RmFsc2UsIGRlZmF1bHQ9InBsYXllciIpCiAgICBkaXNwbGF5X25hbWUgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDEyMCksIG51bGxhYmxlPVRydWUpCiAgICBjcmVhdGVkX2F0ID0gZGIuQ29sdW1uKGRiLkRhdGVUaW1lLCBkZWZhdWx0PWRhdGV0aW1lLnV0Y25vdywgbnVsbGFibGU9RmFsc2UpCgogICAgY2hhcmFjdGVycyA9IGRiLnJlbGF0aW9uc2hpcCgiQ2hhcmFjdGVyIiwgYmFja3JlZj0ib3duZXIiLCBsYXp5PVRydWUsIGZvcmVpZ25fa2V5cz0iQ2hhcmFjdGVyLm93bmVyX2lkIikKICAgIG1lbWJlcnNoaXBzID0gZGIucmVsYXRpb25zaGlwKCJDYW1wYWlnbk1lbWJlcnNoaXAiLCBiYWNrcmVmPSJ1c2VyIiwgbGF6eT1UcnVlKQogICAgdGVtcGxhdGVzID0gZGIucmVsYXRpb25zaGlwKCJDaGFyYWN0ZXJUZW1wbGF0ZSIsIGJhY2tyZWY9ImNyZWF0b3IiLCBsYXp5PVRydWUsIGNhc2NhZGU9ImFsbCwgZGVsZXRlLW9ycGhhbiIpCgogICAgZGVmIHRvX2RpY3Qoc2VsZik6CiAgICAgICAgcmV0dXJuIHsiaWQiOiBzZWxmLmlkLCAidXNlcm5hbWUiOiBzZWxmLnVzZXJuYW1lLCAicm9sZSI6IHNlbGYucm9sZSwgImRpc3BsYXlfbmFtZSI6IHNlbGYuZGlzcGxheV9uYW1lIG9yIHNlbGYudXNlcm5hbWV9CgoKY2xhc3MgQ2FtcGFpZ24oZGIuTW9kZWwpOgogICAgX190YWJsZW5hbWVfXyA9ICJjYW1wYWlnbnMiCiAgICBpZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQogICAgbmFtZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoMjAwKSwgbnVsbGFibGU9RmFsc2UpCiAgICBkZXNjcmlwdGlvbiA9IGRiLkNvbHVtbihkYi5UZXh0LCBudWxsYWJsZT1UcnVlKQogICAgZG1faWQgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGIuRm9yZWlnbktleSgidXNlcnMuaWQiKSwgbnVsbGFibGU9RmFsc2UpCiAgICBpc19hY3RpdmUgPSBkYi5Db2x1bW4oZGIuQm9vbGVhbiwgZGVmYXVsdD1UcnVlLCBudWxsYWJsZT1GYWxzZSkKICAgIGNyZWF0ZWRfYXQgPSBkYi5Db2x1bW4oZGIuRGF0ZVRpbWUsIGRlZmF1bHQ9ZGF0ZXRpbWUudXRjbm93LCBudWxsYWJsZT1GYWxzZSkKCiAgICBkbSA9IGRiLnJlbGF0aW9uc2hpcCgiVXNlciIsIGZvcmVpZ25fa2V5cz1bZG1faWRdKQogICAgbWVtYmVyc2hpcHMgPSBkYi5yZWxhdGlvbnNoaXAoIkNhbXBhaWduTWVtYmVyc2hpcCIsIGJhY2tyZWY9ImNhbXBhaWduIiwgbGF6eT1UcnVlLCBjYXNjYWRlPSJhbGwsIGRlbGV0ZS1vcnBoYW4iKQogICAgY2hhcmFjdGVycyA9IGRiLnJlbGF0aW9uc2hpcCgiQ2hhcmFjdGVyIiwgYmFja3JlZj0iY2FtcGFpZ24iLCBsYXp5PVRydWUsIGNhc2NhZGU9ImFsbCwgZGVsZXRlLW9ycGhhbiIpCgogICAgZGVmIHRvX2RpY3Qoc2VsZik6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgImlkIjogc2VsZi5pZCwgIm5hbWUiOiBzZWxmLm5hbWUsICJkZXNjcmlwdGlvbiI6IHNlbGYuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICJkbV9pZCI6IHNlbGYuZG1faWQsCiAgICAgICAgICAgICJkbV9uYW1lIjogc2VsZi5kbS5kaXNwbGF5X25hbWUgb3Igc2VsZi5kbS51c2VybmFtZSBpZiBzZWxmLmRtIGVsc2UgIlVua25vd24iLAogICAgICAgICAgICAicGxheWVyX2NvdW50IjogbGVuKFttIGZvciBtIGluIHNlbGYubWVtYmVyc2hpcHMgaWYgbS5yb2xlID09ICJwbGF5ZXIiIGFuZCBtLmFwcHJvdmVkXSksCiAgICAgICAgICAgICJjaGFyYWN0ZXJfY291bnQiOiBsZW4oW2MgZm9yIGMgaW4gc2VsZi5jaGFyYWN0ZXJzIGlmIG5vdCBjLmlzX25wY10pLAogICAgICAgICAgICAiY3JlYXRlZF9hdCI6IHNlbGYuY3JlYXRlZF9hdC5pc29mb3JtYXQoKSwKICAgICAgICB9CgoKY2xhc3MgQ2FtcGFpZ25NZW1iZXJzaGlwKGRiLk1vZGVsKToKICAgIF9fdGFibGVuYW1lX18gPSAiY2FtcGFpZ25fbWVtYmVyc2hpcHMiCiAgICBpZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQogICAgY2FtcGFpZ25faWQgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGIuRm9yZWlnbktleSgiY2FtcGFpZ25zLmlkIiksIG51bGxhYmxlPUZhbHNlKQogICAgdXNlcl9pZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkYi5Gb3JlaWduS2V5KCJ1c2Vycy5pZCIpLCBudWxsYWJsZT1GYWxzZSkKICAgIHJvbGUgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDIwKSwgbnVsbGFibGU9RmFsc2UsIGRlZmF1bHQ9InBsYXllciIpCiAgICBhcHByb3ZlZCA9IGRiLkNvbHVtbihkYi5Cb29sZWFuLCBkZWZhdWx0PUZhbHNlLCBudWxsYWJsZT1GYWxzZSkKICAgIGpvaW5lZF9hdCA9IGRiLkNvbHVtbihkYi5EYXRlVGltZSwgZGVmYXVsdD1kYXRldGltZS51dGNub3csIG51bGxhYmxlPUZhbHNlKQoKICAgIF9fdGFibGVfYXJnc19fID0gKGRiLlVuaXF1ZUNvbnN0cmFpbnQoImNhbXBhaWduX2lkIiwgInVzZXJfaWQiKSwpCgoKY2xhc3MgQ2hhcmFjdGVyVGVtcGxhdGUoZGIuTW9kZWwpOgogICAgIiIiCiAgICBTYXZlZCBjaGFyYWN0ZXIgYnVpbGRzIHRoYXQgY2FuIGJlIHF1aWNrbHkgcmV1c2VkLgogICAgU3RvcmVzIHRoZSBmdWxsIGJ1aWxkIGNvbmZpZyDigJQgcGxheWVycyBzYXZlIHRoZWlyIG93biwgRE1zIHNhdmUgTlBDIGFyY2hldHlwZXMuCiAgICAiIiIKICAgIF9fdGFibGVuYW1lX18gPSAiY2hhcmFjdGVyX3RlbXBsYXRlcyIKICAgIGlkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICBvd25lcl9pZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkYi5Gb3JlaWduS2V5KCJ1c2Vycy5pZCIpLCBudWxsYWJsZT1GYWxzZSkKICAgIG5hbWUgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDIwMCksIG51bGxhYmxlPUZhbHNlKSAgICAgICAgICAgIyBUZW1wbGF0ZSBsYWJlbCwgZS5nLiAiVGFuayBGaWdodGVyIEJ1aWxkIgogICAgaXNfbnBjX3RlbXBsYXRlID0gZGIuQ29sdW1uKGRiLkJvb2xlYW4sIGRlZmF1bHQ9RmFsc2UpICAgICMgVHJ1ZSA9IE5QQyBhcmNoZXR5cGUsIEZhbHNlID0gUEMgdGVtcGxhdGUKICAgIGRlc2NyaXB0aW9uID0gZGIuQ29sdW1uKGRiLlRleHQsIG51bGxhYmxlPVRydWUpICAgICAgICAgICAgIyBTaG9ydCBkZXNjcmlwdGlvbiBvZiB0aGUgdGVtcGxhdGUKCiAgICAjIENvcmUgYnVpbGQgZGF0YQogICAgcmFjZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCBudWxsYWJsZT1UcnVlKQogICAgY2hhcl9jbGFzcyA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCBudWxsYWJsZT1UcnVlKQogICAgYmFja2dyb3VuZCA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCBudWxsYWJsZT1UcnVlKQogICAgYWxpZ25tZW50ID0gZGIuQ29sdW1uKGRiLlN0cmluZyg0MCksIG51bGxhYmxlPVRydWUpCiAgICBsZXZlbCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTEpCgogICAgIyBBYmlsaXR5IHNjb3JlcwogICAgc3RyZW5ndGggPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0xMCkKICAgIGRleHRlcml0eSA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTEwKQogICAgY29uc3RpdHV0aW9uID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRlZmF1bHQ9MTApCiAgICBpbnRlbGxpZ2VuY2UgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0xMCkKICAgIHdpc2RvbSA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTEwKQogICAgY2hhcmlzbWEgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0xMCkKCiAgICAjIFBlcnNvbmFsaXR5CiAgICB0cmFpdHNfanNvbiA9IGRiLkNvbHVtbihkYi5UZXh0LCBkZWZhdWx0PSJ7fSIpCiAgICBub3RlcyA9IGRiLkNvbHVtbihkYi5UZXh0LCBudWxsYWJsZT1UcnVlKQoKICAgIHRpbWVzX3VzZWQgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0wKQogICAgY3JlYXRlZF9hdCA9IGRiLkNvbHVtbihkYi5EYXRlVGltZSwgZGVmYXVsdD1kYXRldGltZS51dGNub3csIG51bGxhYmxlPUZhbHNlKQoKICAgIGRlZiB0b19kaWN0KHNlbGYpOgogICAgICAgIGltcG9ydCBqc29uCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgImlkIjogc2VsZi5pZCwKICAgICAgICAgICAgIm5hbWUiOiBzZWxmLm5hbWUsCiAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6IHNlbGYuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICJpc19ucGNfdGVtcGxhdGUiOiBzZWxmLmlzX25wY190ZW1wbGF0ZSwKICAgICAgICAgICAgInJhY2UiOiBzZWxmLnJhY2UsCiAgICAgICAgICAgICJjaGFyX2NsYXNzIjogc2VsZi5jaGFyX2NsYXNzLAogICAgICAgICAgICAiYmFja2dyb3VuZCI6IHNlbGYuYmFja2dyb3VuZCwKICAgICAgICAgICAgImFsaWdubWVudCI6IHNlbGYuYWxpZ25tZW50LAogICAgICAgICAgICAibGV2ZWwiOiBzZWxmLmxldmVsLAogICAgICAgICAgICAic3RyZW5ndGgiOiBzZWxmLnN0cmVuZ3RoLAogICAgICAgICAgICAiZGV4dGVyaXR5Ijogc2VsZi5kZXh0ZXJpdHksCiAgICAgICAgICAgICJjb25zdGl0dXRpb24iOiBzZWxmLmNvbnN0aXR1dGlvbiwKICAgICAgICAgICAgImludGVsbGlnZW5jZSI6IHNlbGYuaW50ZWxsaWdlbmNlLAogICAgICAgICAgICAid2lzZG9tIjogc2VsZi53aXNkb20sCiAgICAgICAgICAgICJjaGFyaXNtYSI6IHNlbGYuY2hhcmlzbWEsCiAgICAgICAgICAgICJ0cmFpdHMiOiBqc29uLmxvYWRzKHNlbGYudHJhaXRzX2pzb24gb3IgInt9IiksCiAgICAgICAgICAgICJub3RlcyI6IHNlbGYubm90ZXMsCiAgICAgICAgICAgICJ0aW1lc191c2VkIjogc2VsZi50aW1lc191c2VkLAogICAgICAgIH0KCgpjbGFzcyBDaGFyYWN0ZXIoZGIuTW9kZWwpOgogICAgX190YWJsZW5hbWVfXyA9ICJjaGFyYWN0ZXJzIgogICAgaWQgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkKICAgIG93bmVyX2lkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRiLkZvcmVpZ25LZXkoInVzZXJzLmlkIiksIG51bGxhYmxlPVRydWUpCiAgICBjYW1wYWlnbl9pZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkYi5Gb3JlaWduS2V5KCJjYW1wYWlnbnMuaWQiKSwgbnVsbGFibGU9VHJ1ZSkKICAgIGlzX25wYyA9IGRiLkNvbHVtbihkYi5Cb29sZWFuLCBkZWZhdWx0PUZhbHNlLCBudWxsYWJsZT1GYWxzZSkKCiAgICBuYW1lID0gZGIuQ29sdW1uKGRiLlN0cmluZygyMDApLCBudWxsYWJsZT1GYWxzZSwgZGVmYXVsdD0iKHVubmFtZWQpIikKICAgIGxldmVsID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRlZmF1bHQ9MSwgbnVsbGFibGU9RmFsc2UpCiAgICBjaGFyX2NsYXNzID0gZGIuQ29sdW1uKGRiLlN0cmluZyg4MCksIG51bGxhYmxlPVRydWUpCiAgICBzdWJjbGFzcyA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCBudWxsYWJsZT1UcnVlKQogICAgcmFjZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCBudWxsYWJsZT1UcnVlKQogICAgYmFja2dyb3VuZCA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCBudWxsYWJsZT1UcnVlKQogICAgYWxpZ25tZW50ID0gZGIuQ29sdW1uKGRiLlN0cmluZyg0MCksIG51bGxhYmxlPVRydWUpCiAgICBleHBlcmllbmNlX3BvaW50cyA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTApCgogICAgc3RyZW5ndGggPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0xMCkKICAgIGRleHRlcml0eSA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTEwKQogICAgY29uc3RpdHV0aW9uID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRlZmF1bHQ9MTApCiAgICBpbnRlbGxpZ2VuY2UgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0xMCkKICAgIHdpc2RvbSA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTEwKQogICAgY2hhcmlzbWEgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0xMCkKCiAgICBtYXhfaHAgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0wKQogICAgY3VycmVudF9ocCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTApCiAgICB0ZW1wX2hwID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRlZmF1bHQ9MCkKICAgIGFybW9yX2NsYXNzID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRlZmF1bHQ9MTApCiAgICBpbml0aWF0aXZlID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRlZmF1bHQ9MCkKICAgIHNwZWVkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRlZmF1bHQ9MzApCiAgICBwcm9maWNpZW5jeV9ib251cyA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBkZWZhdWx0PTIpCiAgICBoaXRfZGljZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoMjApLCBudWxsYWJsZT1UcnVlKQoKICAgIHNraWxsc19qc29uID0gZGIuQ29sdW1uKGRiLlRleHQsIGRlZmF1bHQ9Int9IikKICAgIHNhdmluZ190aHJvd3NfanNvbiA9IGRiLkNvbHVtbihkYi5UZXh0LCBkZWZhdWx0PSJ7fSIpCiAgICBlcXVpcG1lbnRfanNvbiA9IGRiLkNvbHVtbihkYi5UZXh0LCBkZWZhdWx0PSJbXSIpCiAgICBzcGVsbHNfanNvbiA9IGRiLkNvbHVtbihkYi5UZXh0LCBkZWZhdWx0PSJ7fSIpCiAgICBmZWF0dXJlc19qc29uID0gZGIuQ29sdW1uKGRiLlRleHQsIGRlZmF1bHQ9IltdIikKICAgIHRyYWl0c19qc29uID0gZGIuQ29sdW1uKGRiLlRleHQsIGRlZmF1bHQ9Int9IikKICAgIGF0dGFja3NfanNvbiA9IGRiLkNvbHVtbihkYi5UZXh0LCBkZWZhdWx0PSJbXSIpCiAgICBub3RlcyA9IGRiLkNvbHVtbihkYi5UZXh0LCBudWxsYWJsZT1UcnVlKQoKICAgIGJ1aWxkX3N0ZXAgPSBkYi5Db2x1bW4oZGIuSW50ZWdlciwgZGVmYXVsdD0wKQogICAgYnVpbGRfY29tcGxldGUgPSBkYi5Db2x1bW4oZGIuQm9vbGVhbiwgZGVmYXVsdD1GYWxzZSkKCiAgICBjcmVhdGVkX2F0ID0gZGIuQ29sdW1uKGRiLkRhdGVUaW1lLCBkZWZhdWx0PWRhdGV0aW1lLnV0Y25vdywgbnVsbGFibGU9RmFsc2UpCiAgICB1cGRhdGVkX2F0ID0gZGIuQ29sdW1uKGRiLkRhdGVUaW1lLCBkZWZhdWx0PWRhdGV0aW1lLnV0Y25vdywgb251cGRhdGU9ZGF0ZXRpbWUudXRjbm93KQoKICAgIGRlZiBhYmlsaXR5X21vZGlmaWVyKHNlbGYsIHNjb3JlOiBpbnQpIC0+IGludDoKICAgICAgICByZXR1cm4gKHNjb3JlIC0gMTApIC8vIDIKCiAgICBkZWYgdG9fY2FyZF9kaWN0KHNlbGYpOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICJpZCI6IHNlbGYuaWQsICJuYW1lIjogc2VsZi5uYW1lLCAibGV2ZWwiOiBzZWxmLmxldmVsLAogICAgICAgICAgICAiY2hhcl9jbGFzcyI6IHNlbGYuY2hhcl9jbGFzcyBvciAi4oCUIiwgInJhY2UiOiBzZWxmLnJhY2Ugb3IgIuKAlCIsCiAgICAgICAgICAgICJiYWNrZ3JvdW5kIjogc2VsZi5iYWNrZ3JvdW5kIG9yICLigJQiLAogICAgICAgICAgICAiY3VycmVudF9ocCI6IHNlbGYuY3VycmVudF9ocCwgIm1heF9ocCI6IHNlbGYubWF4X2hwLAogICAgICAgICAgICAiYXJtb3JfY2xhc3MiOiBzZWxmLmFybW9yX2NsYXNzLCAiaXNfbnBjIjogc2VsZi5pc19ucGMsCiAgICAgICAgICAgICJidWlsZF9jb21wbGV0ZSI6IHNlbGYuYnVpbGRfY29tcGxldGUsICJvd25lcl9pZCI6IHNlbGYub3duZXJfaWQsCiAgICAgICAgfQoKICAgIGRlZiB0b19zaGVldF9kaWN0KHNlbGYpOgogICAgICAgIGltcG9ydCBqc29uCiAgICAgICAgZCA9IHNlbGYudG9fY2FyZF9kaWN0KCkKICAgICAgICBkLnVwZGF0ZSh7CiAgICAgICAgICAgICJzdHJlbmd0aCI6IHNlbGYuc3RyZW5ndGgsICJkZXh0ZXJpdHkiOiBzZWxmLmRleHRlcml0eSwKICAgICAgICAgICAgImNvbnN0aXR1dGlvbiI6IHNlbGYuY29uc3RpdHV0aW9uLCAiaW50ZWxsaWdlbmNlIjogc2VsZi5pbnRlbGxpZ2VuY2UsCiAgICAgICAgICAgICJ3aXNkb20iOiBzZWxmLndpc2RvbSwgImNoYXJpc21hIjogc2VsZi5jaGFyaXNtYSwKICAgICAgICAgICAgInN0cl9tb2QiOiBzZWxmLmFiaWxpdHlfbW9kaWZpZXIoc2VsZi5zdHJlbmd0aCksCiAgICAgICAgICAgICJkZXhfbW9kIjogc2VsZi5hYmlsaXR5X21vZGlmaWVyKHNlbGYuZGV4dGVyaXR5KSwKICAgICAgICAgICAgImNvbl9tb2QiOiBzZWxmLmFiaWxpdHlfbW9kaWZpZXIoc2VsZi5jb25zdGl0dXRpb24pLAogICAgICAgICAgICAiaW50X21vZCI6IHNlbGYuYWJpbGl0eV9tb2RpZmllcihzZWxmLmludGVsbGlnZW5jZSksCiAgICAgICAgICAgICJ3aXNfbW9kIjogc2VsZi5hYmlsaXR5X21vZGlmaWVyKHNlbGYud2lzZG9tKSwKICAgICAgICAgICAgImNoYV9tb2QiOiBzZWxmLmFiaWxpdHlfbW9kaWZpZXIoc2VsZi5jaGFyaXNtYSksCiAgICAgICAgICAgICJ0ZW1wX2hwIjogc2VsZi50ZW1wX2hwLCAiaW5pdGlhdGl2ZSI6IHNlbGYuaW5pdGlhdGl2ZSwKICAgICAgICAgICAgInNwZWVkIjogc2VsZi5zcGVlZCwgInByb2ZpY2llbmN5X2JvbnVzIjogc2VsZi5wcm9maWNpZW5jeV9ib251cywKICAgICAgICAgICAgImhpdF9kaWNlIjogc2VsZi5oaXRfZGljZSwgImFsaWdubWVudCI6IHNlbGYuYWxpZ25tZW50LAogICAgICAgICAgICAiZXhwZXJpZW5jZV9wb2ludHMiOiBzZWxmLmV4cGVyaWVuY2VfcG9pbnRzLCAic3ViY2xhc3MiOiBzZWxmLnN1YmNsYXNzLAogICAgICAgICAgICAic2tpbGxzIjoganNvbi5sb2FkcyhzZWxmLnNraWxsc19qc29uIG9yICJ7fSIpLAogICAgICAgICAgICAic2F2aW5nX3Rocm93cyI6IGpzb24ubG9hZHMoc2VsZi5zYXZpbmdfdGhyb3dzX2pzb24gb3IgInt9IiksCiAgICAgICAgICAgICJlcXVpcG1lbnQiOiBqc29uLmxvYWRzKHNlbGYuZXF1aXBtZW50X2pzb24gb3IgIltdIiksCiAgICAgICAgICAgICJzcGVsbHMiOiBqc29uLmxvYWRzKHNlbGYuc3BlbGxzX2pzb24gb3IgInt9IiksCiAgICAgICAgICAgICJmZWF0dXJlcyI6IGpzb24ubG9hZHMoc2VsZi5mZWF0dXJlc19qc29uIG9yICJbXSIpLAogICAgICAgICAgICAidHJhaXRzIjoganNvbi5sb2FkcyhzZWxmLnRyYWl0c19qc29uIG9yICJ7fSIpLAogICAgICAgICAgICAiYXR0YWNrcyI6IGpzb24ubG9hZHMoc2VsZi5hdHRhY2tzX2pzb24gb3IgIltdIiksCiAgICAgICAgICAgICJub3RlcyI6IHNlbGYubm90ZXMsCiAgICAgICAgfSkKICAgICAgICByZXR1cm4gZAoKICAgIGRlZiB0b190ZW1wbGF0ZShzZWxmLCB0ZW1wbGF0ZV9uYW1lOiBzdHIsIGRlc2NyaXB0aW9uOiBzdHIgPSAiIikgLT4gQ2hhcmFjdGVyVGVtcGxhdGU6CiAgICAgICAgIiIiU25hcHNob3QgdGhpcyBjaGFyYWN0ZXIgaW50byBhIHJldXNhYmxlIHRlbXBsYXRlLiIiIgogICAgICAgIGltcG9ydCBqc29uCiAgICAgICAgcmV0dXJuIENoYXJhY3RlclRlbXBsYXRlKAogICAgICAgICAgICBvd25lcl9pZD1zZWxmLm93bmVyX2lkLAogICAgICAgICAgICBuYW1lPXRlbXBsYXRlX25hbWUsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uPWRlc2NyaXB0aW9uLAogICAgICAgICAgICBpc19ucGNfdGVtcGxhdGU9c2VsZi5pc19ucGMsCiAgICAgICAgICAgIHJhY2U9c2VsZi5yYWNlLAogICAgICAgICAgICBjaGFyX2NsYXNzPXNlbGYuY2hhcl9jbGFzcywKICAgICAgICAgICAgYmFja2dyb3VuZD1zZWxmLmJhY2tncm91bmQsCiAgICAgICAgICAgIGFsaWdubWVudD1zZWxmLmFsaWdubWVudCwKICAgICAgICAgICAgbGV2ZWw9c2VsZi5sZXZlbCwKICAgICAgICAgICAgc3RyZW5ndGg9c2VsZi5zdHJlbmd0aCwgZGV4dGVyaXR5PXNlbGYuZGV4dGVyaXR5LAogICAgICAgICAgICBjb25zdGl0dXRpb249c2VsZi5jb25zdGl0dXRpb24sIGludGVsbGlnZW5jZT1zZWxmLmludGVsbGlnZW5jZSwKICAgICAgICAgICAgd2lzZG9tPXNlbGYud2lzZG9tLCBjaGFyaXNtYT1zZWxmLmNoYXJpc21hLAogICAgICAgICAgICB0cmFpdHNfanNvbj1zZWxmLnRyYWl0c19qc29uIG9yICJ7fSIsCiAgICAgICAgICAgIG5vdGVzPXNlbGYubm90ZXMsCiAgICAgICAgKQo="
[System.IO.File]::WriteAllBytes("$root\models\__init__.py", [System.Convert]::FromBase64String($b))

# app.py
$b = "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwppbXBvcnQgb3MKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlZGlyZWN0LCB1cmxfZm9yLCBzZXNzaW9uCmZyb20gZmxhc2tfc2Vzc2lvbiBpbXBvcnQgU2Vzc2lvbgpmcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnCmZyb20gZGIgaW1wb3J0IGRiCgpkZWYgY3JlYXRlX2FwcCgpIC0+IEZsYXNrOgogICAgYXBwID0gRmxhc2soX19uYW1lX18pCiAgICBhcHAuY29uZmlnLmZyb21fb2JqZWN0KENvbmZpZykKCiAgICBvcy5tYWtlZGlycyhhcHAuY29uZmlnWyJTRVNTSU9OX0ZJTEVfRElSIl0sIGV4aXN0X29rPVRydWUpCiAgICBvcy5tYWtlZGlycyhhcHAuY29uZmlnLmdldCgiVVBMT0FEX0ZPTERFUiIsICJ1cGxvYWRzIiksIGV4aXN0X29rPVRydWUpCiAgICBvcy5tYWtlZGlycygiZGF0YSIsIGV4aXN0X29rPVRydWUpCgogICAgU2Vzc2lvbihhcHApCiAgICBkYi5pbml0X2FwcChhcHApCgogICAgZnJvbSByb3V0ZXMuYXV0aCBpbXBvcnQgYXV0aF9icAogICAgZnJvbSByb3V0ZXMuYWRtaW4gaW1wb3J0IGFkbWluX2JwCiAgICBmcm9tIHJvdXRlcy5kbSBpbXBvcnQgZG1fYnAKICAgIGZyb20gcm91dGVzLnBsYXllciBpbXBvcnQgcGxheWVyX2JwCiAgICBmcm9tIHJvdXRlcy5jYW1wYWlnbnMgaW1wb3J0IGNhbXBhaWduc19icAogICAgZnJvbSByb3V0ZXMuY2hhcmFjdGVycyBpbXBvcnQgY2hhcmFjdGVyc19icAogICAgZnJvbSByb3V0ZXMudGVtcGxhdGVzIGltcG9ydCB0ZW1wbGF0ZXNfYnAKCiAgICBhcHAucmVnaXN0ZXJfYmx1ZXByaW50KGF1dGhfYnApCiAgICBhcHAucmVnaXN0ZXJfYmx1ZXByaW50KGFkbWluX2JwKQogICAgYXBwLnJlZ2lzdGVyX2JsdWVwcmludChkbV9icCkKICAgIGFwcC5yZWdpc3Rlcl9ibHVlcHJpbnQocGxheWVyX2JwKQogICAgYXBwLnJlZ2lzdGVyX2JsdWVwcmludChjYW1wYWlnbnNfYnApCiAgICBhcHAucmVnaXN0ZXJfYmx1ZXByaW50KGNoYXJhY3RlcnNfYnApCiAgICBhcHAucmVnaXN0ZXJfYmx1ZXByaW50KHRlbXBsYXRlc19icCkKCiAgICBAYXBwLmdldCgiLyIpCiAgICBkZWYgaG9tZSgpOgogICAgICAgIGlmIG5vdCBzZXNzaW9uLmdldCgidXNlcl9pZCIpOgogICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiYXV0aC5sb2dpbl9nZXQiKSkKICAgICAgICByb2xlID0gc2Vzc2lvbi5nZXQoInJvbGUiKQogICAgICAgIGlmIHJvbGUgPT0gImFkbWluIjoKICAgICAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImFkbWluLmRhc2hib2FyZCIpKQogICAgICAgIGVsaWYgcm9sZSA9PSAiZG0iOgogICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiZG0uZGFzaGJvYXJkIikpCiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoInBsYXllci5kYXNoYm9hcmQiKSkKCiAgICByZXR1cm4gYXBwCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgYXBwID0gY3JlYXRlX2FwcCgpCiAgICBwb3J0ID0gaW50KG9zLmdldGVudigiRkxBU0tfUE9SVCIsICI1MDUwIikpCiAgICB3aXRoIGFwcC5hcHBfY29udGV4dCgpOgogICAgICAgIGRiLmNyZWF0ZV9hbGwoKQogICAgYXBwLnJ1bihob3N0PSIxMjcuMC4wLjEiLCBwb3J0PXBvcnQsIGRlYnVnPVRydWUpCg=="
[System.IO.File]::WriteAllBytes("$root\app.py", [System.Convert]::FromBase64String($b))

# routes\templates.py
$b = "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwpmcm9tIGZsYXNrIGltcG9ydCBCbHVlcHJpbnQsIHJlbmRlcl90ZW1wbGF0ZSwgcmVkaXJlY3QsIHVybF9mb3IsIHNlc3Npb24sIGZsYXNoLCByZXF1ZXN0LCBqc29uaWZ5CmZyb20gZGIgaW1wb3J0IGRiCmZyb20gbW9kZWxzIGltcG9ydCBDaGFyYWN0ZXIsIENoYXJhY3RlclRlbXBsYXRlCgp0ZW1wbGF0ZXNfYnAgPSBCbHVlcHJpbnQoInRlbXBsYXRlcyIsIF9fbmFtZV9fLCB1cmxfcHJlZml4PSIvdGVtcGxhdGVzIikKCmRlZiBfcmVxdWlyZV9sb2dpbigpOgogICAgaWYgbm90IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIik6CiAgICAgICAgZmxhc2goIlBsZWFzZSBsb2cgaW4uIiwgImVycm9yIikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgpAdGVtcGxhdGVzX2JwLmdldCgiLyIpCmRlZiBsaWJyYXJ5KCk6CiAgICAiIiJTaG93IHRoZSB1c2VyJ3Mgc2F2ZWQgdGVtcGxhdGVzLiIiIgogICAgaWYgbm90IF9yZXF1aXJlX2xvZ2luKCk6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICB1aWQgPSBzZXNzaW9uLmdldCgidXNlcl9pZCIpCiAgICByb2xlID0gc2Vzc2lvbi5nZXQoInJvbGUiKQogICAgaWYgcm9sZSBpbiAoImRtIiwgImFkbWluIik6CiAgICAgICAgcGNfdGVtcGxhdGVzID0gQ2hhcmFjdGVyVGVtcGxhdGUucXVlcnkuZmlsdGVyX2J5KG93bmVyX2lkPXVpZCwgaXNfbnBjX3RlbXBsYXRlPUZhbHNlKS5vcmRlcl9ieShDaGFyYWN0ZXJUZW1wbGF0ZS50aW1lc191c2VkLmRlc2MoKSkuYWxsKCkKICAgICAgICBucGNfdGVtcGxhdGVzID0gQ2hhcmFjdGVyVGVtcGxhdGUucXVlcnkuZmlsdGVyX2J5KG93bmVyX2lkPXVpZCwgaXNfbnBjX3RlbXBsYXRlPVRydWUpLm9yZGVyX2J5KENoYXJhY3RlclRlbXBsYXRlLnRpbWVzX3VzZWQuZGVzYygpKS5hbGwoKQogICAgZWxzZToKICAgICAgICBwY190ZW1wbGF0ZXMgPSBDaGFyYWN0ZXJUZW1wbGF0ZS5xdWVyeS5maWx0ZXJfYnkob3duZXJfaWQ9dWlkLCBpc19ucGNfdGVtcGxhdGU9RmFsc2UpLm9yZGVyX2J5KENoYXJhY3RlclRlbXBsYXRlLnRpbWVzX3VzZWQuZGVzYygpKS5hbGwoKQogICAgICAgIG5wY190ZW1wbGF0ZXMgPSBbXQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgidGVtcGxhdGVzL2xpYnJhcnkuaHRtbCIsIHBjX3RlbXBsYXRlcz1wY190ZW1wbGF0ZXMsIG5wY190ZW1wbGF0ZXM9bnBjX3RlbXBsYXRlcykKCkB0ZW1wbGF0ZXNfYnAucG9zdCgiL3NhdmVfZnJvbV9jaGFyLzxpbnQ6Y2hhcl9pZD4iKQpkZWYgc2F2ZV9mcm9tX2NoYXIoY2hhcl9pZDogaW50KToKICAgICIiIlNhdmUgYW4gZXhpc3RpbmcgY2hhcmFjdGVyIGFzIGEgdGVtcGxhdGUuIiIiCiAgICBpZiBub3QgX3JlcXVpcmVfbG9naW4oKToKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiYXV0aC5sb2dpbl9nZXQiKSkKICAgIGNoYXIgPSBDaGFyYWN0ZXIucXVlcnkuZ2V0X29yXzQwNChjaGFyX2lkKQogICAgdWlkID0gc2Vzc2lvbi5nZXQoInVzZXJfaWQiKQogICAgcm9sZSA9IHNlc3Npb24uZ2V0KCJyb2xlIikKCiAgICAjIE9ubHkgb3duZXIsIERNIG9mIGNhbXBhaWduLCBvciBhZG1pbiBjYW4gc2F2ZQogICAgYWxsb3dlZCA9IChyb2xlID09ICJhZG1pbiIpIG9yIChjaGFyLm93bmVyX2lkID09IHVpZCkKICAgIGlmIG5vdCBhbGxvd2VkOgogICAgICAgIGZsYXNoKCJZb3UgY2FuIG9ubHkgc2F2ZSB5b3VyIG93biBjaGFyYWN0ZXJzIGFzIHRlbXBsYXRlcy4iLCAiZXJyb3IiKQogICAgICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJjaGFyYWN0ZXJzLnNoZWV0IiwgY2lkPWNoYXJfaWQpKQoKICAgIHRlbXBsYXRlX25hbWUgPSAocmVxdWVzdC5mb3JtLmdldCgidGVtcGxhdGVfbmFtZSIpIG9yICIiKS5zdHJpcCgpCiAgICBkZXNjcmlwdGlvbiA9IChyZXF1ZXN0LmZvcm0uZ2V0KCJ0ZW1wbGF0ZV9kZXNjcmlwdGlvbiIpIG9yICIiKS5zdHJpcCgpCiAgICBpZiBub3QgdGVtcGxhdGVfbmFtZToKICAgICAgICBmbGFzaCgiVGVtcGxhdGUgbmFtZSByZXF1aXJlZC4iLCAiZXJyb3IiKQogICAgICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJjaGFyYWN0ZXJzLnNoZWV0IiwgY2lkPWNoYXJfaWQpKQoKICAgICMgQ2hlY2sgZm9yIGR1cGxpY2F0ZSBuYW1lCiAgICBleGlzdGluZyA9IENoYXJhY3RlclRlbXBsYXRlLnF1ZXJ5LmZpbHRlcl9ieShvd25lcl9pZD11aWQsIG5hbWU9dGVtcGxhdGVfbmFtZSkuZmlyc3QoKQogICAgaWYgZXhpc3Rpbmc6CiAgICAgICAgZmxhc2goZiJZb3UgYWxyZWFkeSBoYXZlIGEgdGVtcGxhdGUgbmFtZWQgJ3t0ZW1wbGF0ZV9uYW1lfScuIENob29zZSBhIGRpZmZlcmVudCBuYW1lLiIsICJlcnJvciIpCiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImNoYXJhY3RlcnMuc2hlZXQiLCBjaWQ9Y2hhcl9pZCkpCgogICAgdG1wbCA9IGNoYXIudG9fdGVtcGxhdGUodGVtcGxhdGVfbmFtZSwgZGVzY3JpcHRpb24pCiAgICB0bXBsLm93bmVyX2lkID0gdWlkCiAgICBkYi5zZXNzaW9uLmFkZCh0bXBsKQogICAgZGIuc2Vzc2lvbi5jb21taXQoKQogICAgZmxhc2goZiJTYXZlZCBhcyB0ZW1wbGF0ZSAne3RlbXBsYXRlX25hbWV9JyEgRmluZCBpdCBpbiB5b3VyIFRlbXBsYXRlIExpYnJhcnkuIiwgIm9rIikKICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJjaGFyYWN0ZXJzLnNoZWV0IiwgY2lkPWNoYXJfaWQpKQoKQHRlbXBsYXRlc19icC5nZXQoIi9hcGkvbGlzdCIpCmRlZiBhcGlfbGlzdCgpOgogICAgIiIiUmV0dXJuIHRlbXBsYXRlcyBhcyBKU09OIGZvciB0aGUgd2l6YXJkIHRvIGxvYWQuIiIiCiAgICBpZiBub3Qgc2Vzc2lvbi5nZXQoInVzZXJfaWQiKToKICAgICAgICByZXR1cm4ganNvbmlmeShbXSksIDQwMQogICAgdWlkID0gc2Vzc2lvbi5nZXQoInVzZXJfaWQiKQogICAgaXNfbnBjID0gcmVxdWVzdC5hcmdzLmdldCgibnBjIiwgImZhbHNlIikgPT0gInRydWUiCiAgICB0bXBscyA9IENoYXJhY3RlclRlbXBsYXRlLnF1ZXJ5LmZpbHRlcl9ieShvd25lcl9pZD11aWQsIGlzX25wY190ZW1wbGF0ZT1pc19ucGMpXAogICAgICAgIC5vcmRlcl9ieShDaGFyYWN0ZXJUZW1wbGF0ZS50aW1lc191c2VkLmRlc2MoKSkuYWxsKCkKICAgIHJldHVybiBqc29uaWZ5KFt0LnRvX2RpY3QoKSBmb3IgdCBpbiB0bXBsc10pCgpAdGVtcGxhdGVzX2JwLnBvc3QoIi9hcGkvdXNlLzxpbnQ6dG1wbF9pZD4iKQpkZWYgYXBpX3VzZSh0bXBsX2lkOiBpbnQpOgogICAgIiIiTWFyayBhIHRlbXBsYXRlIGFzIHVzZWQgYW5kIHJldHVybiBpdHMgZGF0YS4iIiIKICAgIGlmIG5vdCBzZXNzaW9uLmdldCgidXNlcl9pZCIpOgogICAgICAgIHJldHVybiBqc29uaWZ5KHsiZXJyb3IiOiAiTm90IGxvZ2dlZCBpbiJ9KSwgNDAxCiAgICB0bXBsID0gQ2hhcmFjdGVyVGVtcGxhdGUucXVlcnkuZ2V0X29yXzQwNCh0bXBsX2lkKQogICAgaWYgdG1wbC5vd25lcl9pZCAhPSBzZXNzaW9uLmdldCgidXNlcl9pZCIpIGFuZCBzZXNzaW9uLmdldCgicm9sZSIpICE9ICJhZG1pbiI6CiAgICAgICAgcmV0dXJuIGpzb25pZnkoeyJlcnJvciI6ICJGb3JiaWRkZW4ifSksIDQwMwogICAgdG1wbC50aW1lc191c2VkICs9IDEKICAgIGRiLnNlc3Npb24uY29tbWl0KCkKICAgIHJldHVybiBqc29uaWZ5KHsib2siOiBUcnVlLCAidGVtcGxhdGUiOiB0bXBsLnRvX2RpY3QoKX0pCgpAdGVtcGxhdGVzX2JwLnBvc3QoIi88aW50OnRtcGxfaWQ+L2RlbGV0ZSIpCmRlZiBkZWxldGUodG1wbF9pZDogaW50KToKICAgIHVpZCA9IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIikKICAgIGlmIG5vdCB1aWQ6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICB0bXBsID0gQ2hhcmFjdGVyVGVtcGxhdGUucXVlcnkuZ2V0X29yXzQwNCh0bXBsX2lkKQogICAgaWYgdG1wbC5vd25lcl9pZCAhPSB1aWQgYW5kIHNlc3Npb24uZ2V0KCJyb2xlIikgIT0gImFkbWluIjoKICAgICAgICBmbGFzaCgiWW91IGNhbiBvbmx5IGRlbGV0ZSB5b3VyIG93biB0ZW1wbGF0ZXMuIiwgImVycm9yIikKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigidGVtcGxhdGVzLmxpYnJhcnkiKSkKICAgIGRiLnNlc3Npb24uZGVsZXRlKHRtcGwpCiAgICBkYi5zZXNzaW9uLmNvbW1pdCgpCiAgICBmbGFzaChmIlRlbXBsYXRlICd7dG1wbC5uYW1lfScgZGVsZXRlZC4iLCAib2siKQogICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoInRlbXBsYXRlcy5saWJyYXJ5IikpCg=="
[System.IO.File]::WriteAllBytes("$root\routes\templates.py", [System.Convert]::FromBase64String($b))

# routes\characters.py
$b = "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwppbXBvcnQganNvbgpmcm9tIGZsYXNrIGltcG9ydCBCbHVlcHJpbnQsIHJlbmRlcl90ZW1wbGF0ZSwgcmVkaXJlY3QsIHVybF9mb3IsIHNlc3Npb24sIGZsYXNoLCByZXF1ZXN0LCBqc29uaWZ5LCBjdXJyZW50X2FwcApmcm9tIGRiIGltcG9ydCBkYgpmcm9tIG1vZGVscyBpbXBvcnQgQ2hhcmFjdGVyLCBDYW1wYWlnbiwgQ2FtcGFpZ25NZW1iZXJzaGlwCmZyb20gc2VydmljZXMgaW1wb3J0IHNyZF9zZXJ2aWNlCmZyb20gc2VydmljZXMub2xsYW1hX3NlcnZpY2UgaW1wb3J0IHN0ZXBfcHJvbXB0LCBvbGxhbWFfY2hhdCwgZ2VuZXJhdGVfbnBjLCBvbGxhbWFfaGVhbHRoCgpjaGFyYWN0ZXJzX2JwID0gQmx1ZXByaW50KCJjaGFyYWN0ZXJzIiwgX19uYW1lX18sIHVybF9wcmVmaXg9Ii9jaGFyYWN0ZXJzIikKCmRlZiBfcmVxdWlyZV9sb2dpbigpOgogICAgaWYgbm90IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIik6CiAgICAgICAgZmxhc2goIlBsZWFzZSBsb2cgaW4uIiwgImVycm9yIikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgpkZWYgX2Nhbl9lZGl0X2NoYXJhY3RlcihjaGFyKToKICAgIHVpZCA9IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIikKICAgIHJvbGUgPSBzZXNzaW9uLmdldCgicm9sZSIpCiAgICBpZiByb2xlID09ICJhZG1pbiI6IHJldHVybiBUcnVlCiAgICBpZiByb2xlID09ICJkbSI6CiAgICAgICAgaWYgY2hhci5jYW1wYWlnbl9pZDoKICAgICAgICAgICAgYyA9IENhbXBhaWduLnF1ZXJ5LmdldChjaGFyLmNhbXBhaWduX2lkKQogICAgICAgICAgICBpZiBjIGFuZCBjLmRtX2lkID09IHVpZDogcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gY2hhci5pc19ucGMKICAgIHJldHVybiBjaGFyLm93bmVyX2lkID09IHVpZAoKZGVmIF9jYW5fZGVsZXRlX2NoYXJhY3RlcihjaGFyKToKICAgIHVpZCA9IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIikKICAgIHJvbGUgPSBzZXNzaW9uLmdldCgicm9sZSIpCiAgICBpZiByb2xlID09ICJhZG1pbiI6IHJldHVybiBUcnVlCiAgICBpZiByb2xlID09ICJkbSI6CiAgICAgICAgaWYgY2hhci5pc19ucGM6IHJldHVybiBUcnVlCiAgICAgICAgaWYgY2hhci5jYW1wYWlnbl9pZDoKICAgICAgICAgICAgYyA9IENhbXBhaWduLnF1ZXJ5LmdldChjaGFyLmNhbXBhaWduX2lkKQogICAgICAgICAgICBpZiBjIGFuZCBjLmRtX2lkID09IHVpZDogcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBjaGFyLm93bmVyX2lkID09IHVpZCBhbmQgbm90IGNoYXIuaXNfbnBjCgpAY2hhcmFjdGVyc19icC5nZXQoIi9uZXciKQpkZWYgbmV3KCk6CiAgICBpZiBub3QgX3JlcXVpcmVfbG9naW4oKToKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiYXV0aC5sb2dpbl9nZXQiKSkKICAgIGNhbXBhaWduX2lkID0gcmVxdWVzdC5hcmdzLmdldCgiY2FtcGFpZ25faWQiLCB0eXBlPWludCkKICAgIGlzX25wYyA9IHJlcXVlc3QuYXJncy5nZXQoIm5wYyIsICJmYWxzZSIpLmxvd2VyKCkgPT0gInRydWUiCiAgICByb2xlID0gc2Vzc2lvbi5nZXQoInJvbGUiKQogICAgaWYgaXNfbnBjIGFuZCByb2xlIG5vdCBpbiAoImRtIiwgImFkbWluIik6CiAgICAgICAgZmxhc2goIk9ubHkgRE1zIGFuZCBBZG1pbnMgY2FuIGNyZWF0ZSBOUENzLiIsICJlcnJvciIpCiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICBvbGxhbWFfdXJsID0gY3VycmVudF9hcHAuY29uZmlnWyJPTExBTUFfVVJMIl0KCiAgICAjIExvYWQgdGVtcGxhdGUgaWYgcmVxdWVzdGVkCiAgICBwcmVsb2FkID0gTm9uZQogICAgdGVtcGxhdGVfaWQgPSByZXF1ZXN0LmFyZ3MuZ2V0KCJ0ZW1wbGF0ZSIsIHR5cGU9aW50KQogICAgaWYgdGVtcGxhdGVfaWQ6CiAgICAgICAgZnJvbSBtb2RlbHMgaW1wb3J0IENoYXJhY3RlclRlbXBsYXRlCiAgICAgICAgdG1wbCA9IENoYXJhY3RlclRlbXBsYXRlLnF1ZXJ5LmdldCh0ZW1wbGF0ZV9pZCkKICAgICAgICBpZiB0bXBsIGFuZCAodG1wbC5vd25lcl9pZCA9PSBzZXNzaW9uLmdldCgidXNlcl9pZCIpIG9yIHJvbGUgPT0gImFkbWluIik6CiAgICAgICAgICAgIHRtcGwudGltZXNfdXNlZCArPSAxCiAgICAgICAgICAgIGZyb20gZGIgaW1wb3J0IGRiCiAgICAgICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkKICAgICAgICAgICAgcHJlbG9hZCA9IHRtcGwudG9fZGljdCgpCgogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgiY2hhcmFjdGVycy93aXphcmQuaHRtbCIsCiAgICAgICAgY2FtcGFpZ25faWQ9Y2FtcGFpZ25faWQsCiAgICAgICAgaXNfbnBjPWlzX25wYywKICAgICAgICByYWNlcz1zcmRfc2VydmljZS5TUkRfUkFDRVMsCiAgICAgICAgY2xhc3Nlcz1zcmRfc2VydmljZS5TUkRfQ0xBU1NFUywKICAgICAgICBiYWNrZ3JvdW5kcz1zcmRfc2VydmljZS5TUkRfQkFDS0dST1VORFMsCiAgICAgICAgYWxpZ25tZW50cz1zcmRfc2VydmljZS5TUkRfQUxJR05NRU5UUywKICAgICAgICBza2lsbHM9c3JkX3NlcnZpY2UuQUxMX1NLSUxMUywKICAgICAgICBvbGxhbWFfb2s9b2xsYW1hX2hlYWx0aChvbGxhbWFfdXJsKSwKICAgICAgICBwcmVsb2FkPXByZWxvYWQsCiAgICApCgpAY2hhcmFjdGVyc19icC5wb3N0KCIvY3JlYXRlIikKZGVmIGNyZWF0ZSgpOgogICAgaWYgbm90IF9yZXF1aXJlX2xvZ2luKCk6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICB1aWQgPSBzZXNzaW9uLmdldCgidXNlcl9pZCIpCiAgICByb2xlID0gc2Vzc2lvbi5nZXQoInJvbGUiKQogICAgZiA9IHJlcXVlc3QuZm9ybQogICAgY2FtcGFpZ25faWQgPSBmLmdldCgiY2FtcGFpZ25faWQiLCB0eXBlPWludCkKICAgIGlzX25wYyA9IGYuZ2V0KCJpc19ucGMiLCAiZmFsc2UiKS5sb3dlcigpID09ICJ0cnVlIgoKICAgIGlmIGlzX25wYyBhbmQgcm9sZSBub3QgaW4gKCJkbSIsICJhZG1pbiIpOgogICAgICAgIGZsYXNoKCJPbmx5IERNcyBhbmQgQWRtaW5zIGNhbiBjcmVhdGUgTlBDcy4iLCAiZXJyb3IiKQogICAgICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJhdXRoLmxvZ2luX2dldCIpKQoKICAgIGRlZiBzY29yZShrZXkpOiByZXR1cm4gbWF4KDEsIG1pbigzMCwgaW50KGYuZ2V0KGtleSwgMTApIG9yIDEwKSkpCgogICAgcmFjZV9uYW1lID0gZi5nZXQoInJhY2UiLCAiSHVtYW4iKQogICAgY2xhc3NfbmFtZSA9IGYuZ2V0KCJjaGFyX2NsYXNzIiwgIkZpZ2h0ZXIiKQogICAgYmdfbmFtZSA9IGYuZ2V0KCJiYWNrZ3JvdW5kIiwgIlNvbGRpZXIiKQogICAgbGV2ZWwgPSBtYXgoMSwgbWluKDMwLCBpbnQoZi5nZXQoImxldmVsIiwgMSkgb3IgMSkpKQogICAgYWxpZ25tZW50ID0gZi5nZXQoImFsaWdubWVudCIsICJUcnVlIE5ldXRyYWwiKQoKICAgIHNyZF9jbGFzcyA9IHNyZF9zZXJ2aWNlLmdldF9jbGFzcyhjbGFzc19uYW1lKSBvciB7fQogICAgaGl0X2RpZSA9IHNyZF9jbGFzcy5nZXQoImhpdF9kaWUiLCAiZDgiKQogICAgcHJvZiA9IHNyZF9zZXJ2aWNlLnByb2ZpY2llbmN5X2JvbnVzKG1pbihsZXZlbCwgMjApKQogICAgY29uX3Njb3JlID0gc2NvcmUoImNvbnN0aXR1dGlvbiIpCiAgICBkZXhfc2NvcmUgPSBzY29yZSgiZGV4dGVyaXR5IikKICAgIGNvbl9tb2QgPSBzcmRfc2VydmljZS5hYmlsaXR5X21vZGlmaWVyKGNvbl9zY29yZSkKICAgIGRleF9tb2QgPSBzcmRfc2VydmljZS5hYmlsaXR5X21vZGlmaWVyKGRleF9zY29yZSkKICAgIGhpdF9kaWVfdmFsID0gaW50KGhpdF9kaWVbMTpdKQogICAgYXV0b19ocCA9IG1heCgxLCBoaXRfZGllX3ZhbCArIGNvbl9tb2QgKyAobGV2ZWwgLSAxKSAqIChoaXRfZGllX3ZhbCAvLyAyICsgMSArIGNvbl9tb2QpKQogICAgYXV0b19hYyA9IDEwICsgZGV4X21vZAoKICAgIGhwX292ZXJyaWRlID0gZi5nZXQoImhwX292ZXJyaWRlIiwgIiIpLnN0cmlwKCkKICAgIGFjX292ZXJyaWRlID0gZi5nZXQoImFybW9yX2NsYXNzX292ZXJyaWRlIiwgIiIpLnN0cmlwKCkKICAgIG1heF9ocCA9IGludChocF9vdmVycmlkZSkgaWYgaHBfb3ZlcnJpZGUgYW5kIGhwX292ZXJyaWRlLmxzdHJpcCgnLScpLmlzZGlnaXQoKSBlbHNlIGF1dG9faHAKICAgIG1heF9ocCA9IG1heCgxLCBtYXhfaHApCiAgICBhcm1vcl9jbGFzcyA9IGludChhY19vdmVycmlkZSkgaWYgYWNfb3ZlcnJpZGUgYW5kIGFjX292ZXJyaWRlLmxzdHJpcCgnLScpLmlzZGlnaXQoKSBlbHNlIGF1dG9fYWMKICAgIHNwZWVkID0gbWF4KDAsIGludChmLmdldCgic3BlZWQiLCAzMCkgb3IgMzApKQoKICAgICMgUGVyc29uYWxpdHkgZmllbGRzCiAgICBwZXJzb25hbGl0eV90cmFpdCA9IGYuZ2V0KCJwZXJzb25hbGl0eV90cmFpdCIsICIiKQogICAgaWRlYWwgPSBmLmdldCgiaWRlYWwiLCAiIikKICAgIGJvbmQgPSBmLmdldCgiYm9uZCIsICIiKQogICAgZmxhdyA9IGYuZ2V0KCJmbGF3IiwgIiIpCiAgICB0cmFpdHNfanNvbiA9IGpzb24uZHVtcHMoewogICAgICAgICJwZXJzb25hbGl0eSI6IHBlcnNvbmFsaXR5X3RyYWl0LAogICAgICAgICJpZGVhbCI6IGlkZWFsLAogICAgICAgICJib25kIjogYm9uZCwKICAgICAgICAiZmxhdyI6IGZsYXcKICAgIH0pCgogICAgY2hhciA9IENoYXJhY3RlcigKICAgICAgICBvd25lcl9pZD11aWQgaWYgbm90IGlzX25wYyBlbHNlIE5vbmUsCiAgICAgICAgY2FtcGFpZ25faWQ9Y2FtcGFpZ25faWQsCiAgICAgICAgaXNfbnBjPWlzX25wYywKICAgICAgICBuYW1lPShmLmdldCgibmFtZSIpIG9yICIodW5uYW1lZCkiKS5zdHJpcCgpLAogICAgICAgIGxldmVsPWxldmVsLAogICAgICAgIGNoYXJfY2xhc3M9Y2xhc3NfbmFtZSwKICAgICAgICByYWNlPXJhY2VfbmFtZSwKICAgICAgICBiYWNrZ3JvdW5kPWJnX25hbWUsCiAgICAgICAgYWxpZ25tZW50PWFsaWdubWVudCwKICAgICAgICBzdHJlbmd0aD1zY29yZSgic3RyZW5ndGgiKSwKICAgICAgICBkZXh0ZXJpdHk9ZGV4X3Njb3JlLAogICAgICAgIGNvbnN0aXR1dGlvbj1jb25fc2NvcmUsCiAgICAgICAgaW50ZWxsaWdlbmNlPXNjb3JlKCJpbnRlbGxpZ2VuY2UiKSwKICAgICAgICB3aXNkb209c2NvcmUoIndpc2RvbSIpLAogICAgICAgIGNoYXJpc21hPXNjb3JlKCJjaGFyaXNtYSIpLAogICAgICAgIG1heF9ocD1tYXhfaHAsCiAgICAgICAgY3VycmVudF9ocD1tYXhfaHAsCiAgICAgICAgYXJtb3JfY2xhc3M9YXJtb3JfY2xhc3MsCiAgICAgICAgc3BlZWQ9c3BlZWQsCiAgICAgICAgcHJvZmljaWVuY3lfYm9udXM9cHJvZiwKICAgICAgICBoaXRfZGljZT1mIntsZXZlbH17aGl0X2RpZX0iLAogICAgICAgIGJ1aWxkX2NvbXBsZXRlPVRydWUsCiAgICAgICAgbm90ZXM9Zi5nZXQoIm5vdGVzIiwgIiIpLAogICAgICAgIHRyYWl0c19qc29uPXRyYWl0c19qc29uLAogICAgKQoKICAgIGJnID0gc3JkX3NlcnZpY2UuZ2V0X2JhY2tncm91bmQoYmdfbmFtZSkgb3Ige30KICAgICMgTWVyZ2UgYmFja2dyb3VuZCBza2lsbHMgKyBhbnkgY2xhc3Mgc2tpbGxzCiAgICBza2lsbHNfZGljdCA9IHtzOiBUcnVlIGZvciBzIGluIGJnLmdldCgic2tpbGxfcHJvZmljaWVuY2llcyIsIFtdKX0KICAgIGNoYXIuc2tpbGxzX2pzb24gPSBqc29uLmR1bXBzKHNraWxsc19kaWN0KQogICAgY2hhci5lcXVpcG1lbnRfanNvbiA9IGpzb24uZHVtcHMoYmcuZ2V0KCJlcXVpcG1lbnQiLCBbXSkpCgogICAgZmVhdHMgPSBbXQogICAgZm9yIGx2bCBpbiByYW5nZSgxLCBtaW4obGV2ZWwsIDIwKSArIDEpOgogICAgICAgIGZlYXRzLmV4dGVuZChzcmRfY2xhc3MuZ2V0KCJmZWF0dXJlc19ieV9sZXZlbCIsIHt9KS5nZXQobHZsLCBbXSkpCiAgICBjaGFyLmZlYXR1cmVzX2pzb24gPSBqc29uLmR1bXBzKGZlYXRzKQoKICAgICMgU2F2aW5nIHRocm93IHByb2ZpY2llbmNpZXMgZnJvbSBjbGFzcwogICAgc2F2ZXMgPSBzcmRfY2xhc3MuZ2V0KCJzYXZpbmdfdGhyb3dzIiwgW10pCiAgICBjaGFyLnNhdmluZ190aHJvd3NfanNvbiA9IGpzb24uZHVtcHMoe3M6IFRydWUgZm9yIHMgaW4gc2F2ZXN9KQoKICAgIGRiLnNlc3Npb24uYWRkKGNoYXIpCiAgICBkYi5zZXNzaW9uLmNvbW1pdCgpCgogICAgZmxhc2goZiJ7J05QQycgaWYgaXNfbnBjIGVsc2UgJ0NoYXJhY3Rlcid9ICd7Y2hhci5uYW1lfScgY3JlYXRlZCEiLCAib2siKQogICAgaWYgY2FtcGFpZ25faWQ6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImNhbXBhaWducy52aWV3IiwgY2lkPWNhbXBhaWduX2lkKSkKICAgIGlmIGlzX25wYzoKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiZG0uZGFzaGJvYXJkIikpCiAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigicGxheWVyLmRhc2hib2FyZCIpKQoKQGNoYXJhY3RlcnNfYnAuZ2V0KCIvPGludDpjaWQ+L3NoZWV0IikKZGVmIHNoZWV0KGNpZDogaW50KToKICAgIGlmIG5vdCBfcmVxdWlyZV9sb2dpbigpOgogICAgICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJhdXRoLmxvZ2luX2dldCIpKQogICAgY2hhciA9IENoYXJhY3Rlci5xdWVyeS5nZXRfb3JfNDA0KGNpZCkKICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoImNoYXJhY3RlcnMvc2hlZXQuaHRtbCIsCiAgICAgICAgY2hhcj1jaGFyLCBkYXRhPWNoYXIudG9fc2hlZXRfZGljdCgpLAogICAgICAgIGNhbl9lZGl0PV9jYW5fZWRpdF9jaGFyYWN0ZXIoY2hhciksCiAgICAgICAgY2FuX2RlbGV0ZT1fY2FuX2RlbGV0ZV9jaGFyYWN0ZXIoY2hhcikpCgpAY2hhcmFjdGVyc19icC5wb3N0KCIvPGludDpjaWQ+L2RlbGV0ZSIpCmRlZiBkZWxldGUoY2lkOiBpbnQpOgogICAgaWYgbm90IF9yZXF1aXJlX2xvZ2luKCk6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICBjaGFyID0gQ2hhcmFjdGVyLnF1ZXJ5LmdldF9vcl80MDQoY2lkKQogICAgaWYgbm90IF9jYW5fZGVsZXRlX2NoYXJhY3RlcihjaGFyKToKICAgICAgICBmbGFzaCgiWW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byBkZWxldGUgdGhpcyBjaGFyYWN0ZXIuIiwgImVycm9yIikKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiY2hhcmFjdGVycy5zaGVldCIsIGNpZD1jaWQpKQogICAgY2FtcGFpZ25faWQgPSBjaGFyLmNhbXBhaWduX2lkCiAgICBpc19ucGMgPSBjaGFyLmlzX25wYwogICAgZGIuc2Vzc2lvbi5kZWxldGUoY2hhcikKICAgIGRiLnNlc3Npb24uY29tbWl0KCkKICAgIGZsYXNoKCJDaGFyYWN0ZXIgZGVsZXRlZC4iLCAib2siKQogICAgaWYgY2FtcGFpZ25faWQ6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImNhbXBhaWducy52aWV3IiwgY2lkPWNhbXBhaWduX2lkKSkKICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJkbS5kYXNoYm9hcmQiKSBpZiBpc19ucGMgZWxzZSB1cmxfZm9yKCJwbGF5ZXIuZGFzaGJvYXJkIikpCgojIOKUgOKUgOKUgCBBSSBFTkRQT0lOVFMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpAY2hhcmFjdGVyc19icC5wb3N0KCIvYWlfc3RlcCIpCmRlZiBhaV9zdGVwKCk6CiAgICAiIiJBSSBndWlkYW5jZSBmb3IgZWFjaCB3aXphcmQgc3RlcCDigJQgcmV0dXJucyBjb250ZXh0dWFsIGFkdmljZS4iIiIKICAgIGlmIG5vdCBzZXNzaW9uLmdldCgidXNlcl9pZCIpOgogICAgICAgIHJldHVybiBqc29uaWZ5KHsiZXJyb3IiOiAiTm90IGxvZ2dlZCBpbiJ9KSwgNDAxCiAgICBkYXRhID0gcmVxdWVzdC5qc29uIG9yIHt9CiAgICBzdGVwID0gZGF0YS5nZXQoInN0ZXAiLCAiZ2VuZXJhbCIpCiAgICBidWlsZCA9IGRhdGEuZ2V0KCJidWlsZCIsIHt9KQogICAgdXNlcl9tZXNzYWdlID0gZGF0YS5nZXQoIm1lc3NhZ2UiLCBmIlRlbGwgbWUgYWJvdXQgdGhlIHtzdGVwfSBzdGVwLiIpCgogICAgdXJsID0gY3VycmVudF9hcHAuY29uZmlnWyJPTExBTUFfVVJMIl0KICAgIG1vZGVsID0gY3VycmVudF9hcHAuY29uZmlnWyJPTExBTUFfTU9ERUwiXQogICAgbWVzc2FnZXMgPSBzdGVwX3Byb21wdChzdGVwLCBidWlsZCwgdXNlcl9tZXNzYWdlKQogICAgcmVwbHkgPSBvbGxhbWFfY2hhdCh1cmwsIG1vZGVsLCBtZXNzYWdlcykKICAgIHJldHVybiBqc29uaWZ5KHsicmVwbHkiOiByZXBseX0pCgpAY2hhcmFjdGVyc19icC5wb3N0KCIvYWlfbnBjIikKZGVmIGFpX25wYygpOgogICAgIiIiQUkgZ2VuZXJhdGVzIGEgZnVsbCBOUEMgc3RhdCBibG9jayBmcm9tIGEgZGVzY3JpcHRpb24uIiIiCiAgICBpZiBub3Qgc2Vzc2lvbi5nZXQoInVzZXJfaWQiKToKICAgICAgICByZXR1cm4ganNvbmlmeSh7ImVycm9yIjogIk5vdCBsb2dnZWQgaW4ifSksIDQwMQogICAgcm9sZSA9IHNlc3Npb24uZ2V0KCJyb2xlIikKICAgIGlmIHJvbGUgbm90IGluICgiZG0iLCAiYWRtaW4iKToKICAgICAgICByZXR1cm4ganNvbmlmeSh7ImVycm9yIjogIkRNIGFjY2VzcyByZXF1aXJlZCJ9KSwgNDAzCgogICAgZGF0YSA9IHJlcXVlc3QuanNvbiBvciB7fQogICAgZGVzY3JpcHRpb24gPSAoZGF0YS5nZXQoImRlc2NyaXB0aW9uIikgb3IgIiIpLnN0cmlwKCkKICAgIGlmIG5vdCBkZXNjcmlwdGlvbjoKICAgICAgICByZXR1cm4ganNvbmlmeSh7ImVycm9yIjogIkRlc2NyaXB0aW9uIHJlcXVpcmVkIn0pLCA0MDAKCiAgICB1cmwgPSBjdXJyZW50X2FwcC5jb25maWdbIk9MTEFNQV9VUkwiXQogICAgbW9kZWwgPSBjdXJyZW50X2FwcC5jb25maWdbIk9MTEFNQV9NT0RFTCJdCiAgICByZXN1bHQgPSBnZW5lcmF0ZV9ucGModXJsLCBtb2RlbCwgZGVzY3JpcHRpb24pCgogICAgaWYgaXNpbnN0YW5jZShyZXN1bHQsIGRpY3QpOgogICAgICAgIHJldHVybiBqc29uaWZ5KHsib2siOiBUcnVlLCAibnBjIjogcmVzdWx0fSkKICAgIHJldHVybiBqc29uaWZ5KHsib2siOiBGYWxzZSwgImVycm9yIjogcmVzdWx0fSksIDUwMAo="
[System.IO.File]::WriteAllBytes("$root\routes\characters.py", [System.Convert]::FromBase64String($b))

# templates\base.html
$b = "PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CiAgPHRpdGxlPnslIGJsb2NrIHRpdGxlICV9Q2hhcmFjdGVyRm9yZ2V7JSBlbmRibG9jayAlfTwvdGl0bGU+CiAgPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tIj4KICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUNpbnplbDp3Z2h0QDQwMDs2MDA7NzAwJmZhbWlseT1Dcmltc29uK1RleHQ6aXRhbCx3Z2h0QDAsNDAwOzAsNjAwOzEsNDAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9zdGF0aWMvY3NzL2FwcC5jc3MiPgo8L2hlYWQ+Cjxib2R5PgogIHslIGlmIHNlc3Npb24uZ2V0KCd1c2VyX2lkJykgJX0KICA8bmF2IGNsYXNzPSJ0b3BuYXYiPgogICAgPGRpdiBjbGFzcz0ibmF2LWJyYW5kIj7impQgQ2hhcmFjdGVyRm9yZ2U8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im5hdi1saW5rcyI+CiAgICAgIHslIGlmIHNlc3Npb24uZ2V0KCdyb2xlJykgPT0gJ2FkbWluJyAlfQogICAgICAgIDxhIGhyZWY9Ii9hZG1pbi8iPuKamSBBZG1pbjwvYT4KICAgICAgICA8YSBocmVmPSIvZG0vIj7wn46yIENhbXBhaWduczwvYT4KICAgICAgICA8YSBocmVmPSIvcGxheWVyL2NhbXBhaWducy9icm93c2UiPkJyb3dzZTwvYT4KICAgICAgICA8YSBocmVmPSIvdGVtcGxhdGVzLyI+8J+TiyBUZW1wbGF0ZXM8L2E+CiAgICAgIHslIGVsaWYgc2Vzc2lvbi5nZXQoJ3JvbGUnKSA9PSAnZG0nICV9CiAgICAgICAgPGEgaHJlZj0iL2RtLyI+8J+OsiBNeSBDYW1wYWlnbnM8L2E+CiAgICAgICAgPGEgaHJlZj0iL3BsYXllci9jYW1wYWlnbnMvYnJvd3NlIj5Ccm93c2U8L2E+CiAgICAgICAgPGEgaHJlZj0iL3RlbXBsYXRlcy8iPvCfk4sgVGVtcGxhdGVzPC9hPgogICAgICB7JSBlbHNlICV9CiAgICAgICAgPGEgaHJlZj0iL3BsYXllci8iPuKalCBNeSBDaGFyYWN0ZXJzPC9hPgogICAgICAgIDxhIGhyZWY9Ii9wbGF5ZXIvY2FtcGFpZ25zL2Jyb3dzZSI+QnJvd3NlPC9hPgogICAgICAgIDxhIGhyZWY9Ii90ZW1wbGF0ZXMvIj7wn5OLIFRlbXBsYXRlczwvYT4KICAgICAgeyUgZW5kaWYgJX0KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0ibmF2LXVzZXIiPgogICAgICA8c3BhbiBjbGFzcz0iYmFkZ2UgYmFkZ2Ute3sgc2Vzc2lvbi5nZXQoJ3JvbGUnKSB9fSI+e3sgc2Vzc2lvbi5nZXQoJ3JvbGUnLCAnJykudXBwZXIoKSB9fTwvc3Bhbj4KICAgICAgPHNwYW4gY2xhc3M9Im5hdi1uYW1lIj57eyBzZXNzaW9uLmdldCgnZGlzcGxheV9uYW1lJywgc2Vzc2lvbi5nZXQoJ3VzZXJuYW1lJywgJycpKSB9fTwvc3Bhbj4KICAgICAgPGEgaHJlZj0iL2F1dGgvbG9nb3V0IiBjbGFzcz0iYnRuLWxvZ291dCI+TG9nb3V0PC9hPgogICAgPC9kaXY+CiAgPC9uYXY+CiAgeyUgZW5kaWYgJX0KCiAgPGRpdiBjbGFzcz0icGFnZS13cmFwIj4KICAgIHslIHdpdGggbXNncyA9IGdldF9mbGFzaGVkX21lc3NhZ2VzKHdpdGhfY2F0ZWdvcmllcz10cnVlKSAlfQogICAgICB7JSBpZiBtc2dzICV9CiAgICAgICAgPGRpdiBjbGFzcz0iZmxhc2gtd3JhcCI+CiAgICAgICAgICB7JSBmb3IgY2F0LCBtc2cgaW4gbXNncyAlfQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGFzaCBmbGFzaC17eyBjYXQgfX0iPnt7IG1zZyB9fTwvZGl2PgogICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICB7JSBlbmR3aXRoICV9CgogICAgeyUgYmxvY2sgY29udGVudCAlfXslIGVuZGJsb2NrICV9CiAgPC9kaXY+CgogIDxzY3JpcHQgc3JjPSIvc3RhdGljL2pzL2FwcC5qcyI+PC9zY3JpcHQ+CiAgeyUgYmxvY2sgc2NyaXB0cyAlfXslIGVuZGJsb2NrICV9CjwvYm9keT4KPC9odG1sPgo="
[System.IO.File]::WriteAllBytes("$root\templates\base.html", [System.Convert]::FromBase64String($b))

# templates\characters\sheet.html
$b = "eyUgZXh0ZW5kcyAiYmFzZS5odG1sIiAlfQp7JSBibG9jayB0aXRsZSAlfXt7IGNoYXIubmFtZSB9fSDigJQgQ2hhcmFjdGVyRm9yZ2V7JSBlbmRibG9jayAlfQp7JSBibG9jayBjb250ZW50ICV9CjxkaXYgc3R5bGU9Im1heC13aWR0aDoxMDAwcHgiPgoKPCEtLSBIZWFkZXIgLS0+CjxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4O2ZsZXgtd3JhcDp3cmFwO2dhcDoxMnB4Ij4KICA8ZGl2PgogICAgPGgxIHN0eWxlPSJtYXJnaW4tYm90dG9tOjJweCI+e3sgY2hhci5uYW1lIH19PC9oMT4KICAgIDxkaXYgc3R5bGU9ImNvbG9yOnZhcigtLXRleHQtZGltKTtmb250LXN0eWxlOml0YWxpYztmb250LXNpemU6MTZweCI+CiAgICAgIHt7IGRhdGEucmFjZSB9fSDCtyB7eyBkYXRhLmNoYXJfY2xhc3MgfX17JSBpZiBkYXRhLnN1YmNsYXNzICV9ICh7eyBkYXRhLnN1YmNsYXNzIH19KXslIGVuZGlmICV9IMK3IExldmVsIHt7IGRhdGEubGV2ZWwgfX0KICAgICAgwrcge3sgZGF0YS5iYWNrZ3JvdW5kIG9yICfigJQnIH19IMK3IHt7IGRhdGEuYWxpZ25tZW50IG9yICfigJQnIH19CiAgICAgIHslIGlmIGNoYXIuaXNfbnBjICV9PHNwYW4gY2xhc3M9Im5wYy1iYWRnZSIgc3R5bGU9Im1hcmdpbi1sZWZ0OjhweCI+TlBDPC9zcGFuPnslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJmbGV4IiBzdHlsZT0iZ2FwOjhweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1zZWxmOmZsZXgtc3RhcnQiPgogICAgeyUgaWYgY2hhci5jYW1wYWlnbl9pZCAlfQogICAgICA8YSBocmVmPSIvY2FtcGFpZ25zL3t7IGNoYXIuY2FtcGFpZ25faWQgfX0iIGNsYXNzPSJidG4gYnRuLWdob3N0IGJ0bi1zbSI+4oaQIENhbXBhaWduPC9hPgogICAgeyUgZWxpZiBjaGFyLmlzX25wYyAlfQogICAgICA8YSBocmVmPSIvZG0vIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBETSBEYXNoYm9hcmQ8L2E+CiAgICB7JSBlbHNlICV9CiAgICAgIDxhIGhyZWY9Ii9wbGF5ZXIvIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBNeSBDaGFyYWN0ZXJzPC9hPgogICAgeyUgZW5kaWYgJX0KICAgIHslIGlmIGNhbl9kZWxldGUgJX0KICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGJ0bi1zbSIgb25jbGljaz0ib3Blbk1vZGFsKCdtb2RhbC1zYXZlLXRlbXBsYXRlJykiPvCfkr4gU2F2ZSBhcyBUZW1wbGF0ZTwvYnV0dG9uPgogICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ii9jaGFyYWN0ZXJzL3t7IGNoYXIuaWQgfX0vZGVsZXRlIiBjbGFzcz0iY29uZmlybS1hY3Rpb24iIGRhdGEtY29uZmlybT0iRGVsZXRlIHt7IGNoYXIubmFtZSB9fT8gVGhpcyBjYW5ub3QgYmUgdW5kb25lLiI+CiAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIj5EZWxldGU8L2J1dHRvbj4KICAgIDwvZm9ybT4KICAgIHslIGVuZGlmICV9CiAgPC9kaXY+CjwvZGl2PgoKPCEtLSBSb3cgMTogUHJvZmljaWVuY3kgKyBJbnNwaXJhdGlvbiArIENvcmUgQ29tYmF0IC0tPgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpbGwsbWlubWF4KDExMHB4LDFmcikpO2dhcDoxMHB4O21hcmdpbi1ib3R0b206MTRweCI+CiAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUiPgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtbGFiZWwiPlByb2ZpY2llbmN5PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZS12YWwiPit7eyBkYXRhLnByb2ZpY2llbmN5X2JvbnVzIH19PC9kaXY+CiAgPC9kaXY+CiAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUiPgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtbGFiZWwiPkFybW9yIENsYXNzPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZS12YWwiPnt7IGRhdGEuYXJtb3JfY2xhc3MgfX08L2Rpdj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZSI+CiAgICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZS1sYWJlbCI+SW5pdGlhdGl2ZTwvZGl2PgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtdmFsIj57eyAnKycgaWYgZGF0YS5kZXhfbW9kID49IDAgZWxzZSAnJyB9fXt7IGRhdGEuZGV4X21vZCB9fTwvZGl2PgogIDwvZGl2PgogIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlIj4KICAgIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlLWxhYmVsIj5TcGVlZDwvZGl2PgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtdmFsIj57eyBkYXRhLnNwZWVkIH19ZnQ8L2Rpdj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZSI+CiAgICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZS1sYWJlbCI+SGl0IERpY2U8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlLXZhbCIgc3R5bGU9ImZvbnQtc2l6ZToxNnB4Ij57eyBkYXRhLmhpdF9kaWNlIG9yICfigJQnIH19PC9kaXY+CiAgPC9kaXY+CiAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUiPgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtbGFiZWwiPlhQPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZS12YWwiIHN0eWxlPSJmb250LXNpemU6MTZweCI+e3sgZGF0YS5leHBlcmllbmNlX3BvaW50cyB9fTwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gSFAgQmxvY2sgLS0+CjxkaXYgY2xhc3M9InBhbmVsIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNHB4O3BhZGRpbmc6MTRweCI+CiAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyIDFmcjtnYXA6MTZweDthbGlnbi1pdGVtczpjZW50ZXIiPgogICAgPGRpdj4KICAgICAgPGRpdiBzdHlsZT0iZm9udC1mYW1pbHk6J0NpbnplbCcsc2VyaWY7Zm9udC1zaXplOjExcHg7Y29sb3I6dmFyKC0tdGV4dC1kaW0pO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzowLjVweDttYXJnaW4tYm90dG9tOjZweCI+SGl0IFBvaW50czwvZGl2PgogICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MjhweDtmb250LXdlaWdodDo3MDA7Y29sb3I6dmFyKC0tdGV4dC1icmlnaHQpIj57eyBkYXRhLmN1cnJlbnRfaHAgfX0gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxNnB4O2NvbG9yOnZhcigtLXRleHQtZGltKSI+LyB7eyBkYXRhLm1heF9ocCB9fTwvc3Bhbj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iaHAtYmFyLXRyYWNrIiBzdHlsZT0iaGVpZ2h0OjhweDttYXJnaW4tdG9wOjZweCI+PGRpdiBjbGFzcz0iaHAtYmFyLWZpbGwiIGRhdGEtY3VyPSJ7eyBkYXRhLmN1cnJlbnRfaHAgfX0iIGRhdGEtbWF4PSJ7eyBkYXRhLm1heF9ocCB9fSI+PC9kaXY+PC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyIj4KICAgICAgPGRpdiBzdHlsZT0iZm9udC1mYW1pbHk6J0NpbnplbCcsc2VyaWY7Zm9udC1zaXplOjExcHg7Y29sb3I6dmFyKC0tdGV4dC1kaW0pO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzowLjVweDttYXJnaW4tYm90dG9tOjZweCI+VGVtcCBIUDwvZGl2PgogICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MjRweDtmb250LXdlaWdodDo3MDA7Y29sb3I6e3sgJ3ZhcigtLWluayknIGlmIGRhdGEudGVtcF9ocCBlbHNlICd2YXIoLS10ZXh0LWRpbSknIH19Ij57eyBkYXRhLnRlbXBfaHAgb3IgJ+KAlCcgfX08L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCI+CiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtZmFtaWx5OidDaW56ZWwnLHNlcmlmO2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLXRleHQtZGltKTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPkRlYXRoIFNhdmVzPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6NHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZCI+CiAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOnZhcigtLWdyZWVuLWxpZ2h0KSI+4piQIOKYkCDimJA8L3NwYW4+CiAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOnZhcigtLXJlZC1saWdodCk7bWFyZ2luLWxlZnQ6OHB4Ij7imJAg4piQIOKYkDwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLXRleHQtZGltKTttYXJnaW4tdG9wOjJweCI+U3VjY2Vzc2VzIC8gRmFpbHVyZXM8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gTWFpbiBTaGVldDogMyBjb2x1bW5zIC0tPgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjE4MHB4IDFmciAxZnI7Z2FwOjE0cHg7YWxpZ24taXRlbXM6c3RhcnQiPgoKPCEtLSBDb2wgMTogQWJpbGl0eSBTY29yZXMgKyBTYXZlcyAtLT4KPGRpdj4KICB7JSBzZXQgYWJpbGl0eV9kYXRhID0gWwogICAgKCdTdHJlbmd0aCcsJ3N0cl9tb2QnLCdzdHJlbmd0aCcpLAogICAgKCdEZXh0ZXJpdHknLCdkZXhfbW9kJywnZGV4dGVyaXR5JyksCiAgICAoJ0NvbnN0aXR1dGlvbicsJ2Nvbl9tb2QnLCdjb25zdGl0dXRpb24nKSwKICAgICgnSW50ZWxsaWdlbmNlJywnaW50X21vZCcsJ2ludGVsbGlnZW5jZScpLAogICAgKCdXaXNkb20nLCd3aXNfbW9kJywnd2lzZG9tJyksCiAgICAoJ0NoYXJpc21hJywnY2hhX21vZCcsJ2NoYXJpc21hJykKICBdICV9CgogIHslIGZvciBsYWJlbCwgbW9kX2tleSwgc3RhdF9rZXkgaW4gYWJpbGl0eV9kYXRhICV9CiAgeyUgc2V0IGlzX3NhdmUgPSBkYXRhLnNhdmluZ190aHJvd3MuZ2V0KGxhYmVsLCBGYWxzZSkgJX0KICA8ZGl2IGNsYXNzPSJhYmlsaXR5LWJsb2NrIj4KICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktYmxvY2stbmFtZSI+e3sgbGFiZWxbOjNdLnVwcGVyKCkgfX08L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktYmxvY2stc2NvcmUiPnt7IGRhdGFbc3RhdF9rZXldIH19PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJhYmlsaXR5LWJsb2NrLW1vZCI+e3sgJysnIGlmIGRhdGFbbW9kX2tleV0gPj0gMCBlbHNlICcnIH19e3sgZGF0YVttb2Rfa2V5XSB9fTwvZGl2PgogICAgPGRpdiBjbGFzcz0ic2F2ZS1yb3ciPgogICAgICA8c3BhbiBjbGFzcz0icHJvZi1kb3Qge3sgJ2ZpbGxlZCcgaWYgaXNfc2F2ZSBlbHNlICcnIH19Ij48L3NwYW4+CiAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS10ZXh0LWRpbSkiPlNhdmUge3sgJysnIGlmIGRhdGFbbW9kX2tleV0gKyAoZGF0YS5wcm9maWNpZW5jeV9ib251cyBpZiBpc19zYXZlIGVsc2UgMCkgPj0gMCBlbHNlICcnIH19e3sgZGF0YVttb2Rfa2V5XSArIChkYXRhLnByb2ZpY2llbmN5X2JvbnVzIGlmIGlzX3NhdmUgZWxzZSAwKSB9fTwvc3Bhbj4KICAgIDwvZGl2PgogIDwvZGl2PgogIHslIGVuZGZvciAlfQo8L2Rpdj4KCjwhLS0gQ29sIDI6IFNraWxscyAtLT4KPGRpdiBjbGFzcz0icGFuZWwiIHN0eWxlPSJwYWRkaW5nOjE0cHgiPgogIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij5Ta2lsbHM8L2gzPgogIHslIHNldCBza2lsbF9tYXAgPSBbCiAgICAoJ0Fjcm9iYXRpY3MnLCdkZXhfbW9kJyksKCdBbmltYWwgSGFuZGxpbmcnLCd3aXNfbW9kJyksKCdBcmNhbmEnLCdpbnRfbW9kJyksCiAgICAoJ0F0aGxldGljcycsJ3N0cl9tb2QnKSwoJ0RlY2VwdGlvbicsJ2NoYV9tb2QnKSwoJ0hpc3RvcnknLCdpbnRfbW9kJyksCiAgICAoJ0luc2lnaHQnLCd3aXNfbW9kJyksKCdJbnRpbWlkYXRpb24nLCdjaGFfbW9kJyksKCdJbnZlc3RpZ2F0aW9uJywnaW50X21vZCcpLAogICAgKCdNZWRpY2luZScsJ3dpc19tb2QnKSwoJ05hdHVyZScsJ2ludF9tb2QnKSwoJ1BlcmNlcHRpb24nLCd3aXNfbW9kJyksCiAgICAoJ1BlcmZvcm1hbmNlJywnY2hhX21vZCcpLCgnUGVyc3Vhc2lvbicsJ2NoYV9tb2QnKSwoJ1JlbGlnaW9uJywnaW50X21vZCcpLAogICAgKCdTbGVpZ2h0IG9mIEhhbmQnLCdkZXhfbW9kJyksKCdTdGVhbHRoJywnZGV4X21vZCcpLCgnU3Vydml2YWwnLCd3aXNfbW9kJykKICBdICV9CiAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjEzcHgiPgogIHslIGZvciBza2lsbCwgbW9kX2tleSBpbiBza2lsbF9tYXAgJX0KICB7JSBzZXQgaXNfcHJvZiA9IGRhdGEuc2tpbGxzLmdldChza2lsbCwgRmFsc2UpICV9CiAgeyUgc2V0IHRvdGFsID0gZGF0YVttb2Rfa2V5XSArIChkYXRhLnByb2ZpY2llbmN5X2JvbnVzIGlmIGlzX3Byb2YgZWxzZSAwKSAlfQogIDxkaXYgY2xhc3M9InNraWxsLXJvdyB7eyAnc2tpbGwtcHJvZicgaWYgaXNfcHJvZiBlbHNlICcnIH19Ij4KICAgIDxzcGFuIGNsYXNzPSJwcm9mLWRvdCB7eyAnZmlsbGVkJyBpZiBpc19wcm9mIGVsc2UgJycgfX0iPjwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJza2lsbC1yb3ctbW9kIj57eyAnKycgaWYgdG90YWwgPj0gMCBlbHNlICcnIH19e3sgdG90YWwgfX08L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0ic2tpbGwtcm93LW5hbWUiPnt7IHNraWxsIH19PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InNraWxsLXJvdy1hYmlsaXR5Ij4oe3sgbW9kX2tleVs6M10udXBwZXIoKSB9fSk8L3NwYW4+CiAgPC9kaXY+CiAgeyUgZW5kZm9yICV9CiAgPC9kaXY+CgogIDwhLS0gUGFzc2l2ZSBQZXJjZXB0aW9uIC0tPgogIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTJweDtwYWRkaW5nLXRvcDoxMHB4O2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWJvcmRlcikiPgogICAgeyUgc2V0IHBlcmNfcHJvZiA9IGRhdGEuc2tpbGxzLmdldCgnUGVyY2VwdGlvbicsIEZhbHNlKSAlfQogICAgeyUgc2V0IHBhc3NpdmUgPSAxMCArIGRhdGEud2lzX21vZCArIChkYXRhLnByb2ZpY2llbmN5X2JvbnVzIGlmIHBlcmNfcHJvZiBlbHNlIDApICV9CiAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTNweDtjb2xvcjp2YXIoLS10ZXh0LWRpbSkiPlBhc3NpdmUgUGVyY2VwdGlvbjogPHN0cm9uZyBzdHlsZT0iY29sb3I6dmFyKC0tdGV4dC1icmlnaHQpIj57eyBwYXNzaXZlIH19PC9zdHJvbmc+PC9kaXY+CiAgPC9kaXY+CjwvZGl2PgoKPCEtLSBDb2wgMzogRmVhdHVyZXMsIEVxdWlwbWVudCwgUGVyc29uYWxpdHkgLS0+CjxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE0cHgiPgoKICB7JSBpZiBkYXRhLmZlYXR1cmVzICV9CiAgPGRpdiBjbGFzcz0icGFuZWwiIHN0eWxlPSJwYWRkaW5nOjE0cHgiPgogICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHgiPkZlYXR1cmVzICYgVHJhaXRzPC9oMz4KICAgIDxkaXY+CiAgICAgIHslIGZvciBmZWF0IGluIGRhdGEuZmVhdHVyZXMgJX0KICAgICAgICA8c3BhbiBjbGFzcz0iZmVhdHVyZS10YWciPnt7IGZlYXQgfX08L3NwYW4+CiAgICAgIHslIGVuZGZvciAlfQogICAgPC9kaXY+CiAgPC9kaXY+CiAgeyUgZW5kaWYgJX0KCiAgeyUgaWYgZGF0YS5lcXVpcG1lbnQgJX0KICA8ZGl2IGNsYXNzPSJwYW5lbCIgc3R5bGU9InBhZGRpbmc6MTRweCI+CiAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206OHB4Ij5FcXVpcG1lbnQ8L2gzPgogICAgeyUgZm9yIGl0ZW0gaW4gZGF0YS5lcXVpcG1lbnQgJX0KICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjEzcHg7cGFkZGluZzozcHggMDtib3JkZXItYm90dG9tOjFweCBzb2xpZCByZ2JhKDQyLDQ2LDY4LDAuNSk7Y29sb3I6dmFyKC0tdGV4dCkiPnt7IGl0ZW0gfX08L2Rpdj4KICAgIHslIGVuZGZvciAlfQogIDwvZGl2PgogIHslIGVuZGlmICV9CgogIDwhLS0gUGVyc29uYWxpdHkgYmxvY2sgLS0+CiAgeyUgc2V0IHRyYWl0cyA9IGRhdGEudHJhaXRzICV9CiAgeyUgaWYgdHJhaXRzLmdldCgncGVyc29uYWxpdHknKSBvciB0cmFpdHMuZ2V0KCdpZGVhbCcpIG9yIHRyYWl0cy5nZXQoJ2JvbmQnKSBvciB0cmFpdHMuZ2V0KCdmbGF3JykgJX0KICA8ZGl2IGNsYXNzPSJwYW5lbCIgc3R5bGU9InBhZGRpbmc6MTRweCI+CiAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+UGVyc29uYWxpdHk8L2gzPgogICAgeyUgaWYgdHJhaXRzLmdldCgncGVyc29uYWxpdHknKSAlfQogICAgPGRpdiBjbGFzcz0idHJhaXQtYmxvY2siPjxkaXYgY2xhc3M9InRyYWl0LWxhYmVsIj5QZXJzb25hbGl0eSBUcmFpdDwvZGl2PjxkaXYgY2xhc3M9InRyYWl0LXRleHQiPnt7IHRyYWl0cy5wZXJzb25hbGl0eSB9fTwvZGl2PjwvZGl2PgogICAgeyUgZW5kaWYgJX0KICAgIHslIGlmIHRyYWl0cy5nZXQoJ2lkZWFsJykgJX0KICAgIDxkaXYgY2xhc3M9InRyYWl0LWJsb2NrIj48ZGl2IGNsYXNzPSJ0cmFpdC1sYWJlbCI+SWRlYWw8L2Rpdj48ZGl2IGNsYXNzPSJ0cmFpdC10ZXh0Ij57eyB0cmFpdHMuaWRlYWwgfX08L2Rpdj48L2Rpdj4KICAgIHslIGVuZGlmICV9CiAgICB7JSBpZiB0cmFpdHMuZ2V0KCdib25kJykgJX0KICAgIDxkaXYgY2xhc3M9InRyYWl0LWJsb2NrIj48ZGl2IGNsYXNzPSJ0cmFpdC1sYWJlbCI+Qm9uZDwvZGl2PjxkaXYgY2xhc3M9InRyYWl0LXRleHQiPnt7IHRyYWl0cy5ib25kIH19PC9kaXY+PC9kaXY+CiAgICB7JSBlbmRpZiAlfQogICAgeyUgaWYgdHJhaXRzLmdldCgnZmxhdycpICV9CiAgICA8ZGl2IGNsYXNzPSJ0cmFpdC1ibG9jayI+PGRpdiBjbGFzcz0idHJhaXQtbGFiZWwiPkZsYXc8L2Rpdj48ZGl2IGNsYXNzPSJ0cmFpdC10ZXh0Ij57eyB0cmFpdHMuZmxhdyB9fTwvZGl2PjwvZGl2PgogICAgeyUgZW5kaWYgJX0KICA8L2Rpdj4KICB7JSBlbmRpZiAlfQoKICB7JSBpZiBkYXRhLm5vdGVzICV9CiAgPGRpdiBjbGFzcz0icGFuZWwiIHN0eWxlPSJwYWRkaW5nOjE0cHgiPgogICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOjhweCI+Tm90ZXM8L2gzPgogICAgPHAgc3R5bGU9ImZvbnQtc2l6ZToxNHB4O2ZvbnQtc3R5bGU6aXRhbGljO2NvbG9yOnZhcigtLXRleHQpO3doaXRlLXNwYWNlOnByZS13cmFwIj57eyBkYXRhLm5vdGVzIH19PC9wPgogIDwvZGl2PgogIHslIGVuZGlmICV9Cgo8L2Rpdj4KPC9kaXY+PCEtLSBlbmQgMy1jb2wgZ3JpZCAtLT4KCgo8IS0tIFNhdmUgYXMgVGVtcGxhdGUgTW9kYWwgLS0+CjxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiIGlkPSJtb2RhbC1zYXZlLXRlbXBsYXRlIj4KICA8ZGl2IGNsYXNzPSJtb2RhbCIgc3R5bGU9Im1heC13aWR0aDo0NDBweCI+CiAgICA8YnV0dG9uIGNsYXNzPSJtb2RhbC1jbG9zZSIgb25jbGljaz0iY2xvc2VNb2RhbCgnbW9kYWwtc2F2ZS10ZW1wbGF0ZScpIj7inJU8L2J1dHRvbj4KICAgIDxoMj7wn5K+IFNhdmUgYXMgVGVtcGxhdGU8L2gyPgogICAgPHAgY2xhc3M9InRleHQtZGltIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4Ij5TYXZlIHRoaXMgYnVpbGQgc28geW91IGNhbiBsb2FkIGl0IGluc3RhbnRseSBuZXh0IHRpbWUuIE9ubHkgdGhlIGJ1aWxkIGlzIHNhdmVkIOKAlCBub3QgdGhlIGNoYXJhY3RlciBuYW1lIG9yIGNhbXBhaWduLjwvcD4KICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIvdGVtcGxhdGVzL3NhdmVfZnJvbV9jaGFyL3t7IGNoYXIuaWQgfX0iPgogICAgICA8bGFiZWw+VGVtcGxhdGUgTmFtZSA8c3BhbiBzdHlsZT0iY29sb3I6dmFyKC0tcmVkLWxpZ2h0KSI+Kjwvc3Bhbj48L2xhYmVsPgogICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idGVtcGxhdGVfbmFtZSIgcGxhY2Vob2xkZXI9J2UuZy4gIkRleCBGaWdodGVyIEJ1aWxkIiBvciAiR29ibGluIFNoYW1hbiBDUjIiJyByZXF1aXJlZD4KICAgICAgPGxhYmVsPkRlc2NyaXB0aW9uIDxzcGFuIHN0eWxlPSJjb2xvcjp2YXIoLS10ZXh0LWRpbSk7Zm9udC1zaXplOjEycHgiPihvcHRpb25hbCk8L3NwYW4+PC9sYWJlbD4KICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InRlbXBsYXRlX2Rlc2NyaXB0aW9uIiBwbGFjZWhvbGRlcj0iV2hhdCBtYWtlcyB0aGlzIGJ1aWxkIHNwZWNpYWw/Ij4KICAgICAgPGRpdiBjbGFzcz0iZmxleCIgc3R5bGU9ImdhcDo4cHg7bWFyZ2luLXRvcDoxNnB4Ij4KICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9ImZsZXg6MSI+U2F2ZSBUZW1wbGF0ZTwvYnV0dG9uPgogICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCIgb25jbGljaz0iY2xvc2VNb2RhbCgnbW9kYWwtc2F2ZS10ZW1wbGF0ZScpIj5DYW5jZWw8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICA8L2Zvcm0+CiAgPC9kaXY+CjwvZGl2PgoKPC9kaXY+Cgo8c3R5bGU+Ci5zdGF0LWJ1YmJsZSB7CiAgYmFja2dyb3VuZDogdmFyKC0tYmcyKTsKICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItZ29sZCk7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIHBhZGRpbmc6IDEwcHggOHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQouc3RhdC1idWJibGUtbGFiZWwgeyBmb250LXNpemU6IDEwcHg7IGZvbnQtZmFtaWx5OiAnQ2luemVsJywgc2VyaWY7IGNvbG9yOiB2YXIoLS10ZXh0LWRpbSk7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IGxldHRlci1zcGFjaW5nOiAwLjVweDsgbWFyZ2luLWJvdHRvbTogNHB4OyB9Ci5zdGF0LWJ1YmJsZS12YWwgeyBmb250LXNpemU6IDIycHg7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiB2YXIoLS10ZXh0LWJyaWdodCk7IGZvbnQtZmFtaWx5OiAnQ2luemVsJywgc2VyaWY7IH0KCi5hYmlsaXR5LWJsb2NrIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZzIpOwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nb2xkKTsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgcGFkZGluZzogOHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXJnaW4tYm90dG9tOiA4cHg7Cn0KLmFiaWxpdHktYmxvY2stbmFtZSB7IGZvbnQtc2l6ZTogMTBweDsgZm9udC1mYW1pbHk6ICdDaW56ZWwnLCBzZXJpZjsgY29sb3I6IHZhcigtLXRleHQtZGltKTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyB9Ci5hYmlsaXR5LWJsb2NrLXNjb3JlIHsgZm9udC1zaXplOiAyOHB4OyBmb250LXdlaWdodDogNzAwOyBjb2xvcjogdmFyKC0tdGV4dC1icmlnaHQpOyBsaW5lLWhlaWdodDogMS4xOyB9Ci5hYmlsaXR5LWJsb2NrLW1vZCB7IGZvbnQtc2l6ZTogMThweDsgY29sb3I6IHZhcigtLWdvbGQpOyBmb250LXdlaWdodDogNjAwOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZzMpOyBib3JkZXItcmFkaXVzOiA1MCU7IHdpZHRoOiAzNnB4OyBoZWlnaHQ6IDM2cHg7IGxpbmUtaGVpZ2h0OiAzNnB4OyBtYXJnaW46IDRweCBhdXRvOyB9Ci5zYXZlLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBnYXA6IDRweDsgbWFyZ2luLXRvcDogNHB4OyB9CgoucHJvZi1kb3QgeyB3aWR0aDogMTBweDsgaGVpZ2h0OiAxMHB4OyBib3JkZXItcmFkaXVzOiA1MCU7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nb2xkKTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBmbGV4LXNocmluazogMDsgfQoucHJvZi1kb3QuZmlsbGVkIHsgYmFja2dyb3VuZDogdmFyKC0tZ29sZCk7IGJvcmRlci1jb2xvcjogdmFyKC0tZ29sZCk7IH0KCi5za2lsbC1yb3cgeyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDZweDsgcGFkZGluZzogM3B4IDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDQyLDQ2LDY4LDAuNCk7IH0KLnNraWxsLXJvdy5za2lsbC1wcm9mIC5za2lsbC1yb3ctbmFtZSB7IGNvbG9yOiB2YXIoLS10ZXh0LWJyaWdodCk7IH0KLnNraWxsLXJvdy1tb2QgeyB3aWR0aDogMjhweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiB2YXIoLS10ZXh0LWJyaWdodCk7IGZvbnQtc2l6ZTogMTJweDsgfQouc2tpbGwtcm93LW5hbWUgeyBmbGV4OiAxOyBjb2xvcjogdmFyKC0tdGV4dCk7IH0KLnNraWxsLXJvdy1hYmlsaXR5IHsgZm9udC1zaXplOiAxMXB4OyBjb2xvcjogdmFyKC0tdGV4dC1kaW0pOyB9CgoudHJhaXQtYmxvY2sgeyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9Ci50cmFpdC1sYWJlbCB7IGZvbnQtZmFtaWx5OiAnQ2luemVsJywgc2VyaWY7IGZvbnQtc2l6ZTogMTBweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyBjb2xvcjogdmFyKC0tZ29sZCk7IG1hcmdpbi1ib3R0b206IDNweDsgfQoudHJhaXQtdGV4dCB7IGZvbnQtc2l6ZTogMTNweDsgY29sb3I6IHZhcigtLXRleHQpOyBmb250LXN0eWxlOiBpdGFsaWM7IH0KCkBtZWRpYShtYXgtd2lkdGg6NzAwcHgpIHsKICBkaXZbc3R5bGUqPSJncmlkLXRlbXBsYXRlLWNvbHVtbnM6MTgwcHgiXSB7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyICFpbXBvcnRhbnQ7IH0KfQo8L3N0eWxlPgp7JSBlbmRibG9jayAlfQo="
[System.IO.File]::WriteAllBytes("$root\templates\characters\sheet.html", [System.Convert]::FromBase64String($b))

# templates\characters\wizard.html
$b = "eyUgZXh0ZW5kcyAiYmFzZS5odG1sIiAlfQp7JSBibG9jayB0aXRsZSAlfXt7ICdDcmVhdGUgTlBDJyBpZiBpc19ucGMgZWxzZSAnQ3JlYXRlIENoYXJhY3RlcicgfX0g4oCUIENoYXJhY3RlckZvcmdleyUgZW5kYmxvY2sgJX0KeyUgYmxvY2sgY29udGVudCAlfQo8ZGl2IHN0eWxlPSJtYXgtd2lkdGg6ODYwcHgiPgoKPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4iIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPgogIDxkaXY+CiAgICA8aDE+e3sgJ0NyZWF0ZSBOUEMnIGlmIGlzX25wYyBlbHNlICdCdWlsZCBZb3VyIENoYXJhY3RlcicgfX08L2gxPgogICAgPHAgY2xhc3M9InN1YnRpdGxlIj57eyAnUXVpY2sgTlBDIHZpYSB0aGUgZnVsbCB3aXphcmQuJyBpZiBpc19ucGMgZWxzZSAnR3VpZGVkIGJ5IEFJIOKAlCBhbGwgcnVsZXMgZnJvbSBEJkQgNWUgU1JELicgfX08L3A+CiAgPC9kaXY+CiAgeyUgaWYgY2FtcGFpZ25faWQgJX0KICAgIDxhIGhyZWY9Ii9jYW1wYWlnbnMve3sgY2FtcGFpZ25faWQgfX0iIGNsYXNzPSJidG4gYnRuLWdob3N0IGJ0bi1zbSI+4oaQIENhbXBhaWduPC9hPgogIHslIGVsc2UgJX0KICAgIDxhIGhyZWY9Ii9wbGF5ZXIvIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBEYXNoYm9hcmQ8L2E+CiAgeyUgZW5kaWYgJX0KPC9kaXY+Cgo8IS0tIFN0ZXAgaW5kaWNhdG9yIC0tPgo8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcHMiIGlkPSJzdGVwLW5hdiI+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXN0ZXAgYWN0aXZlIiBkYXRhLXN0ZXA9IjAiPuKRoCBJZGVudGl0eTwvZGl2PgogIDxkaXYgY2xhc3M9IndpemFyZC1zdGVwIiBkYXRhLXN0ZXA9IjEiPuKRoSBSYWNlPC9kaXY+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXN0ZXAiIGRhdGEtc3RlcD0iMiI+4pGiIENsYXNzPC9kaXY+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXN0ZXAiIGRhdGEtc3RlcD0iMyI+4pGjIEJhY2tncm91bmQ8L2Rpdj4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcCIgZGF0YS1zdGVwPSI0Ij7ikaQgQWJpbGl0eSBTY29yZXM8L2Rpdj4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcCIgZGF0YS1zdGVwPSI1Ij7ikaUgUGVyc29uYWxpdHk8L2Rpdj4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcCIgZGF0YS1zdGVwPSI2Ij7ikaYgRmluYWxpemU8L2Rpdj4KPC9kaXY+Cgo8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iL2NoYXJhY3RlcnMvY3JlYXRlIiBpZD0iY2hhci1mb3JtIj4KICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjYW1wYWlnbl9pZCIgdmFsdWU9Int7IGNhbXBhaWduX2lkIG9yICcnIH19Ij4KICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJpc19ucGMiIHZhbHVlPSJ7eyAndHJ1ZScgaWYgaXNfbnBjIGVsc2UgJ2ZhbHNlJyB9fSI+CgogIDwhLS0g4pWQ4pWQIFNURVAgMTogSURFTlRJVFkg4pWQ4pWQIC0tPgogIDxkaXYgY2xhc3M9IndpemFyZC1zZWN0aW9uIiBpZD0ic3RlcC0wIj4KICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDFmcjtnYXA6MjBweDthbGlnbi1pdGVtczpzdGFydCI+CiAgICAgIDxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLWdvbGQiPgogICAgICAgIDxoMj5JZGVudGl0eTwvaDI+CiAgICAgICAgPGxhYmVsPkNoYXJhY3RlciBOYW1lPC9sYWJlbD4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibmFtZSIgaWQ9ImZpZWxkLW5hbWUiIHBsYWNlaG9sZGVyPSJXaGF0IGFyZSB5b3UgY2FsbGVkPyIgcmVxdWlyZWQ+CiAgICAgICAgPGxhYmVsPkxldmVsPC9sYWJlbD4KICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJsZXZlbCIgaWQ9ImZpZWxkLWxldmVsIiB2YWx1ZT0iMSIgbWluPSIxIiBtYXg9IjIwIj4KICAgICAgICA8bGFiZWw+QWxpZ25tZW50PC9sYWJlbD4KICAgICAgICA8c2VsZWN0IG5hbWU9ImFsaWdubWVudCIgaWQ9ImZpZWxkLWFsaWdubWVudCI+CiAgICAgICAgICB7JSBmb3IgYSBpbiBhbGlnbm1lbnRzICV9PG9wdGlvbj57eyBhIH19PC9vcHRpb24+eyUgZW5kZm9yICV9CiAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImdvU3RlcCgxKSI+TmV4dDogUmFjZSDihpI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGlmIG9sbGFtYV9vayAlfQogICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbCI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwtaGVhZGVyIj7wn46yIEFJIER1bmdlb24gTWFzdGVyPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktY2hhdC1ib3giIGlkPSJjaGF0LTAiPgogICAgICAgICAgPGRpdiBjbGFzcz0iYWktbXNnIGRtIj5XZWxjb21lLCBhZHZlbnR1cmVyISBUZWxsIG1lIHdoYXQga2luZCBvZiBjaGFyYWN0ZXIgeW91IHdhbnQgdG8gcGxheSDigJQgYSBjb25jZXB0LCBhIHZpYmUsIGFueXRoaW5nIOKAlCBhbmQgSSdsbCBoZWxwIGd1aWRlIHlvdXIgYnVpbGQgdGhyb3VnaCBlYWNoIHN0ZXAgdXNpbmcgRCZEIDVlIHJ1bGVzLjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtMCIgcGxhY2Vob2xkZXI9IkFzayBhbnl0aGluZyBhYm91dCB5b3VyIGNoYXJhY3RlciBjb25jZXB0Li4uIj4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtIiBvbmNsaWNrPSJhc2tBSSgwLCAnZ2VuZXJhbCcpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCAyOiBSQUNFIOKVkOKVkCAtLT4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc2VjdGlvbiIgaWQ9InN0ZXAtMSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjIwcHg7YWxpZ24taXRlbXM6c3RhcnQiPgogICAgICA8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1nb2xkIj4KICAgICAgICA8aDI+Q2hvb3NlIFJhY2U8L2gyPgogICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1ncmlkIiBpZD0icmFjZS1ncmlkIj4KICAgICAgICAgIHslIGZvciByIGluIHJhY2VzICV9CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtY2FyZCIgZGF0YS1uYW1lPSJ7eyByLm5hbWUgfX0iIG9uY2xpY2s9InNlbGVjdENob2ljZSgncmFjZScsICd7eyByLm5hbWUgfX0nLCB0aGlzKSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1uYW1lIj57eyByLm5hbWUgfX08L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hvaWNlLW1ldGEiPgogICAgICAgICAgICAgIHslIGZvciBzdGF0LCBib251cyBpbiByLmFiaWxpdHlfYm9udXNlcy5pdGVtcygpICV9CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIj4re3sgYm9udXMgfX0ge3sgc3RhdFs6M10udXBwZXIoKSB9fTwvc3Bhbj4KICAgICAgICAgICAgICB7JSBlbmRmb3IgJX0KICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIHNwZWVkIj57eyByLnNwZWVkIH19ZnQ8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtdHJhaXRzIj57eyByLnRyYWl0c1s6Ml0gfCBqb2luKCcgwrcgJykgfX08L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icmFjZSIgaWQ9ImZpZWxkLXJhY2UiIHZhbHVlPSJIdW1hbiI+CiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWdob3N0IiBvbmNsaWNrPSJnb1N0ZXAoMCkiPuKGkCBCYWNrPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0iZ29TdGVwKDIpIj5OZXh0OiBDbGFzcyDihpI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGlmIG9sbGFtYV9vayAlfQogICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbCI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwtaGVhZGVyIj7wn46yIEFJIOKAlCBSYWNlIEFkdmlzb3I8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1jaGF0LWJveCIgaWQ9ImNoYXQtMSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhaS1tc2cgZG0iPkNsaWNrIGEgcmFjZSBhbmQgSSdsbCBleHBsYWluIGl0cyB0cmFpdHMgYW5kIGhvdyBpdCBzeW5lcmdpemVzIHdpdGggZGlmZmVyZW50IGNsYXNzZXMuIE9yIGFzayBtZSB3aGljaCByYWNlIGZpdHMgeW91ciBjaGFyYWN0ZXIgY29uY2VwdC48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1pbnB1dC1yb3ciPgogICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJhaS1pbnB1dCIgaWQ9ImlucHV0LTEiIHBsYWNlaG9sZGVyPSJBc2sgYWJvdXQgYW55IHJhY2UuLi4iPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIG9uY2xpY2s9ImFza0FJKDEsICdyYWNlJykiPkFzazwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgZW5kaWYgJX0KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8IS0tIOKVkOKVkCBTVEVQIDM6IENMQVNTIOKVkOKVkCAtLT4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc2VjdGlvbiIgaWQ9InN0ZXAtMiIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjIwcHg7YWxpZ24taXRlbXM6c3RhcnQiPgogICAgICA8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1nb2xkIj4KICAgICAgICA8aDI+Q2hvb3NlIENsYXNzPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtZ3JpZCIgaWQ9ImNsYXNzLWdyaWQiPgogICAgICAgICAgeyUgZm9yIGMgaW4gY2xhc3NlcyAlfQogICAgICAgICAgPGRpdiBjbGFzcz0iY2hvaWNlLWNhcmQiIGRhdGEtbmFtZT0ie3sgYy5uYW1lIH19IiBvbmNsaWNrPSJzZWxlY3RDaG9pY2UoJ2NoYXJfY2xhc3MnLCAne3sgYy5uYW1lIH19JywgdGhpcykiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtbmFtZSI+e3sgYy5uYW1lIH19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1tZXRhIj4KICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIj57eyBjLmhpdF9kaWUgfX08L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJvbnVzLXRhZyI+e3sgYy5wcmltYXJ5X2FiaWxpdHkgfX08L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtdHJhaXRzIj4KICAgICAgICAgICAgICB7JSBmb3IgZiBpbiBjLmZlYXR1cmVzX2J5X2xldmVsLmdldCgxLCBbXSlbOjJdICV9e3sgZiB9fXslIGlmIG5vdCBsb29wLmxhc3QgJX0gwrcgeyUgZW5kaWYgJX17JSBlbmRmb3IgJX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIHslIGVuZGZvciAlfQogICAgICAgIDwvZGl2PgogICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImNoYXJfY2xhc3MiIGlkPSJmaWVsZC1jaGFyX2NsYXNzIiB2YWx1ZT0iRmlnaHRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWdob3N0IiBvbmNsaWNrPSJnb1N0ZXAoMSkiPuKGkCBCYWNrPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0iZ29TdGVwKDMpIj5OZXh0OiBCYWNrZ3JvdW5kIOKGkjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgaWYgb2xsYW1hX29rICV9CiAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbC1oZWFkZXIiPvCfjrIgQUkg4oCUIENsYXNzIEFkdmlzb3I8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1jaGF0LWJveCIgaWQ9ImNoYXQtMiI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhaS1tc2cgZG0iPkNsaWNrIGEgY2xhc3MgYW5kIEknbGwgYnJlYWsgZG93biB3aGF0IGl0IGRvZXMgYXQgbGV2ZWwgMSwgd2hpY2ggc3RhdHMgbWF0dGVyIG1vc3QsIGFuZCBob3cgaXQgcGFpcnMgd2l0aCB5b3VyIGNob3NlbiByYWNlLjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtMiIgcGxhY2Vob2xkZXI9IkFzayBhYm91dCBhbnkgY2xhc3MuLi4iPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIG9uY2xpY2s9ImFza0FJKDIsICdjbGFzcycpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA0OiBCQUNLR1JPVU5EIOKVkOKVkCAtLT4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc2VjdGlvbiIgaWQ9InN0ZXAtMyIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjIwcHg7YWxpZ24taXRlbXM6c3RhcnQiPgogICAgICA8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1nb2xkIj4KICAgICAgICA8aDI+Q2hvb3NlIEJhY2tncm91bmQ8L2gyPgogICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1ncmlkIiBpZD0iYmctZ3JpZCI+CiAgICAgICAgICB7JSBmb3IgYiBpbiBiYWNrZ3JvdW5kcyAlfQogICAgICAgICAgPGRpdiBjbGFzcz0iY2hvaWNlLWNhcmQiIGRhdGEtbmFtZT0ie3sgYi5uYW1lIH19IiBvbmNsaWNrPSJzZWxlY3RDaG9pY2UoJ2JhY2tncm91bmQnLCAne3sgYi5uYW1lIH19JywgdGhpcykiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtbmFtZSI+e3sgYi5uYW1lIH19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1tZXRhIj4KICAgICAgICAgICAgICB7JSBmb3IgcyBpbiBiLnNraWxsX3Byb2ZpY2llbmNpZXMgJX0KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJib251cy10YWciPnt7IHMgfX08L3NwYW4+CiAgICAgICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtdHJhaXRzIj57eyBiLmZlYXR1cmUgfX08L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYmFja2dyb3VuZCIgaWQ9ImZpZWxkLWJhY2tncm91bmQiIHZhbHVlPSJTb2xkaWVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ3aXphcmQtbmF2LXJvdyI+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZ2hvc3QiIG9uY2xpY2s9ImdvU3RlcCgyKSI+4oaQIEJhY2s8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJnb1N0ZXAoNCkiPk5leHQ6IEFiaWxpdHkgU2NvcmVzIOKGkjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgaWYgb2xsYW1hX29rICV9CiAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbC1oZWFkZXIiPvCfjrIgQUkg4oCUIEJhY2tncm91bmQgQWR2aXNvcjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC0zIj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+QmFja2dyb3VuZHMgZ2l2ZSB5b3Ugc2tpbGwgcHJvZmljaWVuY2llcyBhbmQgYSBzcGVjaWFsIGZlYXR1cmUuIENsaWNrIG9uZSBhbmQgSSdsbCB0ZWxsIHlvdSBob3cgaXQgZml0cyB5b3VyIHJhY2UgYW5kIGNsYXNzLCBhbmQgd2hhdCBpdCBtZWFucyBmb3IgeW91ciBiYWNrc3RvcnkuPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktaW5wdXQtcm93Ij4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iYWktaW5wdXQiIGlkPSJpbnB1dC0zIiBwbGFjZWhvbGRlcj0iQXNrIGFib3V0IGJhY2tncm91bmRzLi4uIj4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtIiBvbmNsaWNrPSJhc2tBSSgzLCAnYmFja2dyb3VuZCcpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA1OiBBQklMSVRZIFNDT1JFUyDilZDilZAgLS0+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXNlY3Rpb24iIGlkPSJzdGVwLTQiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoyMHB4O2FsaWduLWl0ZW1zOnN0YXJ0Ij4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtZ29sZCI+CiAgICAgICAgPGgyPkFiaWxpdHkgU2NvcmVzPC9oMj4KICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLWJnMyk7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzoxMnB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6MTRweCI+CiAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJjb2xvcjp2YXIoLS1nb2xkKSI+U3RhbmRhcmQgQXJyYXk6PC9zdHJvbmc+CiAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC1kaW0iPiBBc3NpZ24gMTUsIDE0LCAxMywgMTIsIDEwLCA4IHRvIHRoZSBzaXggc3RhdHMuPC9zcGFuPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zZWNvbmRhcnkiIHN0eWxlPSJtYXJnaW4tbGVmdDo4cHgiIG9uY2xpY2s9ImFwcGx5U3RhbmRhcmRBcnJheSgpIj5BdXRvLUFwcGx5PC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktZ3JpZC1sYXJnZSI+CiAgICAgICAgICB7JSBmb3Igc3RhdCwgbGFiZWwgaW4gWygnc3RyZW5ndGgnLCdTdHJlbmd0aCcpLCgnZGV4dGVyaXR5JywnRGV4dGVyaXR5JyksKCdjb25zdGl0dXRpb24nLCdDb25zdGl0dXRpb24nKSwoJ2ludGVsbGlnZW5jZScsJ0ludGVsbGlnZW5jZScpLCgnd2lzZG9tJywnV2lzZG9tJyksKCdjaGFyaXNtYScsJ0NoYXJpc21hJyldICV9CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhYmlsaXR5LWJveC1sYXJnZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktbGFiZWwiPnt7IGxhYmVsIH19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktYWJiciI+e3sgbGFiZWxbOjNdLnVwcGVyKCkgfX08L2Rpdj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgbmFtZT0ie3sgc3RhdCB9fSIgaWQ9InNjb3JlLXt7IHN0YXQgfX0iCiAgICAgICAgICAgICAgY2xhc3M9ImFiaWxpdHktc2NvcmUtaW5wdXQiIHZhbHVlPSIxMCIgbWluPSIxIiBtYXg9IjIwIgogICAgICAgICAgICAgIG9uaW5wdXQ9InVwZGF0ZU1vZCgne3sgc3RhdCB9fScpIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWJpbGl0eS1tb2QiIGlkPSJtb2Qte3sgc3RhdCB9fSI+KzA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gUmFjaWFsIGJvbnVzIHByZXZpZXcgLS0+CiAgICAgICAgPGRpdiBpZD0icmFjaWFsLWJvbnVzLW5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOjEycHg7Zm9udC1zaXplOjEzcHg7Y29sb3I6dmFyKC0taW5rKTtmb250LXN0eWxlOml0YWxpYyI+PC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9IndpemFyZC1uYXYtcm93Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCIgb25jbGljaz0iZ29TdGVwKDMpIj7ihpAgQmFjazwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImdvU3RlcCg1KSI+TmV4dDogUGVyc29uYWxpdHkg4oaSPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICB7JSBpZiBvbGxhbWFfb2sgJX0KICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwiPgogICAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsLWhlYWRlciI+8J+OsiBBSSDigJQgU3RhdHMgQWR2aXNvcjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC00Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+SSdsbCByZWNvbW1lbmQgZXhhY3RseSBob3cgdG8gYXNzaWduIHRoZSBzdGFuZGFyZCBhcnJheSBmb3IgeW91ciByYWNlIGFuZCBjbGFzcy4gQ2xpY2sgIkdldCBSZWNvbW1lbmRhdGlvbiIgb3IgYXNrIG1lIGFueXRoaW5nIGFib3V0IHlvdXIgc3RhdHMuPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIHN0eWxlPSJ3aWR0aDoxMDAlIiBvbmNsaWNrPSJnZXRTdGF0UmVjb21tZW5kYXRpb24oKSI+8J+TiiBHZXQgQUkgU3RhdCBSZWNvbW1lbmRhdGlvbjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtNCIgcGxhY2Vob2xkZXI9IkFzayBhYm91dCBhYmlsaXR5IHNjb3Jlcy4uLiI+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGJ0bi1zbSIgb25jbGljaz0iYXNrQUkoNCwgJ2FiaWxpdGllcycpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA2OiBQRVJTT05BTElUWSDilZDilZAgLS0+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXNlY3Rpb24iIGlkPSJzdGVwLTUiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoyMHB4O2FsaWduLWl0ZW1zOnN0YXJ0Ij4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtZ29sZCI+CiAgICAgICAgPGgyPlBlcnNvbmFsaXR5PC9oMj4KICAgICAgICA8cCBjbGFzcz0idGV4dC1kaW0iIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPlRoZXNlIGRlZmluZSB3aG8geW91ciBjaGFyYWN0ZXIgaXMuIFRoZSBBSSBjYW4gc3VnZ2VzdCBhbGwgZm91ciBiYXNlZCBvbiB5b3VyIGJ1aWxkLjwvcD4KICAgICAgICA8bGFiZWw+UGVyc29uYWxpdHkgVHJhaXQ8L2xhYmVsPgogICAgICAgIDx0ZXh0YXJlYSBuYW1lPSJwZXJzb25hbGl0eV90cmFpdCIgaWQ9ImZpZWxkLXBlcnNvbmFsaXR5X3RyYWl0IiByb3dzPSIyIiBwbGFjZWhvbGRlcj0iSG93IGRvZXMgeW91ciBjaGFyYWN0ZXIgZ2VuZXJhbGx5IGJlaGF2ZT8iPjwvdGV4dGFyZWE+CiAgICAgICAgPGxhYmVsPklkZWFsPC9sYWJlbD4KICAgICAgICA8dGV4dGFyZWEgbmFtZT0iaWRlYWwiIGlkPSJmaWVsZC1pZGVhbCIgcm93cz0iMiIgcGxhY2Vob2xkZXI9IldoYXQgZG9lcyB5b3VyIGNoYXJhY3RlciBiZWxpZXZlIGluIGFib3ZlIGFsbD8iPjwvdGV4dGFyZWE+CiAgICAgICAgPGxhYmVsPkJvbmQ8L2xhYmVsPgogICAgICAgIDx0ZXh0YXJlYSBuYW1lPSJib25kIiBpZD0iZmllbGQtYm9uZCIgcm93cz0iMiIgcGxhY2Vob2xkZXI9IldoYXQgY29ubmVjdHMgeW91ciBjaGFyYWN0ZXIgdG8gdGhlIHdvcmxkPyI+PC90ZXh0YXJlYT4KICAgICAgICA8bGFiZWw+RmxhdzwvbGFiZWw+CiAgICAgICAgPHRleHRhcmVhIG5hbWU9ImZsYXciIGlkPSJmaWVsZC1mbGF3IiByb3dzPSIyIiBwbGFjZWhvbGRlcj0iV2hhdCB3ZWFrbmVzcyBvciB2aWNlIGhvbGRzIHlvdXIgY2hhcmFjdGVyIGJhY2s/Ij48L3RleHRhcmVhPgogICAgICAgIDxkaXYgY2xhc3M9IndpemFyZC1uYXYtcm93Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCIgb25jbGljaz0iZ29TdGVwKDQpIj7ihpAgQmFjazwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImdvU3RlcCg2KSI+TmV4dDogRmluYWxpemUg4oaSPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICB7JSBpZiBvbGxhbWFfb2sgJX0KICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwiPgogICAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsLWhlYWRlciI+8J+OsiBBSSDigJQgUGVyc29uYWxpdHkgQWR2aXNvcjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC01Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+SSBjYW4gZ2VuZXJhdGUgcGVyc29uYWxpdHkgdHJhaXRzLCBpZGVhbHMsIGJvbmRzLCBhbmQgZmxhd3MgdGhhdCBmaXQgeW91ciBzcGVjaWZpYyByYWNlLCBjbGFzcywgYW5kIGJhY2tncm91bmQuIENsaWNrIHRoZSBidXR0b24gYmVsb3chPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIHN0eWxlPSJ3aWR0aDoxMDAlIiBvbmNsaWNrPSJnZXRQZXJzb25hbGl0eVN1Z2dlc3Rpb24oKSI+4pyoIEdlbmVyYXRlIFBlcnNvbmFsaXR5IGZvciBNeSBCdWlsZDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtNSIgcGxhY2Vob2xkZXI9IkRlc2NyaWJlIHlvdXIgY2hhcmFjdGVyIGNvbmNlcHQuLi4iPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIG9uY2xpY2s9ImFza0FJKDUsICdwZXJzb25hbGl0eScpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA3OiBGSU5BTElaRSDilZDilZAgLS0+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXNlY3Rpb24iIGlkPSJzdGVwLTYiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoyMHB4O2FsaWduLWl0ZW1zOnN0YXJ0Ij4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtZ29sZCI+CiAgICAgICAgPGgyPkZpbmFsaXplPC9oMj4KCiAgICAgICAgPCEtLSBCdWlsZCBzdW1tYXJ5IC0tPgogICAgICAgIDxkaXYgaWQ9ImJ1aWxkLXN1bW1hcnkiIHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLWJnMyk7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzoxNHB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoxLjgiPgogICAgICAgICAgTG9hZGluZyBzdW1tYXJ5Li4uCiAgICAgICAgPC9kaXY+CgogICAgICAgIDxsYWJlbD5BZGRpdGlvbmFsIE5vdGVzIC8gQmFja3N0b3J5PC9sYWJlbD4KICAgICAgICA8dGV4dGFyZWEgbmFtZT0ibm90ZXMiIHJvd3M9IjQiIHBsYWNlaG9sZGVyPSJBbnkgZXh0cmEgZGV0YWlscywgYmFja3N0b3J5LCBvciBub3RlcyBmb3IgeW91ciBETS4uLiI+PC90ZXh0YXJlYT4KCiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWdob3N0IiBvbmNsaWNrPSJnb1N0ZXAoNSkiPuKGkCBCYWNrPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9ImZvbnQtc2l6ZToxNXB4O3BhZGRpbmc6MTJweCAyOHB4Ij7impQgQ3JlYXRlIENoYXJhY3RlcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgaWYgb2xsYW1hX29rICV9CiAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbC1oZWFkZXIiPvCfjrIgQUkg4oCUIEZpbmFsIFJldmlldzwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC02Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+WW91ciBjaGFyYWN0ZXIgaXMgYWxtb3N0IHJlYWR5ISBBc2sgbWUgYW55dGhpbmcgYWJvdXQgeW91ciBidWlsZCDigJQgc3BlbGxzIHlvdSdsbCBoYXZlIGFjY2VzcyB0bywgc3RhcnRpbmcgZXF1aXBtZW50LCB3aGF0IHRvIGV4cGVjdCBhdCBsZXZlbCAxLCBvciBob3cgdG8gcGxheSB5b3VyIGNsYXNzIGVmZmVjdGl2ZWx5LjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtNiIgcGxhY2Vob2xkZXI9IkFueSBmaW5hbCBxdWVzdGlvbnM/Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtIiBvbmNsaWNrPSJhc2tBSSg2LCAnZ2VuZXJhbCcpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCjwvZm9ybT4KPC9kaXY+Cgo8c3R5bGU+Ci5jaG9pY2UtZ3JpZCB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxNjBweCwgMWZyKSk7CiAgZ2FwOiA4cHg7CiAgbWFyZ2luLWJvdHRvbTogMTZweDsKICBtYXgtaGVpZ2h0OiA0MjBweDsKICBvdmVyZmxvdy15OiBhdXRvOwogIHBhZGRpbmctcmlnaHQ6IDRweDsKfQouY2hvaWNlLWNhcmQgewogIGJhY2tncm91bmQ6IHZhcigtLWJnMyk7CiAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgcGFkZGluZzogMTBweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdHJhbnNpdGlvbjogYWxsIDAuMTVzOwp9Ci5jaG9pY2UtY2FyZDpob3ZlciB7IGJvcmRlci1jb2xvcjogdmFyKC0tYm9yZGVyLWdvbGQpOyB9Ci5jaG9pY2UtY2FyZC5zZWxlY3RlZCB7IGJvcmRlci1jb2xvcjogdmFyKC0tZ29sZCk7IGJhY2tncm91bmQ6IHJnYmEoMjAxLDE2OCw3NiwwLjA4KTsgfQouY2hvaWNlLW5hbWUgeyBmb250LWZhbWlseTogJ0NpbnplbCcsIHNlcmlmOyBmb250LXNpemU6IDEzcHg7IGNvbG9yOiB2YXIoLS1nb2xkKTsgbWFyZ2luLWJvdHRvbTogNnB4OyB9Ci5jaG9pY2UtbWV0YSB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiA0cHg7IG1hcmdpbi1ib3R0b206IDRweDsgfQouYm9udXMtdGFnIHsKICBmb250LXNpemU6IDExcHg7IGJhY2tncm91bmQ6IHJnYmEoMjAxLDE2OCw3NiwwLjEyKTsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDIwMSwxNjgsNzYsMC4yNSk7IGJvcmRlci1yYWRpdXM6IDNweDsKICBwYWRkaW5nOiAxcHggNXB4OyBjb2xvcjogdmFyKC0tZ29sZC1saWdodCk7Cn0KLmJvbnVzLXRhZy5zcGVlZCB7IGJhY2tncm91bmQ6IHJnYmEoMTA2LDE0MywxNzYsMC4xMik7IGJvcmRlci1jb2xvcjogcmdiYSgxMDYsMTQzLDE3NiwwLjMpOyBjb2xvcjogdmFyKC0taW5rKTsgfQouY2hvaWNlLXRyYWl0cyB7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6IHZhcigtLXRleHQtZGltKTsgbGluZS1oZWlnaHQ6IDEuNDsgfQoKLmFpLXBhbmVsIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZzIpOwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBwYWRkaW5nOiAxNHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDhweDsKfQouYWktcGFuZWwtaGVhZGVyIHsKICBmb250LWZhbWlseTogJ0NpbnplbCcsIHNlcmlmOwogIGZvbnQtc2l6ZTogMTNweDsKICBjb2xvcjogdmFyKC0tZ29sZCk7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgcGFkZGluZy1ib3R0b206IDhweDsKICBtYXJnaW4tYm90dG9tOiA0cHg7Cn0KLmFpLWNoYXQtYm94IHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZzMpOwogIGJvcmRlci1yYWRpdXM6IDZweDsKICBwYWRkaW5nOiAxMHB4OwogIGhlaWdodDogMjYwcHg7CiAgb3ZlcmZsb3cteTogYXV0bzsKICBmb250LXNpemU6IDE0cHg7CiAgZmxleDogMTsKfQouYWktbXNnIHsgbWFyZ2luLWJvdHRvbTogMTBweDsgbGluZS1oZWlnaHQ6IDEuNTsgcGFkZGluZzogNnB4IDhweDsgYm9yZGVyLXJhZGl1czogNXB4OyB9Ci5haS1tc2cuZG0geyBiYWNrZ3JvdW5kOiByZ2JhKDIwMSwxNjgsNzYsMC4wNik7IGNvbG9yOiB2YXIoLS10ZXh0KTsgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCB2YXIoLS1nb2xkKTsgfQouYWktbXNnLnVzZXIgeyBiYWNrZ3JvdW5kOiByZ2JhKDEwNiwxNDMsMTc2LDAuMDgpOyBjb2xvcjogdmFyKC0taW5rKTsgdGV4dC1hbGlnbjogcmlnaHQ7IGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHZhcigtLWluayk7IH0KLmFpLW1zZy50aGlua2luZyB7IGNvbG9yOiB2YXIoLS10ZXh0LWRpbSk7IGZvbnQtc3R5bGU6IGl0YWxpYzsgYW5pbWF0aW9uOiBwdWxzZSAxLjVzIGluZmluaXRlOyB9Ci5haS1pbnB1dC1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDZweDsgfQouYWktaW5wdXQgeyBmbGV4OiAxOyB9Cgoud2l6YXJkLW5hdi1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDIwcHg7IH0KLndpemFyZC1zdGVwIHsgcGFkZGluZzogOHB4IDEycHg7IGZvbnQtc2l6ZTogMTJweDsgY3Vyc29yOiBkZWZhdWx0OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9CgouYWJpbGl0eS1ncmlkLWxhcmdlIHsKICBkaXNwbGF5OiBncmlkOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7CiAgZ2FwOiAxMnB4OwogIG1hcmdpbi1ib3R0b206IDhweDsKfQouYWJpbGl0eS1ib3gtbGFyZ2UgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KLmFiaWxpdHktbGFiZWwgeyBmb250LXNpemU6IDExcHg7IGNvbG9yOiB2YXIoLS10ZXh0LWRpbSk7IG1hcmdpbi1ib3R0b206IDJweDsgfQouYWJpbGl0eS1hYmJyIHsgZm9udC1mYW1pbHk6ICdDaW56ZWwnLCBzZXJpZjsgZm9udC1zaXplOiAxM3B4OyBjb2xvcjogdmFyKC0tZ29sZCk7IG1hcmdpbi1ib3R0b206IDRweDsgfQouYWJpbGl0eS1zY29yZS1pbnB1dCB7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAyNHB4OyBmb250LXdlaWdodDogNzAwOyBwYWRkaW5nOiA4cHggNHB4OyB9Ci5hYmlsaXR5LW1vZCB7IGZvbnQtc2l6ZTogMTZweDsgY29sb3I6IHZhcigtLWdvbGQpOyBtYXJnaW4tdG9wOiA0cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IH0KPC9zdHlsZT4KeyUgZW5kYmxvY2sgJX0KCnslIGJsb2NrIHNjcmlwdHMgJX0KPHNjcmlwdD4KY29uc3QgT0xMQU1BX09LID0ge3sgJ3RydWUnIGlmIG9sbGFtYV9vayBlbHNlICdmYWxzZScgfX07CmNvbnN0IFBSRUxPQUQgPSB7eyBwcmVsb2FkIHwgdG9qc29uIGlmIHByZWxvYWQgZWxzZSAnbnVsbCcgfX07CgovLyBBcHBseSB0ZW1wbGF0ZSBwcmVsb2FkIG9uIHBhZ2UgbG9hZApmdW5jdGlvbiBhcHBseVByZWxvYWQoKSB7CiAgaWYgKCFQUkVMT0FEKSByZXR1cm47CiAgY29uc3Qgc2V0ID0gKGlkLCB2YWwpID0+IHsgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmIChlbCAmJiB2YWwgIT0gbnVsbCkgZWwudmFsdWUgPSB2YWw7IH07CiAgc2V0KCdmaWVsZC1uYW1lJywgJycpOyAgLy8gRG9uJ3QgcHJlbG9hZCB0aGUgbmFtZSDigJQgcGxheWVyIHBpY2tzIHRoZWlyIG93bgogIHNldCgnZmllbGQtbGV2ZWwnLCBQUkVMT0FELmxldmVsKTsKICBzZXQoJ2ZpZWxkLWFsaWdubWVudCcsIFBSRUxPQUQuYWxpZ25tZW50KTsKCiAgLy8gU2VsZWN0IHJhY2UgY2FyZAogIGlmIChQUkVMT0FELnJhY2UpIHsKICAgIGNvbnN0IHJjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3JhY2UtZ3JpZCBbZGF0YS1uYW1lPSIke1BSRUxPQUQucmFjZX0iXWApOwogICAgaWYgKHJjKSB7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNyYWNlLWdyaWQgLmNob2ljZS1jYXJkJykuZm9yRWFjaChjPT5jLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpOyByYy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGQtcmFjZScpLnZhbHVlID0gUFJFTE9BRC5yYWNlOyBidWlsZC5yYWNlID0gUFJFTE9BRC5yYWNlOyB9CiAgfQogIC8vIFNlbGVjdCBjbGFzcyBjYXJkCiAgaWYgKFBSRUxPQUQuY2hhcl9jbGFzcykgewogICAgY29uc3QgY2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2xhc3MtZ3JpZCBbZGF0YS1uYW1lPSIke1BSRUxPQUQuY2hhcl9jbGFzc30iXWApOwogICAgaWYgKGNjKSB7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNjbGFzcy1ncmlkIC5jaG9pY2UtY2FyZCcpLmZvckVhY2goYz0+Yy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsgY2MuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkLWNoYXJfY2xhc3MnKS52YWx1ZSA9IFBSRUxPQUQuY2hhcl9jbGFzczsgYnVpbGQuY2hhcl9jbGFzcyA9IFBSRUxPQUQuY2hhcl9jbGFzczsgfQogIH0KICAvLyBTZWxlY3QgYmFja2dyb3VuZCBjYXJkCiAgaWYgKFBSRUxPQUQuYmFja2dyb3VuZCkgewogICAgY29uc3QgYmMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjYmctZ3JpZCBbZGF0YS1uYW1lPSIke1BSRUxPQUQuYmFja2dyb3VuZH0iXWApOwogICAgaWYgKGJjKSB7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNiZy1ncmlkIC5jaG9pY2UtY2FyZCcpLmZvckVhY2goYz0+Yy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsgYmMuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkLWJhY2tncm91bmQnKS52YWx1ZSA9IFBSRUxPQUQuYmFja2dyb3VuZDsgYnVpbGQuYmFja2dyb3VuZCA9IFBSRUxPQUQuYmFja2dyb3VuZDsgfQogIH0KICAvLyBBYmlsaXR5IHNjb3JlcwogIGNvbnN0IHN0YXRNYXAgPSB7IHN0cmVuZ3RoOidzdHJlbmd0aCcsIGRleHRlcml0eTonZGV4dGVyaXR5JywgY29uc3RpdHV0aW9uOidjb25zdGl0dXRpb24nLCBpbnRlbGxpZ2VuY2U6J2ludGVsbGlnZW5jZScsIHdpc2RvbTond2lzZG9tJywgY2hhcmlzbWE6J2NoYXJpc21hJyB9OwogIE9iamVjdC5lbnRyaWVzKHN0YXRNYXApLmZvckVhY2goKFtrLHZdKSA9PiB7CiAgICBpZiAoUFJFTE9BRFtrXSkgeyBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS0nK3YpOyBpZiAoZWwpIHsgZWwudmFsdWUgPSBQUkVMT0FEW2tdOyB1cGRhdGVNb2Qodik7IH0gfQogIH0pOwogIC8vIFBlcnNvbmFsaXR5CiAgaWYgKFBSRUxPQUQudHJhaXRzKSB7CiAgICBzZXQoJ2ZpZWxkLXBlcnNvbmFsaXR5X3RyYWl0JywgUFJFTE9BRC50cmFpdHMucGVyc29uYWxpdHkpOwogICAgc2V0KCdmaWVsZC1pZGVhbCcsIFBSRUxPQUQudHJhaXRzLmlkZWFsKTsKICAgIHNldCgnZmllbGQtYm9uZCcsIFBSRUxPQUQudHJhaXRzLmJvbmQpOwogICAgc2V0KCdmaWVsZC1mbGF3JywgUFJFTE9BRC50cmFpdHMuZmxhdyk7CiAgfQogIGlmIChQUkVMT0FELm5vdGVzKSBzZXQoJ2ZpZWxkLW5vdGVzJywgUFJFTE9BRC5ub3Rlcyk7CgogIC8vIFNob3cgYSBiYW5uZXIKICBjb25zdCBiYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBiYW5uZXIuc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kOnJnYmEoMjAxLDE2OCw3NiwwLjEyKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlci1nb2xkKTtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjEwcHggMTRweDttYXJnaW4tYm90dG9tOjE0cHg7Zm9udC1zaXplOjE0cHg7Y29sb3I6dmFyKC0tZ29sZCknOwogIGJhbm5lci5pbm5lckhUTUwgPSAn8J+TiyA8c3Ryb25nPlRlbXBsYXRlIGxvYWRlZCE8L3N0cm9uZz4gQWxsIGZpZWxkcyBwcmUtZmlsbGVkIGZyb20geW91ciBzYXZlZCBidWlsZC4gSnVzdCBlbnRlciBhIG5hbWUgYW5kIGFkanVzdCBhbnl0aGluZyB5b3UgbGlrZS4nOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFyLWZvcm0nKS5pbnNlcnRCZWZvcmUoYmFubmVyLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RlcC0wJykpOwp9CmxldCBjdXJyZW50U3RlcCA9IDA7CmNvbnN0IGJ1aWxkID0geyByYWNlOiAnSHVtYW4nLCBjaGFyX2NsYXNzOiAnRmlnaHRlcicsIGJhY2tncm91bmQ6ICdTb2xkaWVyJywgbGV2ZWw6IDEgfTsKCi8vIOKUgOKUgCBOQVZJR0FUSU9OIOKUgOKUgApmdW5jdGlvbiBnb1N0ZXAoaWR4KSB7CiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndpemFyZC1zZWN0aW9uJykuZm9yRWFjaCgocywgaSkgPT4gewogICAgcy5zdHlsZS5kaXNwbGF5ID0gaSA9PT0gaWR4ID8gJ2Jsb2NrJyA6ICdub25lJzsKICB9KTsKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2l6YXJkLXN0ZXAnKS5mb3JFYWNoKChzLCBpKSA9PiB7CiAgICBzLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGkgPT09IGlkeCk7CiAgICBzLmNsYXNzTGlzdC50b2dnbGUoJ2RvbmUnLCBpIDwgaWR4KTsKICB9KTsKICBjdXJyZW50U3RlcCA9IGlkeDsKICBpZiAoaWR4ID09PSA0KSBzaG93UmFjaWFsQm9udXNlcygpOwogIGlmIChpZHggPT09IDYpIHJlbmRlckJ1aWxkU3VtbWFyeSgpOwogIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKfQoKLy8g4pSA4pSAIENIT0lDRSBDQVJEUyDilIDilIAKZnVuY3Rpb24gc2VsZWN0Q2hvaWNlKGZpZWxkLCB2YWx1ZSwgZWwpIHsKICBjb25zdCBncmlkID0gZWwuY2xvc2VzdCgnLmNob2ljZS1ncmlkJyk7CiAgZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hvaWNlLWNhcmQnKS5mb3JFYWNoKGMgPT4gYy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsKICBlbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZC0nICsgZmllbGQpLnZhbHVlID0gdmFsdWU7CiAgYnVpbGRbZmllbGRdID0gdmFsdWU7CiAgLy8gQXV0by10cmlnZ2VyIEFJIGV4cGxhbmF0aW9uCiAgaWYgKE9MTEFNQV9PSykgewogICAgY29uc3Qgc3RlcE1hcCA9IHsgcmFjZTogMSwgY2hhcl9jbGFzczogMiwgYmFja2dyb3VuZDogMyB9OwogICAgY29uc3Qgc3RlcElkeCA9IHN0ZXBNYXBbZmllbGRdOwogICAgY29uc3Qgc3RlcE5hbWUgPSBmaWVsZCA9PT0gJ2NoYXJfY2xhc3MnID8gJ2NsYXNzJyA6IGZpZWxkOwogICAgaWYgKHN0ZXBJZHggIT09IHVuZGVmaW5lZCkgewogICAgICBhZGRBSU1zZyhzdGVwSWR4LCBgVGVsbCBtZSBhYm91dCAke3ZhbHVlfSBhcyBhICR7c3RlcE5hbWV9IGNob2ljZSBmb3IgbXkgYnVpbGQuYCwgJ3VzZXInKTsKICAgICAgZmV0Y2hBSShzdGVwSWR4LCBzdGVwTmFtZSwgYFRlbGwgbWUgYWJvdXQgJHt2YWx1ZX0gYXMgYSAke3N0ZXBOYW1lfSBjaG9pY2UuIEJlIHNwZWNpZmljIGFib3V0IHRyYWl0cywgYm9udXNlcywgYW5kIGhvdyBpdCBmaXRzIG15IGN1cnJlbnQgYnVpbGQuYCk7CiAgICB9CiAgfQp9CgovLyDilIDilIAgQUkgQ0hBVCDilIDilIAKZnVuY3Rpb24gYWRkQUlNc2coc3RlcElkeCwgdGV4dCwgcm9sZSkgewogIGNvbnN0IGJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LScgKyBzdGVwSWR4KTsKICBpZiAoIWJveCkgcmV0dXJuOwogIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGRpdi5jbGFzc05hbWUgPSAnYWktbXNnICcgKyByb2xlOwogIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7CiAgYm94LmFwcGVuZENoaWxkKGRpdik7CiAgYm94LnNjcm9sbFRvcCA9IGJveC5zY3JvbGxIZWlnaHQ7CiAgcmV0dXJuIGRpdjsKfQoKYXN5bmMgZnVuY3Rpb24gZmV0Y2hBSShzdGVwSWR4LCBzdGVwTmFtZSwgbWVzc2FnZSkgewogIGNvbnN0IHRoaW5raW5nID0gYWRkQUlNc2coc3RlcElkeCwgJy4uLnRoaW5raW5nLi4uJywgJ3RoaW5raW5nJyk7CiAgc3luY0J1aWxkRnJvbUZvcm0oKTsKICB0cnkgewogICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJy9jaGFyYWN0ZXJzL2FpX3N0ZXAnLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGVwOiBzdGVwTmFtZSwgYnVpbGQsIG1lc3NhZ2UgfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICBpZiAodGhpbmtpbmcpIHRoaW5raW5nLnJlbW92ZSgpOwogICAgYWRkQUlNc2coc3RlcElkeCwgZGF0YS5yZXBseSB8fCAnW05vIHJlc3BvbnNlXScsICdkbScpOwogIH0gY2F0Y2ggKGUpIHsKICAgIGlmICh0aGlua2luZykgdGhpbmtpbmcucmVtb3ZlKCk7CiAgICBhZGRBSU1zZyhzdGVwSWR4LCAnW0FJIHVuYXZhaWxhYmxlXScsICdkbScpOwogIH0KfQoKZnVuY3Rpb24gYXNrQUkoc3RlcElkeCwgc3RlcE5hbWUpIHsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dC0nICsgc3RlcElkeCk7CiAgY29uc3QgbXNnID0gKGlucHV0Py52YWx1ZSB8fCAnJykudHJpbSgpOwogIGlmICghbXNnKSByZXR1cm47CiAgYWRkQUlNc2coc3RlcElkeCwgbXNnLCAndXNlcicpOwogIGlucHV0LnZhbHVlID0gJyc7CiAgZmV0Y2hBSShzdGVwSWR4LCBzdGVwTmFtZSwgbXNnKTsKfQoKLy8gRW50ZXIga2V5IG9uIEFJIGlucHV0cwpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWktaW5wdXQnKS5mb3JFYWNoKChpbnB1dCwgaSkgPT4gewogIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHsKICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgewogICAgICBjb25zdCBzdGVwTWFwID0gW1snZ2VuZXJhbCcsMF0sWydyYWNlJywxXSxbJ2NsYXNzJywyXSxbJ2JhY2tncm91bmQnLDNdLFsnYWJpbGl0aWVzJyw0XSxbJ3BlcnNvbmFsaXR5Jyw1XSxbJ2dlbmVyYWwnLDZdXTsKICAgICAgYXNrQUkoaSwgc3RlcE1hcFtpXT8uWzBdIHx8ICdnZW5lcmFsJyk7CiAgICB9CiAgfSk7Cn0pOwoKZnVuY3Rpb24gZ2V0U3RhdFJlY29tbWVuZGF0aW9uKCkgewogIHN5bmNCdWlsZEZyb21Gb3JtKCk7CiAgZmV0Y2hBSSg0LCAnYWJpbGl0aWVzJywgYFJlY29tbWVuZCBleGFjdGx5IGhvdyB0byBhc3NpZ24gdGhlIHN0YW5kYXJkIGFycmF5ICgxNSwxNCwxMywxMiwxMCw4KSB0byBTVFIsIERFWCwgQ09OLCBJTlQsIFdJUywgQ0hBIGZvciBhICR7YnVpbGQucmFjZX0gJHtidWlsZC5jaGFyX2NsYXNzfS4gTGlzdCBlYWNoIHN0YXQgYXNzaWdubWVudCBleHBsaWNpdGx5LmApOwp9CgpmdW5jdGlvbiBnZXRQZXJzb25hbGl0eVN1Z2dlc3Rpb24oKSB7CiAgc3luY0J1aWxkRnJvbUZvcm0oKTsKICBmZXRjaEFJKDUsICdwZXJzb25hbGl0eScsIGBHZW5lcmF0ZSBhIFBlcnNvbmFsaXR5IFRyYWl0LCBJZGVhbCwgQm9uZCwgYW5kIEZsYXcgZm9yIGEgJHtidWlsZC5yYWNlfSAke2J1aWxkLmNoYXJfY2xhc3N9IHdpdGggYSAke2J1aWxkLmJhY2tncm91bmR9IGJhY2tncm91bmQuIEZvcm1hdCBjbGVhcmx5IHdpdGggbGFiZWxzOiBUUkFJVDosIElERUFMOiwgQk9ORDosIEZMQVc6YCk7Cn0KCi8vIOKUgOKUgCBBQklMSVRZIFNDT1JFUyDilIDilIAKZnVuY3Rpb24gdXBkYXRlTW9kKHN0YXQpIHsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS0nICsgc3RhdCk7CiAgY29uc3QgbW9kRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kLScgKyBzdGF0KTsKICBjb25zdCBzY29yZSA9IHBhcnNlSW50KGlucHV0Py52YWx1ZSkgfHwgMTA7CiAgY29uc3QgbW9kID0gTWF0aC5mbG9vcigoc2NvcmUgLSAxMCkgLyAyKTsKICBpZiAobW9kRWwpIG1vZEVsLnRleHRDb250ZW50ID0gKG1vZCA+PSAwID8gJysnIDogJycpICsgbW9kOwogIGJ1aWxkW3N0YXRdID0gc2NvcmU7Cn0KCmZ1bmN0aW9uIGFwcGx5U3RhbmRhcmRBcnJheSgpIHsKICBjb25zdCBvcmRlciA9IFsnc3RyZW5ndGgnLCdkZXh0ZXJpdHknLCdjb25zdGl0dXRpb24nLCdpbnRlbGxpZ2VuY2UnLCd3aXNkb20nLCdjaGFyaXNtYSddOwogIGNvbnN0IHZhbHMgPSBbMTUsMTQsMTMsMTIsMTAsOF07CiAgb3JkZXIuZm9yRWFjaCgocywgaSkgPT4gewogICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUtJyArIHMpOwogICAgaWYgKGVsKSB7IGVsLnZhbHVlID0gdmFsc1tpXTsgdXBkYXRlTW9kKHMpOyB9CiAgfSk7Cn0KCmNvbnN0IFJBQ0lBTF9CT05VU0VTID0gewogIHslIGZvciByIGluIHJhY2VzICV9CiAgInt7IHIubmFtZSB9fSI6IHt7IHIuYWJpbGl0eV9ib251c2VzIHwgdG9qc29uIH19LAogIHslIGVuZGZvciAlfQp9OwoKZnVuY3Rpb24gc2hvd1JhY2lhbEJvbnVzZXMoKSB7CiAgY29uc3QgcmFjZSA9IGJ1aWxkLnJhY2UgfHwgJ0h1bWFuJzsKICBjb25zdCBib251c2VzID0gUkFDSUFMX0JPTlVTRVNbcmFjZV0gfHwge307CiAgY29uc3Qgbm90ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWNpYWwtYm9udXMtbm90ZScpOwogIGlmICghbm90ZSkgcmV0dXJuOwogIGNvbnN0IHBhcnRzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykubWFwKChbaywgdl0pID0+IGArJHt2fSAke2sudG9VcHBlckNhc2UoKX1gKTsKICBpZiAocGFydHMubGVuZ3RoKSB7CiAgICBub3RlLnRleHRDb250ZW50ID0gYCR7cmFjZX0gcmFjaWFsIGJvbnVzZXMgYXBwbGllZCBhZnRlciBmaW5hbGl6ZTogJHtwYXJ0cy5qb2luKCcsICcpfWA7CiAgfSBlbHNlIHsKICAgIG5vdGUudGV4dENvbnRlbnQgPSAnJzsKICB9Cn0KCi8vIOKUgOKUgCBCVUlMRCBTVU1NQVJZIOKUgOKUgApmdW5jdGlvbiBzeW5jQnVpbGRGcm9tRm9ybSgpIHsKICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXItZm9ybScpOwogIGlmICghZm9ybSkgcmV0dXJuOwogIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhKGZvcm0pOwogIGZkLmZvckVhY2goKHYsIGspID0+IHsgaWYgKHYpIGJ1aWxkW2tdID0gdjsgfSk7CiAgYnVpbGQubmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZC1uYW1lJyk/LnZhbHVlIHx8ICcnOwogIGJ1aWxkLmxldmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkLWxldmVsJyk/LnZhbHVlIHx8IDE7Cn0KCmZ1bmN0aW9uIHJlbmRlckJ1aWxkU3VtbWFyeSgpIHsKICBzeW5jQnVpbGRGcm9tRm9ybSgpOwogIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1aWxkLXN1bW1hcnknKTsKICBpZiAoIWVsKSByZXR1cm47CgogIGNvbnN0IHN0YXRzID0gWydzdHJlbmd0aCcsJ2RleHRlcml0eScsJ2NvbnN0aXR1dGlvbicsJ2ludGVsbGlnZW5jZScsJ3dpc2RvbScsJ2NoYXJpc21hJ107CiAgY29uc3QgYWJiciA9IFsnU1RSJywnREVYJywnQ09OJywnSU5UJywnV0lTJywnQ0hBJ107CiAgY29uc3Qgc3RhdFJvdyA9IHN0YXRzLm1hcCgocywgaSkgPT4gewogICAgY29uc3QgdmFsID0gcGFyc2VJbnQoYnVpbGRbc10gfHwgMTApOwogICAgY29uc3QgbW9kID0gTWF0aC5mbG9vcigodmFsIC0gMTApIC8gMik7CiAgICByZXR1cm4gYDxzcGFuIHN0eWxlPSJtYXJnaW4tcmlnaHQ6MTJweCI+PHN0cm9uZyBzdHlsZT0iY29sb3I6dmFyKC0tZ29sZCkiPiR7YWJicltpXX08L3N0cm9uZz4gJHt2YWx9IDxzcGFuIHN0eWxlPSJjb2xvcjp2YXIoLS10ZXh0LWRpbSkiPigke21vZCA+PSAwID8gJysnIDogJyd9JHttb2R9KTwvc3Bhbj48L3NwYW4+YDsKICB9KS5qb2luKCcnKTsKCiAgZWwuaW5uZXJIVE1MID0gYAogICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOnZhcigtLWdvbGQtbGlnaHQpIj4ke2J1aWxkLm5hbWUgfHwgJ1VubmFtZWQnfTwvc3Ryb25nPjwvZGl2PgogICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo0cHg7Y29sb3I6dmFyKC0tdGV4dC1kaW0pIj4KICAgICAgJHtidWlsZC5yYWNlIHx8ICfigJQnfSAke2J1aWxkLmNoYXJfY2xhc3MgfHwgJ+KAlCd9IMK3IExldmVsICR7YnVpbGQubGV2ZWx9IMK3ICR7YnVpbGQuYmFja2dyb3VuZCB8fCAn4oCUJ30gwrcgJHtidWlsZC5hbGlnbm1lbnQgfHwgJ+KAlCd9CiAgICA8L2Rpdj4KICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDtmb250LXNpemU6MTNweCI+JHtzdGF0Um93fTwvZGl2PgogIGA7Cn0KCi8vIFByZS1zZWxlY3QgSHVtYW4gYW5kIEZpZ2h0ZXIgb24gbG9hZApkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gewogIGNvbnN0IGh1bWFuQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyYWNlLWdyaWQgW2RhdGEtbmFtZT0iSHVtYW4iXScpOwogIGlmIChodW1hbkNhcmQpIGh1bWFuQ2FyZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIGNvbnN0IGZpZ2h0ZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NsYXNzLWdyaWQgW2RhdGEtbmFtZT0iRmlnaHRlciJdJyk7CiAgaWYgKGZpZ2h0ZXJDYXJkKSBmaWdodGVyQ2FyZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIGNvbnN0IHNvbGRpZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JnLWdyaWQgW2RhdGEtbmFtZT0iU29sZGllciJdJyk7CiAgaWYgKHNvbGRpZXJDYXJkKSBzb2xkaWVyQ2FyZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwoKICAvLyBVcGRhdGUgYWxsIG1vZHMgb24gbG9hZAogIFsnc3RyZW5ndGgnLCdkZXh0ZXJpdHknLCdjb25zdGl0dXRpb24nLCdpbnRlbGxpZ2VuY2UnLCd3aXNkb20nLCdjaGFyaXNtYSddLmZvckVhY2godXBkYXRlTW9kKTsKICAvLyBBcHBseSB0ZW1wbGF0ZSBpZiBsb2FkZWQKICBhcHBseVByZWxvYWQoKTsKfSk7Cjwvc2NyaXB0Pgp7JSBlbmRibG9jayAlfQo="
[System.IO.File]::WriteAllBytes("$root\templates\characters\wizard.html", [System.Convert]::FromBase64String($b))

# templates\templates\library.html
$b = "eyUgZXh0ZW5kcyAiYmFzZS5odG1sIiAlfQp7JSBibG9jayB0aXRsZSAlfVRlbXBsYXRlIExpYnJhcnkg4oCUIENoYXJhY3RlckZvcmdleyUgZW5kYmxvY2sgJX0KeyUgYmxvY2sgY29udGVudCAlfQoKPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4iIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPgogIDxkaXY+CiAgICA8aDE+VGVtcGxhdGUgTGlicmFyeTwvaDE+CiAgICA8cCBjbGFzcz0ic3VidGl0bGUiPllvdXIgc2F2ZWQgY2hhcmFjdGVyIGJ1aWxkcyDigJQgbG9hZCBhbnkgdGVtcGxhdGUgaW50byB0aGUgd2l6YXJkLjwvcD4KICA8L2Rpdj4KICA8YSBocmVmPSIvY2hhcmFjdGVycy9uZXciIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLXNtIj4rIE5ldyBDaGFyYWN0ZXI8L2E+CjwvZGl2PgoKeyUgaWYgbm90IHBjX3RlbXBsYXRlcyBhbmQgbm90IG5wY190ZW1wbGF0ZXMgJX0KPGRpdiBjbGFzcz0icGFuZWwiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjQ4cHgiPgogIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo0MHB4O21hcmdpbi1ib3R0b206MTJweCI+8J+TizwvZGl2PgogIDxoMj5ObyBUZW1wbGF0ZXMgWWV0PC9oMj4KICA8cCBjbGFzcz0idGV4dC1kaW0iIHN0eWxlPSJtYXJnaW46MTBweCAwIDIwcHgiPkJ1aWxkIGEgY2hhcmFjdGVyLCB0aGVuIGNsaWNrICJTYXZlIGFzIFRlbXBsYXRlIiBvbiB0aGUgY2hhcmFjdGVyIHNoZWV0IHRvIHN0b3JlIGl0IGhlcmUgZm9yIHF1aWNrIHJldXNlLjwvcD4KICA8YSBocmVmPSIvY2hhcmFjdGVycy9uZXciIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPkJ1aWxkIGEgQ2hhcmFjdGVyPC9hPgo8L2Rpdj4KeyUgZW5kaWYgJX0KCnslIGlmIHBjX3RlbXBsYXRlcyAlfQo8aDIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTJweCI+Q2hhcmFjdGVyIFRlbXBsYXRlczwvaDI+CjxkaXYgY2xhc3M9ImNhcmRzLWdyaWQiPgogIHslIGZvciB0IGluIHBjX3RlbXBsYXRlcyAlfQogIDxkaXYgY2xhc3M9InRlbXBsYXRlLWNhcmQiPgogICAgPGRpdiBjbGFzcz0idGVtcGxhdGUtY2FyZC1uYW1lIj57eyB0Lm5hbWUgfX08L2Rpdj4KICAgIHslIGlmIHQuZGVzY3JpcHRpb24gJX08ZGl2IGNsYXNzPSJ0ZW1wbGF0ZS1jYXJkLWRlc2MiPnt7IHQuZGVzY3JpcHRpb24gfX08L2Rpdj57JSBlbmRpZiAlfQogICAgPGRpdiBjbGFzcz0idGVtcGxhdGUtY2FyZC1idWlsZCI+CiAgICAgIDxzcGFuIGNsYXNzPSJib251cy10YWciPnt7IHQucmFjZSBvciAn4oCUJyB9fTwvc3Bhbj4KICAgICAgPHNwYW4gY2xhc3M9ImJvbnVzLXRhZyI+e3sgdC5jaGFyX2NsYXNzIG9yICfigJQnIH19PC9zcGFuPgogICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIj5Mdmwge3sgdC5sZXZlbCB9fTwvc3Bhbj4KICAgICAgeyUgaWYgdC5iYWNrZ3JvdW5kICV9PHNwYW4gY2xhc3M9ImJvbnVzLXRhZyI+e3sgdC5iYWNrZ3JvdW5kIH19PC9zcGFuPnslIGVuZGlmICV9CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InRlbXBsYXRlLXN0YXRzLXJvdyI+CiAgICAgIHslIGZvciBhYmJyLCB2YWwgaW4gWygnU1RSJyx0LnN0cmVuZ3RoKSwoJ0RFWCcsdC5kZXh0ZXJpdHkpLCgnQ09OJyx0LmNvbnN0aXR1dGlvbiksKCdJTlQnLHQuaW50ZWxsaWdlbmNlKSwoJ1dJUycsdC53aXNkb20pLCgnQ0hBJyx0LmNoYXJpc21hKV0gJX0KICAgICAgPGRpdiBjbGFzcz0idGVtcGxhdGUtc3RhdCI+PGRpdiBjbGFzcz0idGVtcGxhdGUtc3RhdC1sYWJlbCI+e3sgYWJiciB9fTwvZGl2PjxkaXYgY2xhc3M9InRlbXBsYXRlLXN0YXQtdmFsIj57eyB2YWwgfX08L2Rpdj48L2Rpdj4KICAgICAgeyUgZW5kZm9yICV9CiAgICA8L2Rpdj4KICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLXRleHQtZGltKTttYXJnaW4tdG9wOjhweDttYXJnaW4tYm90dG9tOjEwcHgiPlVzZWQge3sgdC50aW1lc191c2VkIH19IHRpbWV7eyAncycgaWYgdC50aW1lc191c2VkICE9IDEgZWxzZSAnJyB9fTwvZGl2PgogICAgPGRpdiBjbGFzcz0iZmxleCIgc3R5bGU9ImdhcDo4cHgiPgogICAgICA8YSBocmVmPSIvY2hhcmFjdGVycy9uZXc/dGVtcGxhdGU9e3sgdC5pZCB9fSIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBidG4tc20iIHN0eWxlPSJmbGV4OjE7dGV4dC1hbGlnbjpjZW50ZXIiPkxvYWQgVGVtcGxhdGU8L2E+CiAgICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIvdGVtcGxhdGVzL3t7IHQuaWQgfX0vZGVsZXRlIiBjbGFzcz0iY29uZmlybS1hY3Rpb24iIGRhdGEtY29uZmlybT0iRGVsZXRlIHRlbXBsYXRlICd7eyB0Lm5hbWUgfX0nPyI+CiAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iPuKclTwvYnV0dG9uPgogICAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KICA8L2Rpdj4KICB7JSBlbmRmb3IgJX0KPC9kaXY+CnslIGVuZGlmICV9Cgp7JSBpZiBucGNfdGVtcGxhdGVzICV9CjxoMiBzdHlsZT0ibWFyZ2luLXRvcDoyNHB4O21hcmdpbi1ib3R0b206MTJweCI+TlBDIFRlbXBsYXRlczwvaDI+CjxkaXYgY2xhc3M9ImNhcmRzLWdyaWQiPgogIHslIGZvciB0IGluIG5wY190ZW1wbGF0ZXMgJX0KICA8ZGl2IGNsYXNzPSJ0ZW1wbGF0ZS1jYXJkIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnJnYmEoMTM5LDMyLDMyLDAuMykiPgogICAgPGRpdiBjbGFzcz0idGVtcGxhdGUtY2FyZC1uYW1lIj57eyB0Lm5hbWUgfX0gPHNwYW4gY2xhc3M9Im5wYy1iYWRnZSI+TlBDPC9zcGFuPjwvZGl2PgogICAgeyUgaWYgdC5kZXNjcmlwdGlvbiAlfTxkaXYgY2xhc3M9InRlbXBsYXRlLWNhcmQtZGVzYyI+e3sgdC5kZXNjcmlwdGlvbiB9fTwvZGl2PnslIGVuZGlmICV9CiAgICA8ZGl2IGNsYXNzPSJ0ZW1wbGF0ZS1jYXJkLWJ1aWxkIj4KICAgICAgPHNwYW4gY2xhc3M9ImJvbnVzLXRhZyI+e3sgdC5yYWNlIG9yICfigJQnIH19PC9zcGFuPgogICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIj57eyB0LmNoYXJfY2xhc3Mgb3IgJ+KAlCcgfX08L3NwYW4+CiAgICAgIDxzcGFuIGNsYXNzPSJib251cy10YWciPkNSIHt7IHQubGV2ZWwgfX08L3NwYW4+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InRlbXBsYXRlLXN0YXRzLXJvdyI+CiAgICAgIHslIGZvciBhYmJyLCB2YWwgaW4gWygnU1RSJyx0LnN0cmVuZ3RoKSwoJ0RFWCcsdC5kZXh0ZXJpdHkpLCgnQ09OJyx0LmNvbnN0aXR1dGlvbiksKCdJTlQnLHQuaW50ZWxsaWdlbmNlKSwoJ1dJUycsdC53aXNkb20pLCgnQ0hBJyx0LmNoYXJpc21hKV0gJX0KICAgICAgPGRpdiBjbGFzcz0idGVtcGxhdGUtc3RhdCI+PGRpdiBjbGFzcz0idGVtcGxhdGUtc3RhdC1sYWJlbCI+e3sgYWJiciB9fTwvZGl2PjxkaXYgY2xhc3M9InRlbXBsYXRlLXN0YXQtdmFsIj57eyB2YWwgfX08L2Rpdj48L2Rpdj4KICAgICAgeyUgZW5kZm9yICV9CiAgICA8L2Rpdj4KICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLXRleHQtZGltKTttYXJnaW4tdG9wOjhweDttYXJnaW4tYm90dG9tOjEwcHgiPlVzZWQge3sgdC50aW1lc191c2VkIH19w5c8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImZsZXgiIHN0eWxlPSJnYXA6OHB4Ij4KICAgICAgPGEgaHJlZj0iL2NoYXJhY3RlcnMvbmV3P25wYz10cnVlJnRlbXBsYXRlPXt7IHQuaWQgfX0iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIHN0eWxlPSJmbGV4OjE7dGV4dC1hbGlnbjpjZW50ZXIiPkxvYWQgTlBDIFRlbXBsYXRlPC9hPgogICAgICA8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iL3RlbXBsYXRlcy97eyB0LmlkIH19L2RlbGV0ZSIgY2xhc3M9ImNvbmZpcm0tYWN0aW9uIiBkYXRhLWNvbmZpcm09IkRlbGV0ZSB0ZW1wbGF0ZSAne3sgdC5uYW1lIH19Jz8iPgogICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIj7inJU8L2J1dHRvbj4KICAgICAgPC9mb3JtPgogICAgPC9kaXY+CiAgPC9kaXY+CiAgeyUgZW5kZm9yICV9CjwvZGl2Pgp7JSBlbmRpZiAlfQoKPHN0eWxlPgoudGVtcGxhdGUtY2FyZCB7IGJhY2tncm91bmQ6dmFyKC0tYmcyKTsgYm9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXItZ29sZCk7IGJvcmRlci1yYWRpdXM6MTBweDsgcGFkZGluZzoxNHB4OyB9Ci50ZW1wbGF0ZS1jYXJkLW5hbWUgeyBmb250LWZhbWlseTonQ2luemVsJyxzZXJpZjsgZm9udC1zaXplOjE1cHg7IGNvbG9yOnZhcigtLWdvbGQpOyBtYXJnaW4tYm90dG9tOjRweDsgfQoudGVtcGxhdGUtY2FyZC1kZXNjIHsgZm9udC1zaXplOjEzcHg7IGNvbG9yOnZhcigtLXRleHQtZGltKTsgZm9udC1zdHlsZTppdGFsaWM7IG1hcmdpbi1ib3R0b206OHB4OyB9Ci50ZW1wbGF0ZS1jYXJkLWJ1aWxkIHsgZGlzcGxheTpmbGV4OyBmbGV4LXdyYXA6d3JhcDsgZ2FwOjRweDsgbWFyZ2luLWJvdHRvbToxMHB4OyB9Ci50ZW1wbGF0ZS1zdGF0cy1yb3cgeyBkaXNwbGF5OmdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoNiwxZnIpOyBnYXA6NHB4OyB9Ci50ZW1wbGF0ZS1zdGF0IHsgdGV4dC1hbGlnbjpjZW50ZXI7IGJhY2tncm91bmQ6dmFyKC0tYmczKTsgYm9yZGVyLXJhZGl1czo0cHg7IHBhZGRpbmc6NHB4IDJweDsgfQoudGVtcGxhdGUtc3RhdC1sYWJlbCB7IGZvbnQtc2l6ZTo5cHg7IGNvbG9yOnZhcigtLXRleHQtZGltKTsgfQoudGVtcGxhdGUtc3RhdC12YWwgeyBmb250LXNpemU6MTNweDsgZm9udC13ZWlnaHQ6NzAwOyBjb2xvcjp2YXIoLS10ZXh0LWJyaWdodCk7IH0KPC9zdHlsZT4KeyUgZW5kYmxvY2sgJX0K"
[System.IO.File]::WriteAllBytes("$root\templates\templates\library.html", [System.Convert]::FromBase64String($b))

Write-Host "Template library patch applied! Restart app.py" -ForegroundColor Green