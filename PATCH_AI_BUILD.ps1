# CharacterForge â€” AI Build Patch
# AI wizard, NPC generator, full 5e sheet
$root = "C:\Users\dmchris\Desktop\CharacterForge"
Write-Host "Applying AI build patch..." -ForegroundColor Cyan

# services\ollama_service.py
$b = "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IGpzb24KCmRlZiBvbGxhbWFfaGVhbHRoKHVybDogc3RyKSAtPiBib29sOgogICAgdHJ5OgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQodXJsLnJzdHJpcCgiLyIpICsgIi9hcGkvdGFncyIsIHRpbWVvdXQ9MikKICAgICAgICByZXR1cm4gci5zdGF0dXNfY29kZSA9PSAyMDAKICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgcmV0dXJuIEZhbHNlCgpkZWYgb2xsYW1hX2NoYXQodXJsOiBzdHIsIG1vZGVsOiBzdHIsIG1lc3NhZ2VzOiBsaXN0LCB0aW1lb3V0OiBpbnQgPSA2MCkgLT4gc3RyOgogICAgdHJ5OgogICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICB1cmwucnN0cmlwKCIvIikgKyAiL2FwaS9jaGF0IiwKICAgICAgICAgICAganNvbj17Im1vZGVsIjogbW9kZWwsICJtZXNzYWdlcyI6IG1lc3NhZ2VzLCAic3RyZWFtIjogRmFsc2V9LAogICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQKICAgICAgICApCiAgICAgICAgci5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICByZXR1cm4gci5qc29uKCkuZ2V0KCJtZXNzYWdlIiwge30pLmdldCgiY29udGVudCIsICIiKS5zdHJpcCgpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmV0dXJuIGYiW0FJIHVuYXZhaWxhYmxlOiB7ZX1dIgoKZGVmIHNpbXBsZV9jb21wbGV0aW9uKHVybDogc3RyLCBtb2RlbDogc3RyLCBwcm9tcHQ6IHN0ciwgdGltZW91dDogaW50ID0gOTApIC0+IHN0cjoKICAgIHRyeToKICAgICAgICByID0gcmVxdWVzdHMucG9zdCgKICAgICAgICAgICAgdXJsLnJzdHJpcCgiLyIpICsgIi9hcGkvZ2VuZXJhdGUiLAogICAgICAgICAgICBqc29uPXsibW9kZWwiOiBtb2RlbCwgInByb21wdCI6IHByb21wdCwgInN0cmVhbSI6IEZhbHNlfSwKICAgICAgICAgICAgdGltZW91dD10aW1lb3V0CiAgICAgICAgKQogICAgICAgIHIucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgcmV0dXJuIHIuanNvbigpLmdldCgicmVzcG9uc2UiLCAiIikuc3RyaXAoKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBmIltBSSB1bmF2YWlsYWJsZToge2V9XSIKCiMg4pSA4pSA4pSAIFNSRCBEQVRBIFNVTU1BUlkgRk9SIFBST01QVFMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpTUkRfUFJPTVBUX1NVTU1BUlkgPSAiIiIKPT09IEQmRCA1ZSBTUkQgUlVMRVMgKGltbXV0YWJsZSBzb3VyY2Ugb2YgdHJ1dGgpID09PQoKQUJJTElUWSBTQ09SRVM6IFNUUiwgREVYLCBDT04sIElOVCwgV0lTLCBDSEEuIE1vZGlmaWVyID0gKHNjb3JlLTEwKS8vMi4KUHJvZmljaWVuY3kgYm9udXM6IGxldmVscyAxLTQ9KzIsIDUtOD0rMywgOS0xMj0rNCwgMTMtMTY9KzUsIDE3LTIwPSs2LgpTdGFuZGFyZCBhcnJheTogMTUsMTQsMTMsMTIsMTAsOC4gUG9pbnQgYnV5OiAyNyBwb2ludHMsIHNjb3JlcyA4LTE1IGJlZm9yZSByYWNpYWwgYm9udXNlcy4KClJBQ0VTICYgQk9OVVNFUzoKLSBEcmFnb25ib3JuOiBTVFIrMiBDSEErMSwgMzBmdCwgQnJlYXRoIFdlYXBvbiwgRGFtYWdlIFJlc2lzdGFuY2UKLSBEd2FyZiAoSGlsbCk6IENPTisyIFdJUysxLCAyNWZ0LCBEYXJrdmlzaW9uLCBEd2FydmVuIFRvdWdobmVzcyAoKzEgSFAvbGV2ZWwpCi0gRHdhcmYgKE1vdW50YWluKTogQ09OKzIgU1RSKzIsIDI1ZnQsIERhcmt2aXNpb24sIEFybW9yIFRyYWluaW5nCi0gRWxmIChIaWdoKTogREVYKzIgSU5UKzEsIDMwZnQsIERhcmt2aXNpb24sIFRyYW5jZSwgQ2FudHJpcAotIEVsZiAoV29vZCk6IERFWCsyIFdJUysxLCAzNWZ0LCBEYXJrdmlzaW9uLCBGbGVldCBvZiBGb290LCBNYXNrIG9mIHRoZSBXaWxkCi0gRWxmIChEcm93KTogREVYKzIgQ0hBKzEsIDMwZnQsIFN1cGVyaW9yIERhcmt2aXNpb24sIFN1bmxpZ2h0IFNlbnNpdGl2aXR5Ci0gR25vbWUgKEZvcmVzdCk6IElOVCsyIERFWCsxLCAyNWZ0LCBEYXJrdmlzaW9uLCBHbm9tZSBDdW5uaW5nCi0gR25vbWUgKFJvY2spOiBJTlQrMiBDT04rMSwgMjVmdCwgRGFya3Zpc2lvbiwgQXJ0aWZpY2VyJ3MgTG9yZQotIEhhbGYtRWxmOiBDSEErMiArIHR3byBvdGhlcnMrMSwgMzBmdCwgRGFya3Zpc2lvbiwgU2tpbGwgVmVyc2F0aWxpdHkgKDIgc2tpbGxzKQotIEhhbGYtT3JjOiBTVFIrMiBDT04rMSwgMzBmdCwgRGFya3Zpc2lvbiwgUmVsZW50bGVzcyBFbmR1cmFuY2UsIFNhdmFnZSBBdHRhY2tzCi0gSGFsZmxpbmcgKExpZ2h0Zm9vdCk6IERFWCsyIENIQSsxLCAyNWZ0LCBMdWNreSwgQnJhdmUsIE5hdHVyYWxseSBTdGVhbHRoeQotIEhhbGZsaW5nIChTdG91dCk6IERFWCsyIENPTisxLCAyNWZ0LCBMdWNreSwgQnJhdmUsIFN0b3V0IFJlc2lsaWVuY2UKLSBIdW1hbjogQWxsIHN0YXRzKzEsIDMwZnQsIGV4dHJhIGxhbmd1YWdlCi0gVGllZmxpbmc6IElOVCsxIENIQSsyLCAzMGZ0LCBEYXJrdmlzaW9uLCBIZWxsaXNoIFJlc2lzdGFuY2UsIEluZmVybmFsIExlZ2FjeQoKQ0xBU1NFUyAoaGl0IGRpZSwgcHJpbWFyeSBzdGF0LCBzYXZlcyk6Ci0gQmFyYmFyaWFuOiBkMTIsIFNUUiwgU1RSK0NPTi4gUmFnZSwgVW5hcm1vcmVkIERlZmVuc2UgKDEwK0NPTitERVgpLCBSZWNrbGVzcyBBdHRhY2sKLSBCYXJkOiBkOCwgQ0hBLCBERVgrQ0hBLiBTcGVsbGNhc3RpbmcsIEJhcmRpYyBJbnNwaXJhdGlvbiwgSmFjayBvZiBBbGwgVHJhZGVzCi0gQ2xlcmljOiBkOCwgV0lTLCBXSVMrQ0hBLiBTcGVsbGNhc3RpbmcsIERpdmluZSBEb21haW4sIENoYW5uZWwgRGl2aW5pdHkKLSBEcnVpZDogZDgsIFdJUywgSU5UK1dJUy4gU3BlbGxjYXN0aW5nLCBXaWxkIFNoYXBlLCBEcnVpZCBDaXJjbGUKLSBGaWdodGVyOiBkMTAsIFNUUiBvciBERVgsIFNUUitDT04uIEZpZ2h0aW5nIFN0eWxlLCBTZWNvbmQgV2luZCwgQWN0aW9uIFN1cmdlCi0gTW9uazogZDgsIERFWCtXSVMsIFNUUitERVguIE1hcnRpYWwgQXJ0cywgS2ksIFVuYXJtb3JlZCBEZWZlbnNlICgxMCtERVgrV0lTKQotIFBhbGFkaW46IGQxMCwgU1RSK0NIQSwgV0lTK0NIQS4gTGF5IG9uIEhhbmRzLCBEaXZpbmUgU21pdGUsIEF1cmEgb2YgUHJvdGVjdGlvbgotIFJhbmdlcjogZDEwLCBERVgrV0lTLCBTVFIrREVYLiBGYXZvcmVkIEVuZW15LCBOYXR1cmFsIEV4cGxvcmVyLCBTcGVsbGNhc3RpbmcKLSBSb2d1ZTogZDgsIERFWCwgREVYK0lOVC4gU25lYWsgQXR0YWNrLCBDdW5uaW5nIEFjdGlvbiwgRXhwZXJ0aXNlCi0gU29yY2VyZXI6IGQ2LCBDSEEsIENPTitDSEEuIFNwZWxsY2FzdGluZywgU29yY2Vyb3VzIE9yaWdpbiwgRm9udCBvZiBNYWdpYwotIFdhcmxvY2s6IGQ4LCBDSEEsIFdJUytDSEEuIFBhY3QgTWFnaWMgKHNob3J0IHJlc3Qgc2xvdHMpLCBFbGRyaXRjaCBJbnZvY2F0aW9ucwotIFdpemFyZDogZDYsIElOVCwgSU5UK1dJUy4gU3BlbGxjYXN0aW5nLCBBcmNhbmUgUmVjb3ZlcnksIFNwZWxsIE1hc3RlcnkKCkJBQ0tHUk9VTkRTIChza2lsbCBwcm9maWNpZW5jaWVzKToKQWNvbHl0ZTogSW5zaWdodCtSZWxpZ2lvbiB8IENyaW1pbmFsOiBEZWNlcHRpb24rU3RlYWx0aCB8IEZvbGsgSGVybzogQW5pbWFsIEhhbmRsaW5nK1N1cnZpdmFsCk5vYmxlOiBIaXN0b3J5K1BlcnN1YXNpb24gfCBTYWdlOiBBcmNhbmErSGlzdG9yeSB8IFNvbGRpZXI6IEF0aGxldGljcytJbnRpbWlkYXRpb24KQ2hhcmxhdGFuOiBEZWNlcHRpb24rU2xlaWdodCBvZiBIYW5kIHwgRW50ZXJ0YWluZXI6IEFjcm9iYXRpY3MrUGVyZm9ybWFuY2UKR3VpbGQgQXJ0aXNhbjogSW5zaWdodCtQZXJzdWFzaW9uIHwgSGVybWl0OiBNZWRpY2luZStSZWxpZ2lvbiB8IE91dGxhbmRlcjogQXRobGV0aWNzK1N1cnZpdmFsClNhaWxvcjogQXRobGV0aWNzK1BlcmNlcHRpb24gfCBVcmNoaW46IFNsZWlnaHQgb2YgSGFuZCtTdGVhbHRoCgpTS0lMTFMgKGFiaWxpdHkpOiBBY3JvYmF0aWNzKERFWCkgQW5pbWFsIEhhbmRsaW5nKFdJUykgQXJjYW5hKElOVCkgQXRobGV0aWNzKFNUUikKRGVjZXB0aW9uKENIQSkgSGlzdG9yeShJTlQpIEluc2lnaHQoV0lTKSBJbnRpbWlkYXRpb24oQ0hBKSBJbnZlc3RpZ2F0aW9uKElOVCkKTWVkaWNpbmUoV0lTKSBOYXR1cmUoSU5UKSBQZXJjZXB0aW9uKFdJUykgUGVyZm9ybWFuY2UoQ0hBKSBQZXJzdWFzaW9uKENIQSkKUmVsaWdpb24oSU5UKSBTbGVpZ2h0IG9mIEhhbmQoREVYKSBTdGVhbHRoKERFWCkgU3Vydml2YWwoV0lTKQoKSFAgQ0FMQ1VMQVRJT046IE1heCBIUCA9IGhpdCBkaWUgbWF4ICsgQ09OIG1vZGlmaWVyICsgKGxldmVsLTEpIMOXIChhdmcgaGl0IGRpZSArIENPTiBtb2RpZmllcikKQUMgKHVuYXJtb3JlZCk6IDEwICsgREVYIG1vZGlmaWVyICh1bmxlc3MgY2xhc3MgZmVhdHVyZSBjaGFuZ2VzIHRoaXMpCkluaXRpYXRpdmU6IERFWCBtb2RpZmllcgpTcGVsbCBTYXZlIERDOiA4ICsgcHJvZmljaWVuY3kgYm9udXMgKyBzcGVsbGNhc3RpbmcgYWJpbGl0eSBtb2RpZmllcgpTcGVsbCBBdHRhY2s6IHByb2ZpY2llbmN5IGJvbnVzICsgc3BlbGxjYXN0aW5nIGFiaWxpdHkgbW9kaWZpZXIKIiIiCgojIOKUgOKUgOKUgCBXSVpBUkQgU1RFUCBQUk9NUFRTIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZGVmIHN0ZXBfcHJvbXB0KHN0ZXA6IHN0ciwgYnVpbGQ6IGRpY3QsIHVzZXJfbWVzc2FnZTogc3RyKSAtPiBsaXN0OgogICAgIiIiQnVpbGQgYSBtZXNzYWdlcyBsaXN0IGZvciBhIHNwZWNpZmljIHdpemFyZCBzdGVwLiIiIgogICAgYnVpbGRfc3VtbWFyeSA9IF9idWlsZF9zdW1tYXJ5KGJ1aWxkKQoKICAgIHN0ZXBfY29udGV4dHMgPSB7CiAgICAgICAgInJhY2UiOiBmIiIiWW91IGFyZSBhIEQmRCA1ZSBleHBlcnQgRE0gaGVscGluZyBhIHBsYXllciBjaG9vc2UgdGhlaXIgUkFDRS4KQ3VycmVudCBidWlsZDoge2J1aWxkX3N1bW1hcnl9CkV4cGxhaW4gdGhlIGNob3NlbiByYWNlJ3MgdHJhaXRzIGFuZCBhYmlsaXR5IGJvbnVzZXMuIFRlbGwgdGhlIHBsYXllciBob3cgdGhpcyByYWNlIHN5bmVyZ2l6ZXMgKG9yIGRvZXNuJ3QpIHdpdGggYW55IGNsYXNzIHRoZXkndmUgbWVudGlvbmVkLgpCZSBzcGVjaWZpYzogZ2l2ZSBleGFjdCBib251c2VzLCB0cmFpdHMsIGFuZCBob3cgdGhleSBhZmZlY3QgZ2FtZXBsYXkuIEtlZXAgaXQgdW5kZXIgMTIwIHdvcmRzLiBFbmQgd2l0aCBvbmUgZm9jdXNlZCBxdWVzdGlvbiBvciByZWNvbW1lbmRhdGlvbi4iIiIsCgogICAgICAgICJjbGFzcyI6IGYiIiJZb3UgYXJlIGEgRCZEIDVlIGV4cGVydCBETSBoZWxwaW5nIGEgcGxheWVyIGNob29zZSB0aGVpciBDTEFTUy4KQ3VycmVudCBidWlsZDoge2J1aWxkX3N1bW1hcnl9CkV4cGxhaW4gdGhlIGNob3NlbiBjbGFzcydzIHJvbGUsIGhpdCBkaWUsIHByaW1hcnkgYWJpbGl0eSwgc2F2aW5nIHRocm93cywgYW5kIGtleSBsZXZlbCAxLTIgZmVhdHVyZXMuClRlbGwgdGhlbSB3aGF0IGFiaWxpdHkgc2NvcmVzIHRvIHByaW9yaXRpemUgZ2l2ZW4gdGhlaXIgcmFjZSBjaG9pY2UuIEtlZXAgaXQgdW5kZXIgMTUwIHdvcmRzLiBFbmQgd2l0aCBhIHNwZWNpZmljIHRpcCBhYm91dCB0aGVpciBjb21iaW5hdGlvbi4iIiIsCgogICAgICAgICJiYWNrZ3JvdW5kIjogZiIiIllvdSBhcmUgYSBEJkQgNWUgZXhwZXJ0IERNIGhlbHBpbmcgYSBwbGF5ZXIgY2hvb3NlIHRoZWlyIEJBQ0tHUk9VTkQuCkN1cnJlbnQgYnVpbGQ6IHtidWlsZF9zdW1tYXJ5fQpFeHBsYWluIHRoZSBiYWNrZ3JvdW5kJ3Mgc2tpbGwgcHJvZmljaWVuY2llcyBhbmQgZmVhdHVyZS4gVGVsbCB0aGVtIGhvdyBpdCBmaXRzIHRoZWlyIHJhY2UrY2xhc3MgY29tYm8gbmFycmF0aXZlbHkgYW5kIG1lY2hhbmljYWxseS4KS2VlcCBpdCB1bmRlciAxMDAgd29yZHMuIiIiLAoKICAgICAgICAiYWJpbGl0aWVzIjogZiIiIllvdSBhcmUgYSBEJkQgNWUgZXhwZXJ0IERNIGhlbHBpbmcgYSBwbGF5ZXIgYXNzaWduIEFCSUxJVFkgU0NPUkVTLgpDdXJyZW50IGJ1aWxkOiB7YnVpbGRfc3VtbWFyeX0Ke1NSRF9QUk9NUFRfU1VNTUFSWX0KR2l2ZW4gdGhlaXIgcmFjZSBhbmQgY2xhc3MsIHJlY29tbWVuZCBleGFjdGx5IGhvdyB0byBhc3NpZ24gdGhlIHN0YW5kYXJkIGFycmF5ICgxNSwxNCwxMywxMiwxMCw4KSB0byB0aGVpciBzaXggc3RhdHMuCkJlIHNwZWNpZmljOiAiUHV0IDE1IGluIFNUUiwgMTQgaW4gQ09OLi4uIiBldGMuIEV4cGxhaW4gd2h5IGVhY2ggcGxhY2VtZW50IG1hdHRlcnMgZm9yIHRoZWlyIGNsYXNzLiBVbmRlciAxNTAgd29yZHMuIiIiLAoKICAgICAgICAicGVyc29uYWxpdHkiOiBmIiIiWW91IGFyZSBhIEQmRCA1ZSBleHBlcnQgRE0gaGVscGluZyBhIHBsYXllciBkZWZpbmUgdGhlaXIgQ0hBUkFDVEVSIFBFUlNPTkFMSVRZLgpDdXJyZW50IGJ1aWxkOiB7YnVpbGRfc3VtbWFyeX0KSGVscCB0aGVtIHdyaXRlIGEgUGVyc29uYWxpdHkgVHJhaXQsIElkZWFsLCBCb25kLCBhbmQgRmxhdyB0aGF0IGZpdCB0aGVpciByYWNlL2NsYXNzL2JhY2tncm91bmQgY29tYm8uCkdpdmUgY29uY3JldGUgc3VnZ2VzdGlvbnMg4oCUIGRvbid0IGJlIHZhZ3VlLiBVbmRlciAxMjAgd29yZHMuIiIiLAoKICAgICAgICAiZ2VuZXJhbCI6IGYiIiJZb3UgYXJlIGEgRCZEIDVlIGV4cGVydCBETSBoZWxwaW5nIGEgcGxheWVyIGJ1aWxkIHRoZWlyIGNoYXJhY3Rlci4KQ3VycmVudCBidWlsZDoge2J1aWxkX3N1bW1hcnl9CntTUkRfUFJPTVBUX1NVTU1BUll9CkFuc3dlciB0aGUgcGxheWVyJ3MgcXVlc3Rpb24gYWNjdXJhdGVseSB1c2luZyBTUkQgNWUgcnVsZXMgb25seS4gQmUgc3BlY2lmaWMgYW5kIGNvbmNpc2UuIFVuZGVyIDE1MCB3b3Jkcy4iIiIsCiAgICB9CgogICAgc3lzdGVtID0gc3RlcF9jb250ZXh0cy5nZXQoc3RlcCwgc3RlcF9jb250ZXh0c1siZ2VuZXJhbCJdKQoKICAgIHJldHVybiBbCiAgICAgICAgeyJyb2xlIjogInN5c3RlbSIsICJjb250ZW50Ijogc3lzdGVtICsgIlxuXG4iICsgU1JEX1BST01QVF9TVU1NQVJZfSwKICAgICAgICB7InJvbGUiOiAidXNlciIsICJjb250ZW50IjogdXNlcl9tZXNzYWdlfQogICAgXQoKZGVmIF9idWlsZF9zdW1tYXJ5KGJ1aWxkOiBkaWN0KSAtPiBzdHI6CiAgICBwYXJ0cyA9IFtdCiAgICBpZiBidWlsZC5nZXQoIm5hbWUiKTogcGFydHMuYXBwZW5kKGYiTmFtZToge2J1aWxkWyduYW1lJ119IikKICAgIGlmIGJ1aWxkLmdldCgicmFjZSIpOiBwYXJ0cy5hcHBlbmQoZiJSYWNlOiB7YnVpbGRbJ3JhY2UnXX0iKQogICAgaWYgYnVpbGQuZ2V0KCJjaGFyX2NsYXNzIik6IHBhcnRzLmFwcGVuZChmIkNsYXNzOiB7YnVpbGRbJ2NoYXJfY2xhc3MnXX0iKQogICAgaWYgYnVpbGQuZ2V0KCJiYWNrZ3JvdW5kIik6IHBhcnRzLmFwcGVuZChmIkJhY2tncm91bmQ6IHtidWlsZFsnYmFja2dyb3VuZCddfSIpCiAgICBpZiBidWlsZC5nZXQoImxldmVsIik6IHBhcnRzLmFwcGVuZChmIkxldmVsOiB7YnVpbGRbJ2xldmVsJ119IikKICAgIGZvciBzdGF0IGluIFsic3RyZW5ndGgiLCJkZXh0ZXJpdHkiLCJjb25zdGl0dXRpb24iLCJpbnRlbGxpZ2VuY2UiLCJ3aXNkb20iLCJjaGFyaXNtYSJdOgogICAgICAgIGlmIGJ1aWxkLmdldChzdGF0KTogcGFydHMuYXBwZW5kKGYie3N0YXRbOjNdLnVwcGVyKCl9OiB7YnVpbGRbc3RhdF19IikKICAgIHJldHVybiAiLCAiLmpvaW4ocGFydHMpIGlmIHBhcnRzIGVsc2UgIkp1c3Qgc3RhcnRpbmcgb3V0IgoKIyDilIDilIDilIAgQUkgTlBDIEdFTkVSQVRPUiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCk5QQ19HRU5FUkFUSU9OX1BST01QVCA9ICIiIllvdSBhcmUgYSBEJkQgNWUgZXhwZXJ0LiBHZW5lcmF0ZSBhIGNvbXBsZXRlIE5QQy9tb25zdGVyIHN0YXQgYmxvY2sgZnJvbSBhIGRlc2NyaXB0aW9uLgpZb3UgTVVTVCByZXNwb25kIHdpdGggT05MWSB2YWxpZCBKU09OIOKAlCBubyBtYXJrZG93biwgbm8gZXhwbGFuYXRpb24sIGp1c3QgdGhlIEpTT04gb2JqZWN0LgoKe3NyZH0KCkdlbmVyYXRlIGEgc3RhdCBibG9jayBmb2xsb3dpbmcgdGhlc2UgZXhhY3QgRCZEIDVlIHJ1bGVzOgotIEhQID0gaGl0IGRpZSBtYXggKyBDT04gbW9kICsgKGxldmVsLTEpIMOXIChhdmcgaGl0IGRpZSArIENPTiBtb2QpICAKLSBBQyA9IDEwICsgREVYIG1vZCBpZiB1bmFybW9yZWQsIG9yIGFwcHJvcHJpYXRlIGFybW9yCi0gUHJvZmljaWVuY3kgYm9udXMgYmFzZWQgb24gQ1IvbGV2ZWwgKDEtND0rMiwgNS04PSszLCA5LTEyPSs0LCAxMy0xNj0rNSwgMTctMjA9KzYpCi0gQWxsIDYgYWJpbGl0eSBzY29yZXMgKHJlYXNvbmFibGUgZm9yIHRoZSBjcmVhdHVyZSB0eXBlLCAzLTIwIHJhbmdlIGZvciBodW1hbm9pZHMsIHVwIHRvIDMwIGZvciBwb3dlcmZ1bCBtb25zdGVycykKClJldHVybiBleGFjdGx5IHRoaXMgSlNPTiBzdHJ1Y3R1cmU6Cnt7CiAgIm5hbWUiOiAic3RyaW5nIiwKICAicmFjZSI6ICJzdHJpbmcgKGNyZWF0dXJlIHR5cGU6IEh1bWFub2lkLCBVbmRlYWQsIEJlYXN0LCBldGMpIiwKICAiY2hhcl9jbGFzcyI6ICJzdHJpbmcgKEZpZ2h0ZXIvUm9ndWUvV2l6YXJkIGV0YyBvciBNb25zdGVyIFR5cGUpIiwKICAibGV2ZWwiOiBudW1iZXIsCiAgImFsaWdubWVudCI6ICJzdHJpbmciLAogICJzdHJlbmd0aCI6IG51bWJlciwKICAiZGV4dGVyaXR5IjogbnVtYmVyLAogICJjb25zdGl0dXRpb24iOiBudW1iZXIsCiAgImludGVsbGlnZW5jZSI6IG51bWJlciwKICAid2lzZG9tIjogbnVtYmVyLAogICJjaGFyaXNtYSI6IG51bWJlciwKICAiYXJtb3JfY2xhc3MiOiBudW1iZXIsCiAgIm1heF9ocCI6IG51bWJlciwKICAic3BlZWQiOiBudW1iZXIsCiAgIm5vdGVzIjogInN0cmluZyAoc3BlY2lhbCBhYmlsaXRpZXMsIGF0dGFja3MsIHRyYWl0cyDigJQgYmUgc3BlY2lmaWMgd2l0aCBkaWNlIG5vdGF0aW9uKSIsCiAgInJlYXNvbmluZyI6ICJzdHJpbmcgKGJyaWVmIGV4cGxhbmF0aW9uIG9mIHN0YXQgY2hvaWNlcykiCn19CgpOUEMgRGVzY3JpcHRpb246IHtkZXNjcmlwdGlvbn0iIiIKCmRlZiBnZW5lcmF0ZV9ucGModXJsOiBzdHIsIG1vZGVsOiBzdHIsIGRlc2NyaXB0aW9uOiBzdHIpIC0+IGRpY3QgfCBzdHI6CiAgICAiIiJHZW5lcmF0ZSBhIGZ1bGwgTlBDIHN0YXQgYmxvY2sgZnJvbSBhIHRleHQgZGVzY3JpcHRpb24uIFJldHVybnMgZGljdCBvciBlcnJvciBzdHJpbmcuIiIiCiAgICBwcm9tcHQgPSBOUENfR0VORVJBVElPTl9QUk9NUFQuZm9ybWF0KHNyZD1TUkRfUFJPTVBUX1NVTU1BUlksIGRlc2NyaXB0aW9uPWRlc2NyaXB0aW9uKQogICAgcmF3ID0gc2ltcGxlX2NvbXBsZXRpb24odXJsLCBtb2RlbCwgcHJvbXB0LCB0aW1lb3V0PTEyMCkKCiAgICAjIFRyeSB0byBwYXJzZSBKU09OIGZyb20gdGhlIHJlc3BvbnNlCiAgICBpbXBvcnQgcmUKICAgICMgU3RyaXAgbWFya2Rvd24gY29kZSBibG9ja3MgaWYgcHJlc2VudAogICAgcmF3ID0gcmUuc3ViKHInYGBganNvblxzKicsICcnLCByYXcpCiAgICByYXcgPSByZS5zdWIocidgYGBccyonLCAnJywgcmF3KQogICAgcmF3ID0gcmF3LnN0cmlwKCkKCiAgICAjIEZpbmQgSlNPTiBvYmplY3QgaW4gcmVzcG9uc2UKICAgIG1hdGNoID0gcmUuc2VhcmNoKHInXHsuKlx9JywgcmF3LCByZS5ET1RBTEwpCiAgICBpZiBtYXRjaDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRhdGEgPSBqc29uLmxvYWRzKG1hdGNoLmdyb3VwKCkpCiAgICAgICAgICAgIHJldHVybiBkYXRhCiAgICAgICAgZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yOgogICAgICAgICAgICBwYXNzCgogICAgcmV0dXJuIGYiQ291bGQgbm90IHBhcnNlIEFJIHJlc3BvbnNlLiBSYXc6IHtyYXdbOjMwMF19Igo="
[System.IO.File]::WriteAllBytes("$root\services\ollama_service.py", [System.Convert]::FromBase64String($b))

# routes\characters.py
$b = "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwppbXBvcnQganNvbgpmcm9tIGZsYXNrIGltcG9ydCBCbHVlcHJpbnQsIHJlbmRlcl90ZW1wbGF0ZSwgcmVkaXJlY3QsIHVybF9mb3IsIHNlc3Npb24sIGZsYXNoLCByZXF1ZXN0LCBqc29uaWZ5LCBjdXJyZW50X2FwcApmcm9tIGRiIGltcG9ydCBkYgpmcm9tIG1vZGVscyBpbXBvcnQgQ2hhcmFjdGVyLCBDYW1wYWlnbiwgQ2FtcGFpZ25NZW1iZXJzaGlwCmZyb20gc2VydmljZXMgaW1wb3J0IHNyZF9zZXJ2aWNlCmZyb20gc2VydmljZXMub2xsYW1hX3NlcnZpY2UgaW1wb3J0IHN0ZXBfcHJvbXB0LCBvbGxhbWFfY2hhdCwgZ2VuZXJhdGVfbnBjLCBvbGxhbWFfaGVhbHRoCgpjaGFyYWN0ZXJzX2JwID0gQmx1ZXByaW50KCJjaGFyYWN0ZXJzIiwgX19uYW1lX18sIHVybF9wcmVmaXg9Ii9jaGFyYWN0ZXJzIikKCmRlZiBfcmVxdWlyZV9sb2dpbigpOgogICAgaWYgbm90IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIik6CiAgICAgICAgZmxhc2goIlBsZWFzZSBsb2cgaW4uIiwgImVycm9yIikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgpkZWYgX2Nhbl9lZGl0X2NoYXJhY3RlcihjaGFyKToKICAgIHVpZCA9IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIikKICAgIHJvbGUgPSBzZXNzaW9uLmdldCgicm9sZSIpCiAgICBpZiByb2xlID09ICJhZG1pbiI6IHJldHVybiBUcnVlCiAgICBpZiByb2xlID09ICJkbSI6CiAgICAgICAgaWYgY2hhci5jYW1wYWlnbl9pZDoKICAgICAgICAgICAgYyA9IENhbXBhaWduLnF1ZXJ5LmdldChjaGFyLmNhbXBhaWduX2lkKQogICAgICAgICAgICBpZiBjIGFuZCBjLmRtX2lkID09IHVpZDogcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gY2hhci5pc19ucGMKICAgIHJldHVybiBjaGFyLm93bmVyX2lkID09IHVpZAoKZGVmIF9jYW5fZGVsZXRlX2NoYXJhY3RlcihjaGFyKToKICAgIHVpZCA9IHNlc3Npb24uZ2V0KCJ1c2VyX2lkIikKICAgIHJvbGUgPSBzZXNzaW9uLmdldCgicm9sZSIpCiAgICBpZiByb2xlID09ICJhZG1pbiI6IHJldHVybiBUcnVlCiAgICBpZiByb2xlID09ICJkbSI6CiAgICAgICAgaWYgY2hhci5pc19ucGM6IHJldHVybiBUcnVlCiAgICAgICAgaWYgY2hhci5jYW1wYWlnbl9pZDoKICAgICAgICAgICAgYyA9IENhbXBhaWduLnF1ZXJ5LmdldChjaGFyLmNhbXBhaWduX2lkKQogICAgICAgICAgICBpZiBjIGFuZCBjLmRtX2lkID09IHVpZDogcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBjaGFyLm93bmVyX2lkID09IHVpZCBhbmQgbm90IGNoYXIuaXNfbnBjCgpAY2hhcmFjdGVyc19icC5nZXQoIi9uZXciKQpkZWYgbmV3KCk6CiAgICBpZiBub3QgX3JlcXVpcmVfbG9naW4oKToKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiYXV0aC5sb2dpbl9nZXQiKSkKICAgIGNhbXBhaWduX2lkID0gcmVxdWVzdC5hcmdzLmdldCgiY2FtcGFpZ25faWQiLCB0eXBlPWludCkKICAgIGlzX25wYyA9IHJlcXVlc3QuYXJncy5nZXQoIm5wYyIsICJmYWxzZSIpLmxvd2VyKCkgPT0gInRydWUiCiAgICByb2xlID0gc2Vzc2lvbi5nZXQoInJvbGUiKQogICAgaWYgaXNfbnBjIGFuZCByb2xlIG5vdCBpbiAoImRtIiwgImFkbWluIik6CiAgICAgICAgZmxhc2goIk9ubHkgRE1zIGFuZCBBZG1pbnMgY2FuIGNyZWF0ZSBOUENzLiIsICJlcnJvciIpCiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICBvbGxhbWFfdXJsID0gY3VycmVudF9hcHAuY29uZmlnWyJPTExBTUFfVVJMIl0KICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoImNoYXJhY3RlcnMvd2l6YXJkLmh0bWwiLAogICAgICAgIGNhbXBhaWduX2lkPWNhbXBhaWduX2lkLAogICAgICAgIGlzX25wYz1pc19ucGMsCiAgICAgICAgcmFjZXM9c3JkX3NlcnZpY2UuU1JEX1JBQ0VTLAogICAgICAgIGNsYXNzZXM9c3JkX3NlcnZpY2UuU1JEX0NMQVNTRVMsCiAgICAgICAgYmFja2dyb3VuZHM9c3JkX3NlcnZpY2UuU1JEX0JBQ0tHUk9VTkRTLAogICAgICAgIGFsaWdubWVudHM9c3JkX3NlcnZpY2UuU1JEX0FMSUdOTUVOVFMsCiAgICAgICAgc2tpbGxzPXNyZF9zZXJ2aWNlLkFMTF9TS0lMTFMsCiAgICAgICAgb2xsYW1hX29rPW9sbGFtYV9oZWFsdGgob2xsYW1hX3VybCksCiAgICApCgpAY2hhcmFjdGVyc19icC5wb3N0KCIvY3JlYXRlIikKZGVmIGNyZWF0ZSgpOgogICAgaWYgbm90IF9yZXF1aXJlX2xvZ2luKCk6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICB1aWQgPSBzZXNzaW9uLmdldCgidXNlcl9pZCIpCiAgICByb2xlID0gc2Vzc2lvbi5nZXQoInJvbGUiKQogICAgZiA9IHJlcXVlc3QuZm9ybQogICAgY2FtcGFpZ25faWQgPSBmLmdldCgiY2FtcGFpZ25faWQiLCB0eXBlPWludCkKICAgIGlzX25wYyA9IGYuZ2V0KCJpc19ucGMiLCAiZmFsc2UiKS5sb3dlcigpID09ICJ0cnVlIgoKICAgIGlmIGlzX25wYyBhbmQgcm9sZSBub3QgaW4gKCJkbSIsICJhZG1pbiIpOgogICAgICAgIGZsYXNoKCJPbmx5IERNcyBhbmQgQWRtaW5zIGNhbiBjcmVhdGUgTlBDcy4iLCAiZXJyb3IiKQogICAgICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJhdXRoLmxvZ2luX2dldCIpKQoKICAgIGRlZiBzY29yZShrZXkpOiByZXR1cm4gbWF4KDEsIG1pbigzMCwgaW50KGYuZ2V0KGtleSwgMTApIG9yIDEwKSkpCgogICAgcmFjZV9uYW1lID0gZi5nZXQoInJhY2UiLCAiSHVtYW4iKQogICAgY2xhc3NfbmFtZSA9IGYuZ2V0KCJjaGFyX2NsYXNzIiwgIkZpZ2h0ZXIiKQogICAgYmdfbmFtZSA9IGYuZ2V0KCJiYWNrZ3JvdW5kIiwgIlNvbGRpZXIiKQogICAgbGV2ZWwgPSBtYXgoMSwgbWluKDMwLCBpbnQoZi5nZXQoImxldmVsIiwgMSkgb3IgMSkpKQogICAgYWxpZ25tZW50ID0gZi5nZXQoImFsaWdubWVudCIsICJUcnVlIE5ldXRyYWwiKQoKICAgIHNyZF9jbGFzcyA9IHNyZF9zZXJ2aWNlLmdldF9jbGFzcyhjbGFzc19uYW1lKSBvciB7fQogICAgaGl0X2RpZSA9IHNyZF9jbGFzcy5nZXQoImhpdF9kaWUiLCAiZDgiKQogICAgcHJvZiA9IHNyZF9zZXJ2aWNlLnByb2ZpY2llbmN5X2JvbnVzKG1pbihsZXZlbCwgMjApKQogICAgY29uX3Njb3JlID0gc2NvcmUoImNvbnN0aXR1dGlvbiIpCiAgICBkZXhfc2NvcmUgPSBzY29yZSgiZGV4dGVyaXR5IikKICAgIGNvbl9tb2QgPSBzcmRfc2VydmljZS5hYmlsaXR5X21vZGlmaWVyKGNvbl9zY29yZSkKICAgIGRleF9tb2QgPSBzcmRfc2VydmljZS5hYmlsaXR5X21vZGlmaWVyKGRleF9zY29yZSkKICAgIGhpdF9kaWVfdmFsID0gaW50KGhpdF9kaWVbMTpdKQogICAgYXV0b19ocCA9IG1heCgxLCBoaXRfZGllX3ZhbCArIGNvbl9tb2QgKyAobGV2ZWwgLSAxKSAqIChoaXRfZGllX3ZhbCAvLyAyICsgMSArIGNvbl9tb2QpKQogICAgYXV0b19hYyA9IDEwICsgZGV4X21vZAoKICAgIGhwX292ZXJyaWRlID0gZi5nZXQoImhwX292ZXJyaWRlIiwgIiIpLnN0cmlwKCkKICAgIGFjX292ZXJyaWRlID0gZi5nZXQoImFybW9yX2NsYXNzX292ZXJyaWRlIiwgIiIpLnN0cmlwKCkKICAgIG1heF9ocCA9IGludChocF9vdmVycmlkZSkgaWYgaHBfb3ZlcnJpZGUgYW5kIGhwX292ZXJyaWRlLmxzdHJpcCgnLScpLmlzZGlnaXQoKSBlbHNlIGF1dG9faHAKICAgIG1heF9ocCA9IG1heCgxLCBtYXhfaHApCiAgICBhcm1vcl9jbGFzcyA9IGludChhY19vdmVycmlkZSkgaWYgYWNfb3ZlcnJpZGUgYW5kIGFjX292ZXJyaWRlLmxzdHJpcCgnLScpLmlzZGlnaXQoKSBlbHNlIGF1dG9fYWMKICAgIHNwZWVkID0gbWF4KDAsIGludChmLmdldCgic3BlZWQiLCAzMCkgb3IgMzApKQoKICAgICMgUGVyc29uYWxpdHkgZmllbGRzCiAgICBwZXJzb25hbGl0eV90cmFpdCA9IGYuZ2V0KCJwZXJzb25hbGl0eV90cmFpdCIsICIiKQogICAgaWRlYWwgPSBmLmdldCgiaWRlYWwiLCAiIikKICAgIGJvbmQgPSBmLmdldCgiYm9uZCIsICIiKQogICAgZmxhdyA9IGYuZ2V0KCJmbGF3IiwgIiIpCiAgICB0cmFpdHNfanNvbiA9IGpzb24uZHVtcHMoewogICAgICAgICJwZXJzb25hbGl0eSI6IHBlcnNvbmFsaXR5X3RyYWl0LAogICAgICAgICJpZGVhbCI6IGlkZWFsLAogICAgICAgICJib25kIjogYm9uZCwKICAgICAgICAiZmxhdyI6IGZsYXcKICAgIH0pCgogICAgY2hhciA9IENoYXJhY3RlcigKICAgICAgICBvd25lcl9pZD11aWQgaWYgbm90IGlzX25wYyBlbHNlIE5vbmUsCiAgICAgICAgY2FtcGFpZ25faWQ9Y2FtcGFpZ25faWQsCiAgICAgICAgaXNfbnBjPWlzX25wYywKICAgICAgICBuYW1lPShmLmdldCgibmFtZSIpIG9yICIodW5uYW1lZCkiKS5zdHJpcCgpLAogICAgICAgIGxldmVsPWxldmVsLAogICAgICAgIGNoYXJfY2xhc3M9Y2xhc3NfbmFtZSwKICAgICAgICByYWNlPXJhY2VfbmFtZSwKICAgICAgICBiYWNrZ3JvdW5kPWJnX25hbWUsCiAgICAgICAgYWxpZ25tZW50PWFsaWdubWVudCwKICAgICAgICBzdHJlbmd0aD1zY29yZSgic3RyZW5ndGgiKSwKICAgICAgICBkZXh0ZXJpdHk9ZGV4X3Njb3JlLAogICAgICAgIGNvbnN0aXR1dGlvbj1jb25fc2NvcmUsCiAgICAgICAgaW50ZWxsaWdlbmNlPXNjb3JlKCJpbnRlbGxpZ2VuY2UiKSwKICAgICAgICB3aXNkb209c2NvcmUoIndpc2RvbSIpLAogICAgICAgIGNoYXJpc21hPXNjb3JlKCJjaGFyaXNtYSIpLAogICAgICAgIG1heF9ocD1tYXhfaHAsCiAgICAgICAgY3VycmVudF9ocD1tYXhfaHAsCiAgICAgICAgYXJtb3JfY2xhc3M9YXJtb3JfY2xhc3MsCiAgICAgICAgc3BlZWQ9c3BlZWQsCiAgICAgICAgcHJvZmljaWVuY3lfYm9udXM9cHJvZiwKICAgICAgICBoaXRfZGljZT1mIntsZXZlbH17aGl0X2RpZX0iLAogICAgICAgIGJ1aWxkX2NvbXBsZXRlPVRydWUsCiAgICAgICAgbm90ZXM9Zi5nZXQoIm5vdGVzIiwgIiIpLAogICAgICAgIHRyYWl0c19qc29uPXRyYWl0c19qc29uLAogICAgKQoKICAgIGJnID0gc3JkX3NlcnZpY2UuZ2V0X2JhY2tncm91bmQoYmdfbmFtZSkgb3Ige30KICAgICMgTWVyZ2UgYmFja2dyb3VuZCBza2lsbHMgKyBhbnkgY2xhc3Mgc2tpbGxzCiAgICBza2lsbHNfZGljdCA9IHtzOiBUcnVlIGZvciBzIGluIGJnLmdldCgic2tpbGxfcHJvZmljaWVuY2llcyIsIFtdKX0KICAgIGNoYXIuc2tpbGxzX2pzb24gPSBqc29uLmR1bXBzKHNraWxsc19kaWN0KQogICAgY2hhci5lcXVpcG1lbnRfanNvbiA9IGpzb24uZHVtcHMoYmcuZ2V0KCJlcXVpcG1lbnQiLCBbXSkpCgogICAgZmVhdHMgPSBbXQogICAgZm9yIGx2bCBpbiByYW5nZSgxLCBtaW4obGV2ZWwsIDIwKSArIDEpOgogICAgICAgIGZlYXRzLmV4dGVuZChzcmRfY2xhc3MuZ2V0KCJmZWF0dXJlc19ieV9sZXZlbCIsIHt9KS5nZXQobHZsLCBbXSkpCiAgICBjaGFyLmZlYXR1cmVzX2pzb24gPSBqc29uLmR1bXBzKGZlYXRzKQoKICAgICMgU2F2aW5nIHRocm93IHByb2ZpY2llbmNpZXMgZnJvbSBjbGFzcwogICAgc2F2ZXMgPSBzcmRfY2xhc3MuZ2V0KCJzYXZpbmdfdGhyb3dzIiwgW10pCiAgICBjaGFyLnNhdmluZ190aHJvd3NfanNvbiA9IGpzb24uZHVtcHMoe3M6IFRydWUgZm9yIHMgaW4gc2F2ZXN9KQoKICAgIGRiLnNlc3Npb24uYWRkKGNoYXIpCiAgICBkYi5zZXNzaW9uLmNvbW1pdCgpCgogICAgZmxhc2goZiJ7J05QQycgaWYgaXNfbnBjIGVsc2UgJ0NoYXJhY3Rlcid9ICd7Y2hhci5uYW1lfScgY3JlYXRlZCEiLCAib2siKQogICAgaWYgY2FtcGFpZ25faWQ6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImNhbXBhaWducy52aWV3IiwgY2lkPWNhbXBhaWduX2lkKSkKICAgIGlmIGlzX25wYzoKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiZG0uZGFzaGJvYXJkIikpCiAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigicGxheWVyLmRhc2hib2FyZCIpKQoKQGNoYXJhY3RlcnNfYnAuZ2V0KCIvPGludDpjaWQ+L3NoZWV0IikKZGVmIHNoZWV0KGNpZDogaW50KToKICAgIGlmIG5vdCBfcmVxdWlyZV9sb2dpbigpOgogICAgICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJhdXRoLmxvZ2luX2dldCIpKQogICAgY2hhciA9IENoYXJhY3Rlci5xdWVyeS5nZXRfb3JfNDA0KGNpZCkKICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoImNoYXJhY3RlcnMvc2hlZXQuaHRtbCIsCiAgICAgICAgY2hhcj1jaGFyLCBkYXRhPWNoYXIudG9fc2hlZXRfZGljdCgpLAogICAgICAgIGNhbl9lZGl0PV9jYW5fZWRpdF9jaGFyYWN0ZXIoY2hhciksCiAgICAgICAgY2FuX2RlbGV0ZT1fY2FuX2RlbGV0ZV9jaGFyYWN0ZXIoY2hhcikpCgpAY2hhcmFjdGVyc19icC5wb3N0KCIvPGludDpjaWQ+L2RlbGV0ZSIpCmRlZiBkZWxldGUoY2lkOiBpbnQpOgogICAgaWYgbm90IF9yZXF1aXJlX2xvZ2luKCk6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImF1dGgubG9naW5fZ2V0IikpCiAgICBjaGFyID0gQ2hhcmFjdGVyLnF1ZXJ5LmdldF9vcl80MDQoY2lkKQogICAgaWYgbm90IF9jYW5fZGVsZXRlX2NoYXJhY3RlcihjaGFyKToKICAgICAgICBmbGFzaCgiWW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byBkZWxldGUgdGhpcyBjaGFyYWN0ZXIuIiwgImVycm9yIikKICAgICAgICByZXR1cm4gcmVkaXJlY3QodXJsX2ZvcigiY2hhcmFjdGVycy5zaGVldCIsIGNpZD1jaWQpKQogICAgY2FtcGFpZ25faWQgPSBjaGFyLmNhbXBhaWduX2lkCiAgICBpc19ucGMgPSBjaGFyLmlzX25wYwogICAgZGIuc2Vzc2lvbi5kZWxldGUoY2hhcikKICAgIGRiLnNlc3Npb24uY29tbWl0KCkKICAgIGZsYXNoKCJDaGFyYWN0ZXIgZGVsZXRlZC4iLCAib2siKQogICAgaWYgY2FtcGFpZ25faWQ6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHVybF9mb3IoImNhbXBhaWducy52aWV3IiwgY2lkPWNhbXBhaWduX2lkKSkKICAgIHJldHVybiByZWRpcmVjdCh1cmxfZm9yKCJkbS5kYXNoYm9hcmQiKSBpZiBpc19ucGMgZWxzZSB1cmxfZm9yKCJwbGF5ZXIuZGFzaGJvYXJkIikpCgojIOKUgOKUgOKUgCBBSSBFTkRQT0lOVFMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpAY2hhcmFjdGVyc19icC5wb3N0KCIvYWlfc3RlcCIpCmRlZiBhaV9zdGVwKCk6CiAgICAiIiJBSSBndWlkYW5jZSBmb3IgZWFjaCB3aXphcmQgc3RlcCDigJQgcmV0dXJucyBjb250ZXh0dWFsIGFkdmljZS4iIiIKICAgIGlmIG5vdCBzZXNzaW9uLmdldCgidXNlcl9pZCIpOgogICAgICAgIHJldHVybiBqc29uaWZ5KHsiZXJyb3IiOiAiTm90IGxvZ2dlZCBpbiJ9KSwgNDAxCiAgICBkYXRhID0gcmVxdWVzdC5qc29uIG9yIHt9CiAgICBzdGVwID0gZGF0YS5nZXQoInN0ZXAiLCAiZ2VuZXJhbCIpCiAgICBidWlsZCA9IGRhdGEuZ2V0KCJidWlsZCIsIHt9KQogICAgdXNlcl9tZXNzYWdlID0gZGF0YS5nZXQoIm1lc3NhZ2UiLCBmIlRlbGwgbWUgYWJvdXQgdGhlIHtzdGVwfSBzdGVwLiIpCgogICAgdXJsID0gY3VycmVudF9hcHAuY29uZmlnWyJPTExBTUFfVVJMIl0KICAgIG1vZGVsID0gY3VycmVudF9hcHAuY29uZmlnWyJPTExBTUFfTU9ERUwiXQogICAgbWVzc2FnZXMgPSBzdGVwX3Byb21wdChzdGVwLCBidWlsZCwgdXNlcl9tZXNzYWdlKQogICAgcmVwbHkgPSBvbGxhbWFfY2hhdCh1cmwsIG1vZGVsLCBtZXNzYWdlcykKICAgIHJldHVybiBqc29uaWZ5KHsicmVwbHkiOiByZXBseX0pCgpAY2hhcmFjdGVyc19icC5wb3N0KCIvYWlfbnBjIikKZGVmIGFpX25wYygpOgogICAgIiIiQUkgZ2VuZXJhdGVzIGEgZnVsbCBOUEMgc3RhdCBibG9jayBmcm9tIGEgZGVzY3JpcHRpb24uIiIiCiAgICBpZiBub3Qgc2Vzc2lvbi5nZXQoInVzZXJfaWQiKToKICAgICAgICByZXR1cm4ganNvbmlmeSh7ImVycm9yIjogIk5vdCBsb2dnZWQgaW4ifSksIDQwMQogICAgcm9sZSA9IHNlc3Npb24uZ2V0KCJyb2xlIikKICAgIGlmIHJvbGUgbm90IGluICgiZG0iLCAiYWRtaW4iKToKICAgICAgICByZXR1cm4ganNvbmlmeSh7ImVycm9yIjogIkRNIGFjY2VzcyByZXF1aXJlZCJ9KSwgNDAzCgogICAgZGF0YSA9IHJlcXVlc3QuanNvbiBvciB7fQogICAgZGVzY3JpcHRpb24gPSAoZGF0YS5nZXQoImRlc2NyaXB0aW9uIikgb3IgIiIpLnN0cmlwKCkKICAgIGlmIG5vdCBkZXNjcmlwdGlvbjoKICAgICAgICByZXR1cm4ganNvbmlmeSh7ImVycm9yIjogIkRlc2NyaXB0aW9uIHJlcXVpcmVkIn0pLCA0MDAKCiAgICB1cmwgPSBjdXJyZW50X2FwcC5jb25maWdbIk9MTEFNQV9VUkwiXQogICAgbW9kZWwgPSBjdXJyZW50X2FwcC5jb25maWdbIk9MTEFNQV9NT0RFTCJdCiAgICByZXN1bHQgPSBnZW5lcmF0ZV9ucGModXJsLCBtb2RlbCwgZGVzY3JpcHRpb24pCgogICAgaWYgaXNpbnN0YW5jZShyZXN1bHQsIGRpY3QpOgogICAgICAgIHJldHVybiBqc29uaWZ5KHsib2siOiBUcnVlLCAibnBjIjogcmVzdWx0fSkKICAgIHJldHVybiBqc29uaWZ5KHsib2siOiBGYWxzZSwgImVycm9yIjogcmVzdWx0fSksIDUwMAo="
[System.IO.File]::WriteAllBytes("$root\routes\characters.py", [System.Convert]::FromBase64String($b))

# templates\characters\wizard.html
$b = "eyUgZXh0ZW5kcyAiYmFzZS5odG1sIiAlfQp7JSBibG9jayB0aXRsZSAlfXt7ICdDcmVhdGUgTlBDJyBpZiBpc19ucGMgZWxzZSAnQ3JlYXRlIENoYXJhY3RlcicgfX0g4oCUIENoYXJhY3RlckZvcmdleyUgZW5kYmxvY2sgJX0KeyUgYmxvY2sgY29udGVudCAlfQo8ZGl2IHN0eWxlPSJtYXgtd2lkdGg6ODYwcHgiPgoKPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4iIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPgogIDxkaXY+CiAgICA8aDE+e3sgJ0NyZWF0ZSBOUEMnIGlmIGlzX25wYyBlbHNlICdCdWlsZCBZb3VyIENoYXJhY3RlcicgfX08L2gxPgogICAgPHAgY2xhc3M9InN1YnRpdGxlIj57eyAnUXVpY2sgTlBDIHZpYSB0aGUgZnVsbCB3aXphcmQuJyBpZiBpc19ucGMgZWxzZSAnR3VpZGVkIGJ5IEFJIOKAlCBhbGwgcnVsZXMgZnJvbSBEJkQgNWUgU1JELicgfX08L3A+CiAgPC9kaXY+CiAgeyUgaWYgY2FtcGFpZ25faWQgJX0KICAgIDxhIGhyZWY9Ii9jYW1wYWlnbnMve3sgY2FtcGFpZ25faWQgfX0iIGNsYXNzPSJidG4gYnRuLWdob3N0IGJ0bi1zbSI+4oaQIENhbXBhaWduPC9hPgogIHslIGVsc2UgJX0KICAgIDxhIGhyZWY9Ii9wbGF5ZXIvIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBEYXNoYm9hcmQ8L2E+CiAgeyUgZW5kaWYgJX0KPC9kaXY+Cgo8IS0tIFN0ZXAgaW5kaWNhdG9yIC0tPgo8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcHMiIGlkPSJzdGVwLW5hdiI+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXN0ZXAgYWN0aXZlIiBkYXRhLXN0ZXA9IjAiPuKRoCBJZGVudGl0eTwvZGl2PgogIDxkaXYgY2xhc3M9IndpemFyZC1zdGVwIiBkYXRhLXN0ZXA9IjEiPuKRoSBSYWNlPC9kaXY+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXN0ZXAiIGRhdGEtc3RlcD0iMiI+4pGiIENsYXNzPC9kaXY+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXN0ZXAiIGRhdGEtc3RlcD0iMyI+4pGjIEJhY2tncm91bmQ8L2Rpdj4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcCIgZGF0YS1zdGVwPSI0Ij7ikaQgQWJpbGl0eSBTY29yZXM8L2Rpdj4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcCIgZGF0YS1zdGVwPSI1Ij7ikaUgUGVyc29uYWxpdHk8L2Rpdj4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc3RlcCIgZGF0YS1zdGVwPSI2Ij7ikaYgRmluYWxpemU8L2Rpdj4KPC9kaXY+Cgo8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iL2NoYXJhY3RlcnMvY3JlYXRlIiBpZD0iY2hhci1mb3JtIj4KICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjYW1wYWlnbl9pZCIgdmFsdWU9Int7IGNhbXBhaWduX2lkIG9yICcnIH19Ij4KICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJpc19ucGMiIHZhbHVlPSJ7eyAndHJ1ZScgaWYgaXNfbnBjIGVsc2UgJ2ZhbHNlJyB9fSI+CgogIDwhLS0g4pWQ4pWQIFNURVAgMTogSURFTlRJVFkg4pWQ4pWQIC0tPgogIDxkaXYgY2xhc3M9IndpemFyZC1zZWN0aW9uIiBpZD0ic3RlcC0wIj4KICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDFmcjtnYXA6MjBweDthbGlnbi1pdGVtczpzdGFydCI+CiAgICAgIDxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLWdvbGQiPgogICAgICAgIDxoMj5JZGVudGl0eTwvaDI+CiAgICAgICAgPGxhYmVsPkNoYXJhY3RlciBOYW1lPC9sYWJlbD4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibmFtZSIgaWQ9ImZpZWxkLW5hbWUiIHBsYWNlaG9sZGVyPSJXaGF0IGFyZSB5b3UgY2FsbGVkPyIgcmVxdWlyZWQ+CiAgICAgICAgPGxhYmVsPkxldmVsPC9sYWJlbD4KICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJsZXZlbCIgaWQ9ImZpZWxkLWxldmVsIiB2YWx1ZT0iMSIgbWluPSIxIiBtYXg9IjIwIj4KICAgICAgICA8bGFiZWw+QWxpZ25tZW50PC9sYWJlbD4KICAgICAgICA8c2VsZWN0IG5hbWU9ImFsaWdubWVudCIgaWQ9ImZpZWxkLWFsaWdubWVudCI+CiAgICAgICAgICB7JSBmb3IgYSBpbiBhbGlnbm1lbnRzICV9PG9wdGlvbj57eyBhIH19PC9vcHRpb24+eyUgZW5kZm9yICV9CiAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImdvU3RlcCgxKSI+TmV4dDogUmFjZSDihpI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGlmIG9sbGFtYV9vayAlfQogICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbCI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwtaGVhZGVyIj7wn46yIEFJIER1bmdlb24gTWFzdGVyPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktY2hhdC1ib3giIGlkPSJjaGF0LTAiPgogICAgICAgICAgPGRpdiBjbGFzcz0iYWktbXNnIGRtIj5XZWxjb21lLCBhZHZlbnR1cmVyISBUZWxsIG1lIHdoYXQga2luZCBvZiBjaGFyYWN0ZXIgeW91IHdhbnQgdG8gcGxheSDigJQgYSBjb25jZXB0LCBhIHZpYmUsIGFueXRoaW5nIOKAlCBhbmQgSSdsbCBoZWxwIGd1aWRlIHlvdXIgYnVpbGQgdGhyb3VnaCBlYWNoIHN0ZXAgdXNpbmcgRCZEIDVlIHJ1bGVzLjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtMCIgcGxhY2Vob2xkZXI9IkFzayBhbnl0aGluZyBhYm91dCB5b3VyIGNoYXJhY3RlciBjb25jZXB0Li4uIj4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtIiBvbmNsaWNrPSJhc2tBSSgwLCAnZ2VuZXJhbCcpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCAyOiBSQUNFIOKVkOKVkCAtLT4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc2VjdGlvbiIgaWQ9InN0ZXAtMSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjIwcHg7YWxpZ24taXRlbXM6c3RhcnQiPgogICAgICA8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1nb2xkIj4KICAgICAgICA8aDI+Q2hvb3NlIFJhY2U8L2gyPgogICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1ncmlkIiBpZD0icmFjZS1ncmlkIj4KICAgICAgICAgIHslIGZvciByIGluIHJhY2VzICV9CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtY2FyZCIgZGF0YS1uYW1lPSJ7eyByLm5hbWUgfX0iIG9uY2xpY2s9InNlbGVjdENob2ljZSgncmFjZScsICd7eyByLm5hbWUgfX0nLCB0aGlzKSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1uYW1lIj57eyByLm5hbWUgfX08L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hvaWNlLW1ldGEiPgogICAgICAgICAgICAgIHslIGZvciBzdGF0LCBib251cyBpbiByLmFiaWxpdHlfYm9udXNlcy5pdGVtcygpICV9CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIj4re3sgYm9udXMgfX0ge3sgc3RhdFs6M10udXBwZXIoKSB9fTwvc3Bhbj4KICAgICAgICAgICAgICB7JSBlbmRmb3IgJX0KICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIHNwZWVkIj57eyByLnNwZWVkIH19ZnQ8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtdHJhaXRzIj57eyByLnRyYWl0c1s6Ml0gfCBqb2luKCcgwrcgJykgfX08L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icmFjZSIgaWQ9ImZpZWxkLXJhY2UiIHZhbHVlPSJIdW1hbiI+CiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWdob3N0IiBvbmNsaWNrPSJnb1N0ZXAoMCkiPuKGkCBCYWNrPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0iZ29TdGVwKDIpIj5OZXh0OiBDbGFzcyDihpI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGlmIG9sbGFtYV9vayAlfQogICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbCI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwtaGVhZGVyIj7wn46yIEFJIOKAlCBSYWNlIEFkdmlzb3I8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1jaGF0LWJveCIgaWQ9ImNoYXQtMSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhaS1tc2cgZG0iPkNsaWNrIGEgcmFjZSBhbmQgSSdsbCBleHBsYWluIGl0cyB0cmFpdHMgYW5kIGhvdyBpdCBzeW5lcmdpemVzIHdpdGggZGlmZmVyZW50IGNsYXNzZXMuIE9yIGFzayBtZSB3aGljaCByYWNlIGZpdHMgeW91ciBjaGFyYWN0ZXIgY29uY2VwdC48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1pbnB1dC1yb3ciPgogICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJhaS1pbnB1dCIgaWQ9ImlucHV0LTEiIHBsYWNlaG9sZGVyPSJBc2sgYWJvdXQgYW55IHJhY2UuLi4iPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIG9uY2xpY2s9ImFza0FJKDEsICdyYWNlJykiPkFzazwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgZW5kaWYgJX0KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8IS0tIOKVkOKVkCBTVEVQIDM6IENMQVNTIOKVkOKVkCAtLT4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc2VjdGlvbiIgaWQ9InN0ZXAtMiIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjIwcHg7YWxpZ24taXRlbXM6c3RhcnQiPgogICAgICA8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1nb2xkIj4KICAgICAgICA8aDI+Q2hvb3NlIENsYXNzPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtZ3JpZCIgaWQ9ImNsYXNzLWdyaWQiPgogICAgICAgICAgeyUgZm9yIGMgaW4gY2xhc3NlcyAlfQogICAgICAgICAgPGRpdiBjbGFzcz0iY2hvaWNlLWNhcmQiIGRhdGEtbmFtZT0ie3sgYy5uYW1lIH19IiBvbmNsaWNrPSJzZWxlY3RDaG9pY2UoJ2NoYXJfY2xhc3MnLCAne3sgYy5uYW1lIH19JywgdGhpcykiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtbmFtZSI+e3sgYy5uYW1lIH19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1tZXRhIj4KICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYm9udXMtdGFnIj57eyBjLmhpdF9kaWUgfX08L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJvbnVzLXRhZyI+e3sgYy5wcmltYXJ5X2FiaWxpdHkgfX08L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtdHJhaXRzIj4KICAgICAgICAgICAgICB7JSBmb3IgZiBpbiBjLmZlYXR1cmVzX2J5X2xldmVsLmdldCgxLCBbXSlbOjJdICV9e3sgZiB9fXslIGlmIG5vdCBsb29wLmxhc3QgJX0gwrcgeyUgZW5kaWYgJX17JSBlbmRmb3IgJX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIHslIGVuZGZvciAlfQogICAgICAgIDwvZGl2PgogICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImNoYXJfY2xhc3MiIGlkPSJmaWVsZC1jaGFyX2NsYXNzIiB2YWx1ZT0iRmlnaHRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWdob3N0IiBvbmNsaWNrPSJnb1N0ZXAoMSkiPuKGkCBCYWNrPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0iZ29TdGVwKDMpIj5OZXh0OiBCYWNrZ3JvdW5kIOKGkjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgaWYgb2xsYW1hX29rICV9CiAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbC1oZWFkZXIiPvCfjrIgQUkg4oCUIENsYXNzIEFkdmlzb3I8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1jaGF0LWJveCIgaWQ9ImNoYXQtMiI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhaS1tc2cgZG0iPkNsaWNrIGEgY2xhc3MgYW5kIEknbGwgYnJlYWsgZG93biB3aGF0IGl0IGRvZXMgYXQgbGV2ZWwgMSwgd2hpY2ggc3RhdHMgbWF0dGVyIG1vc3QsIGFuZCBob3cgaXQgcGFpcnMgd2l0aCB5b3VyIGNob3NlbiByYWNlLjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtMiIgcGxhY2Vob2xkZXI9IkFzayBhYm91dCBhbnkgY2xhc3MuLi4iPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIG9uY2xpY2s9ImFza0FJKDIsICdjbGFzcycpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA0OiBCQUNLR1JPVU5EIOKVkOKVkCAtLT4KICA8ZGl2IGNsYXNzPSJ3aXphcmQtc2VjdGlvbiIgaWQ9InN0ZXAtMyIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjIwcHg7YWxpZ24taXRlbXM6c3RhcnQiPgogICAgICA8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1nb2xkIj4KICAgICAgICA8aDI+Q2hvb3NlIEJhY2tncm91bmQ8L2gyPgogICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1ncmlkIiBpZD0iYmctZ3JpZCI+CiAgICAgICAgICB7JSBmb3IgYiBpbiBiYWNrZ3JvdW5kcyAlfQogICAgICAgICAgPGRpdiBjbGFzcz0iY2hvaWNlLWNhcmQiIGRhdGEtbmFtZT0ie3sgYi5uYW1lIH19IiBvbmNsaWNrPSJzZWxlY3RDaG9pY2UoJ2JhY2tncm91bmQnLCAne3sgYi5uYW1lIH19JywgdGhpcykiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtbmFtZSI+e3sgYi5uYW1lIH19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNob2ljZS1tZXRhIj4KICAgICAgICAgICAgICB7JSBmb3IgcyBpbiBiLnNraWxsX3Byb2ZpY2llbmNpZXMgJX0KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJib251cy10YWciPnt7IHMgfX08L3NwYW4+CiAgICAgICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaG9pY2UtdHJhaXRzIj57eyBiLmZlYXR1cmUgfX08L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYmFja2dyb3VuZCIgaWQ9ImZpZWxkLWJhY2tncm91bmQiIHZhbHVlPSJTb2xkaWVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ3aXphcmQtbmF2LXJvdyI+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZ2hvc3QiIG9uY2xpY2s9ImdvU3RlcCgyKSI+4oaQIEJhY2s8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJnb1N0ZXAoNCkiPk5leHQ6IEFiaWxpdHkgU2NvcmVzIOKGkjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgaWYgb2xsYW1hX29rICV9CiAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbC1oZWFkZXIiPvCfjrIgQUkg4oCUIEJhY2tncm91bmQgQWR2aXNvcjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC0zIj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+QmFja2dyb3VuZHMgZ2l2ZSB5b3Ugc2tpbGwgcHJvZmljaWVuY2llcyBhbmQgYSBzcGVjaWFsIGZlYXR1cmUuIENsaWNrIG9uZSBhbmQgSSdsbCB0ZWxsIHlvdSBob3cgaXQgZml0cyB5b3VyIHJhY2UgYW5kIGNsYXNzLCBhbmQgd2hhdCBpdCBtZWFucyBmb3IgeW91ciBiYWNrc3RvcnkuPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYWktaW5wdXQtcm93Ij4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iYWktaW5wdXQiIGlkPSJpbnB1dC0zIiBwbGFjZWhvbGRlcj0iQXNrIGFib3V0IGJhY2tncm91bmRzLi4uIj4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtIiBvbmNsaWNrPSJhc2tBSSgzLCAnYmFja2dyb3VuZCcpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA1OiBBQklMSVRZIFNDT1JFUyDilZDilZAgLS0+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXNlY3Rpb24iIGlkPSJzdGVwLTQiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoyMHB4O2FsaWduLWl0ZW1zOnN0YXJ0Ij4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtZ29sZCI+CiAgICAgICAgPGgyPkFiaWxpdHkgU2NvcmVzPC9oMj4KICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLWJnMyk7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzoxMnB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6MTRweCI+CiAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJjb2xvcjp2YXIoLS1nb2xkKSI+U3RhbmRhcmQgQXJyYXk6PC9zdHJvbmc+CiAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC1kaW0iPiBBc3NpZ24gMTUsIDE0LCAxMywgMTIsIDEwLCA4IHRvIHRoZSBzaXggc3RhdHMuPC9zcGFuPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zZWNvbmRhcnkiIHN0eWxlPSJtYXJnaW4tbGVmdDo4cHgiIG9uY2xpY2s9ImFwcGx5U3RhbmRhcmRBcnJheSgpIj5BdXRvLUFwcGx5PC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktZ3JpZC1sYXJnZSI+CiAgICAgICAgICB7JSBmb3Igc3RhdCwgbGFiZWwgaW4gWygnc3RyZW5ndGgnLCdTdHJlbmd0aCcpLCgnZGV4dGVyaXR5JywnRGV4dGVyaXR5JyksKCdjb25zdGl0dXRpb24nLCdDb25zdGl0dXRpb24nKSwoJ2ludGVsbGlnZW5jZScsJ0ludGVsbGlnZW5jZScpLCgnd2lzZG9tJywnV2lzZG9tJyksKCdjaGFyaXNtYScsJ0NoYXJpc21hJyldICV9CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhYmlsaXR5LWJveC1sYXJnZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktbGFiZWwiPnt7IGxhYmVsIH19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFiaWxpdHktYWJiciI+e3sgbGFiZWxbOjNdLnVwcGVyKCkgfX08L2Rpdj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgbmFtZT0ie3sgc3RhdCB9fSIgaWQ9InNjb3JlLXt7IHN0YXQgfX0iCiAgICAgICAgICAgICAgY2xhc3M9ImFiaWxpdHktc2NvcmUtaW5wdXQiIHZhbHVlPSIxMCIgbWluPSIxIiBtYXg9IjIwIgogICAgICAgICAgICAgIG9uaW5wdXQ9InVwZGF0ZU1vZCgne3sgc3RhdCB9fScpIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWJpbGl0eS1tb2QiIGlkPSJtb2Qte3sgc3RhdCB9fSI+KzA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gUmFjaWFsIGJvbnVzIHByZXZpZXcgLS0+CiAgICAgICAgPGRpdiBpZD0icmFjaWFsLWJvbnVzLW5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOjEycHg7Zm9udC1zaXplOjEzcHg7Y29sb3I6dmFyKC0taW5rKTtmb250LXN0eWxlOml0YWxpYyI+PC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9IndpemFyZC1uYXYtcm93Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCIgb25jbGljaz0iZ29TdGVwKDMpIj7ihpAgQmFjazwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImdvU3RlcCg1KSI+TmV4dDogUGVyc29uYWxpdHkg4oaSPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICB7JSBpZiBvbGxhbWFfb2sgJX0KICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwiPgogICAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsLWhlYWRlciI+8J+OsiBBSSDigJQgU3RhdHMgQWR2aXNvcjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC00Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+SSdsbCByZWNvbW1lbmQgZXhhY3RseSBob3cgdG8gYXNzaWduIHRoZSBzdGFuZGFyZCBhcnJheSBmb3IgeW91ciByYWNlIGFuZCBjbGFzcy4gQ2xpY2sgIkdldCBSZWNvbW1lbmRhdGlvbiIgb3IgYXNrIG1lIGFueXRoaW5nIGFib3V0IHlvdXIgc3RhdHMuPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIHN0eWxlPSJ3aWR0aDoxMDAlIiBvbmNsaWNrPSJnZXRTdGF0UmVjb21tZW5kYXRpb24oKSI+8J+TiiBHZXQgQUkgU3RhdCBSZWNvbW1lbmRhdGlvbjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtNCIgcGxhY2Vob2xkZXI9IkFzayBhYm91dCBhYmlsaXR5IHNjb3Jlcy4uLiI+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGJ0bi1zbSIgb25jbGljaz0iYXNrQUkoNCwgJ2FiaWxpdGllcycpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA2OiBQRVJTT05BTElUWSDilZDilZAgLS0+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXNlY3Rpb24iIGlkPSJzdGVwLTUiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoyMHB4O2FsaWduLWl0ZW1zOnN0YXJ0Ij4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtZ29sZCI+CiAgICAgICAgPGgyPlBlcnNvbmFsaXR5PC9oMj4KICAgICAgICA8cCBjbGFzcz0idGV4dC1kaW0iIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPlRoZXNlIGRlZmluZSB3aG8geW91ciBjaGFyYWN0ZXIgaXMuIFRoZSBBSSBjYW4gc3VnZ2VzdCBhbGwgZm91ciBiYXNlZCBvbiB5b3VyIGJ1aWxkLjwvcD4KICAgICAgICA8bGFiZWw+UGVyc29uYWxpdHkgVHJhaXQ8L2xhYmVsPgogICAgICAgIDx0ZXh0YXJlYSBuYW1lPSJwZXJzb25hbGl0eV90cmFpdCIgaWQ9ImZpZWxkLXBlcnNvbmFsaXR5X3RyYWl0IiByb3dzPSIyIiBwbGFjZWhvbGRlcj0iSG93IGRvZXMgeW91ciBjaGFyYWN0ZXIgZ2VuZXJhbGx5IGJlaGF2ZT8iPjwvdGV4dGFyZWE+CiAgICAgICAgPGxhYmVsPklkZWFsPC9sYWJlbD4KICAgICAgICA8dGV4dGFyZWEgbmFtZT0iaWRlYWwiIGlkPSJmaWVsZC1pZGVhbCIgcm93cz0iMiIgcGxhY2Vob2xkZXI9IldoYXQgZG9lcyB5b3VyIGNoYXJhY3RlciBiZWxpZXZlIGluIGFib3ZlIGFsbD8iPjwvdGV4dGFyZWE+CiAgICAgICAgPGxhYmVsPkJvbmQ8L2xhYmVsPgogICAgICAgIDx0ZXh0YXJlYSBuYW1lPSJib25kIiBpZD0iZmllbGQtYm9uZCIgcm93cz0iMiIgcGxhY2Vob2xkZXI9IldoYXQgY29ubmVjdHMgeW91ciBjaGFyYWN0ZXIgdG8gdGhlIHdvcmxkPyI+PC90ZXh0YXJlYT4KICAgICAgICA8bGFiZWw+RmxhdzwvbGFiZWw+CiAgICAgICAgPHRleHRhcmVhIG5hbWU9ImZsYXciIGlkPSJmaWVsZC1mbGF3IiByb3dzPSIyIiBwbGFjZWhvbGRlcj0iV2hhdCB3ZWFrbmVzcyBvciB2aWNlIGhvbGRzIHlvdXIgY2hhcmFjdGVyIGJhY2s/Ij48L3RleHRhcmVhPgogICAgICAgIDxkaXYgY2xhc3M9IndpemFyZC1uYXYtcm93Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCIgb25jbGljaz0iZ29TdGVwKDQpIj7ihpAgQmFjazwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImdvU3RlcCg2KSI+TmV4dDogRmluYWxpemUg4oaSPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICB7JSBpZiBvbGxhbWFfb2sgJX0KICAgICAgPGRpdiBjbGFzcz0iYWktcGFuZWwiPgogICAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsLWhlYWRlciI+8J+OsiBBSSDigJQgUGVyc29uYWxpdHkgQWR2aXNvcjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC01Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+SSBjYW4gZ2VuZXJhdGUgcGVyc29uYWxpdHkgdHJhaXRzLCBpZGVhbHMsIGJvbmRzLCBhbmQgZmxhd3MgdGhhdCBmaXQgeW91ciBzcGVjaWZpYyByYWNlLCBjbGFzcywgYW5kIGJhY2tncm91bmQuIENsaWNrIHRoZSBidXR0b24gYmVsb3chPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIHN0eWxlPSJ3aWR0aDoxMDAlIiBvbmNsaWNrPSJnZXRQZXJzb25hbGl0eVN1Z2dlc3Rpb24oKSI+4pyoIEdlbmVyYXRlIFBlcnNvbmFsaXR5IGZvciBNeSBCdWlsZDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtNSIgcGxhY2Vob2xkZXI9IkRlc2NyaWJlIHlvdXIgY2hhcmFjdGVyIGNvbmNlcHQuLi4iPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBidG4tc20iIG9uY2xpY2s9ImFza0FJKDUsICdwZXJzb25hbGl0eScpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSDilZDilZAgU1RFUCA3OiBGSU5BTElaRSDilZDilZAgLS0+CiAgPGRpdiBjbGFzcz0id2l6YXJkLXNlY3Rpb24iIGlkPSJzdGVwLTYiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoyMHB4O2FsaWduLWl0ZW1zOnN0YXJ0Ij4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtZ29sZCI+CiAgICAgICAgPGgyPkZpbmFsaXplPC9oMj4KCiAgICAgICAgPCEtLSBCdWlsZCBzdW1tYXJ5IC0tPgogICAgICAgIDxkaXYgaWQ9ImJ1aWxkLXN1bW1hcnkiIHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLWJnMyk7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzoxNHB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoxLjgiPgogICAgICAgICAgTG9hZGluZyBzdW1tYXJ5Li4uCiAgICAgICAgPC9kaXY+CgogICAgICAgIDxsYWJlbD5BZGRpdGlvbmFsIE5vdGVzIC8gQmFja3N0b3J5PC9sYWJlbD4KICAgICAgICA8dGV4dGFyZWEgbmFtZT0ibm90ZXMiIHJvd3M9IjQiIHBsYWNlaG9sZGVyPSJBbnkgZXh0cmEgZGV0YWlscywgYmFja3N0b3J5LCBvciBub3RlcyBmb3IgeW91ciBETS4uLiI+PC90ZXh0YXJlYT4KCiAgICAgICAgPGRpdiBjbGFzcz0id2l6YXJkLW5hdi1yb3ciPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWdob3N0IiBvbmNsaWNrPSJnb1N0ZXAoNSkiPuKGkCBCYWNrPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9ImZvbnQtc2l6ZToxNXB4O3BhZGRpbmc6MTJweCAyOHB4Ij7impQgQ3JlYXRlIENoYXJhY3RlcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgeyUgaWYgb2xsYW1hX29rICV9CiAgICAgIDxkaXYgY2xhc3M9ImFpLXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhaS1wYW5lbC1oZWFkZXIiPvCfjrIgQUkg4oCUIEZpbmFsIFJldmlldzwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWNoYXQtYm94IiBpZD0iY2hhdC02Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9ImFpLW1zZyBkbSI+WW91ciBjaGFyYWN0ZXIgaXMgYWxtb3N0IHJlYWR5ISBBc2sgbWUgYW55dGhpbmcgYWJvdXQgeW91ciBidWlsZCDigJQgc3BlbGxzIHlvdSdsbCBoYXZlIGFjY2VzcyB0bywgc3RhcnRpbmcgZXF1aXBtZW50LCB3aGF0IHRvIGV4cGVjdCBhdCBsZXZlbCAxLCBvciBob3cgdG8gcGxheSB5b3VyIGNsYXNzIGVmZmVjdGl2ZWx5LjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImFpLWlucHV0LXJvdyI+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImFpLWlucHV0IiBpZD0iaW5wdXQtNiIgcGxhY2Vob2xkZXI9IkFueSBmaW5hbCBxdWVzdGlvbnM/Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtIiBvbmNsaWNrPSJhc2tBSSg2LCAnZ2VuZXJhbCcpIj5Bc2s8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIHslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KCjwvZm9ybT4KPC9kaXY+Cgo8c3R5bGU+Ci5jaG9pY2UtZ3JpZCB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxNjBweCwgMWZyKSk7CiAgZ2FwOiA4cHg7CiAgbWFyZ2luLWJvdHRvbTogMTZweDsKICBtYXgtaGVpZ2h0OiA0MjBweDsKICBvdmVyZmxvdy15OiBhdXRvOwogIHBhZGRpbmctcmlnaHQ6IDRweDsKfQouY2hvaWNlLWNhcmQgewogIGJhY2tncm91bmQ6IHZhcigtLWJnMyk7CiAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgcGFkZGluZzogMTBweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdHJhbnNpdGlvbjogYWxsIDAuMTVzOwp9Ci5jaG9pY2UtY2FyZDpob3ZlciB7IGJvcmRlci1jb2xvcjogdmFyKC0tYm9yZGVyLWdvbGQpOyB9Ci5jaG9pY2UtY2FyZC5zZWxlY3RlZCB7IGJvcmRlci1jb2xvcjogdmFyKC0tZ29sZCk7IGJhY2tncm91bmQ6IHJnYmEoMjAxLDE2OCw3NiwwLjA4KTsgfQouY2hvaWNlLW5hbWUgeyBmb250LWZhbWlseTogJ0NpbnplbCcsIHNlcmlmOyBmb250LXNpemU6IDEzcHg7IGNvbG9yOiB2YXIoLS1nb2xkKTsgbWFyZ2luLWJvdHRvbTogNnB4OyB9Ci5jaG9pY2UtbWV0YSB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiA0cHg7IG1hcmdpbi1ib3R0b206IDRweDsgfQouYm9udXMtdGFnIHsKICBmb250LXNpemU6IDExcHg7IGJhY2tncm91bmQ6IHJnYmEoMjAxLDE2OCw3NiwwLjEyKTsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDIwMSwxNjgsNzYsMC4yNSk7IGJvcmRlci1yYWRpdXM6IDNweDsKICBwYWRkaW5nOiAxcHggNXB4OyBjb2xvcjogdmFyKC0tZ29sZC1saWdodCk7Cn0KLmJvbnVzLXRhZy5zcGVlZCB7IGJhY2tncm91bmQ6IHJnYmEoMTA2LDE0MywxNzYsMC4xMik7IGJvcmRlci1jb2xvcjogcmdiYSgxMDYsMTQzLDE3NiwwLjMpOyBjb2xvcjogdmFyKC0taW5rKTsgfQouY2hvaWNlLXRyYWl0cyB7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6IHZhcigtLXRleHQtZGltKTsgbGluZS1oZWlnaHQ6IDEuNDsgfQoKLmFpLXBhbmVsIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZzIpOwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBwYWRkaW5nOiAxNHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDhweDsKfQouYWktcGFuZWwtaGVhZGVyIHsKICBmb250LWZhbWlseTogJ0NpbnplbCcsIHNlcmlmOwogIGZvbnQtc2l6ZTogMTNweDsKICBjb2xvcjogdmFyKC0tZ29sZCk7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgcGFkZGluZy1ib3R0b206IDhweDsKICBtYXJnaW4tYm90dG9tOiA0cHg7Cn0KLmFpLWNoYXQtYm94IHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZzMpOwogIGJvcmRlci1yYWRpdXM6IDZweDsKICBwYWRkaW5nOiAxMHB4OwogIGhlaWdodDogMjYwcHg7CiAgb3ZlcmZsb3cteTogYXV0bzsKICBmb250LXNpemU6IDE0cHg7CiAgZmxleDogMTsKfQouYWktbXNnIHsgbWFyZ2luLWJvdHRvbTogMTBweDsgbGluZS1oZWlnaHQ6IDEuNTsgcGFkZGluZzogNnB4IDhweDsgYm9yZGVyLXJhZGl1czogNXB4OyB9Ci5haS1tc2cuZG0geyBiYWNrZ3JvdW5kOiByZ2JhKDIwMSwxNjgsNzYsMC4wNik7IGNvbG9yOiB2YXIoLS10ZXh0KTsgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCB2YXIoLS1nb2xkKTsgfQouYWktbXNnLnVzZXIgeyBiYWNrZ3JvdW5kOiByZ2JhKDEwNiwxNDMsMTc2LDAuMDgpOyBjb2xvcjogdmFyKC0taW5rKTsgdGV4dC1hbGlnbjogcmlnaHQ7IGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHZhcigtLWluayk7IH0KLmFpLW1zZy50aGlua2luZyB7IGNvbG9yOiB2YXIoLS10ZXh0LWRpbSk7IGZvbnQtc3R5bGU6IGl0YWxpYzsgYW5pbWF0aW9uOiBwdWxzZSAxLjVzIGluZmluaXRlOyB9Ci5haS1pbnB1dC1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDZweDsgfQouYWktaW5wdXQgeyBmbGV4OiAxOyB9Cgoud2l6YXJkLW5hdi1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDIwcHg7IH0KLndpemFyZC1zdGVwIHsgcGFkZGluZzogOHB4IDEycHg7IGZvbnQtc2l6ZTogMTJweDsgY3Vyc29yOiBkZWZhdWx0OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9CgouYWJpbGl0eS1ncmlkLWxhcmdlIHsKICBkaXNwbGF5OiBncmlkOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7CiAgZ2FwOiAxMnB4OwogIG1hcmdpbi1ib3R0b206IDhweDsKfQouYWJpbGl0eS1ib3gtbGFyZ2UgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KLmFiaWxpdHktbGFiZWwgeyBmb250LXNpemU6IDExcHg7IGNvbG9yOiB2YXIoLS10ZXh0LWRpbSk7IG1hcmdpbi1ib3R0b206IDJweDsgfQouYWJpbGl0eS1hYmJyIHsgZm9udC1mYW1pbHk6ICdDaW56ZWwnLCBzZXJpZjsgZm9udC1zaXplOiAxM3B4OyBjb2xvcjogdmFyKC0tZ29sZCk7IG1hcmdpbi1ib3R0b206IDRweDsgfQouYWJpbGl0eS1zY29yZS1pbnB1dCB7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAyNHB4OyBmb250LXdlaWdodDogNzAwOyBwYWRkaW5nOiA4cHggNHB4OyB9Ci5hYmlsaXR5LW1vZCB7IGZvbnQtc2l6ZTogMTZweDsgY29sb3I6IHZhcigtLWdvbGQpOyBtYXJnaW4tdG9wOiA0cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IH0KPC9zdHlsZT4KeyUgZW5kYmxvY2sgJX0KCnslIGJsb2NrIHNjcmlwdHMgJX0KPHNjcmlwdD4KY29uc3QgT0xMQU1BX09LID0ge3sgJ3RydWUnIGlmIG9sbGFtYV9vayBlbHNlICdmYWxzZScgfX07CmxldCBjdXJyZW50U3RlcCA9IDA7CmNvbnN0IGJ1aWxkID0geyByYWNlOiAnSHVtYW4nLCBjaGFyX2NsYXNzOiAnRmlnaHRlcicsIGJhY2tncm91bmQ6ICdTb2xkaWVyJywgbGV2ZWw6IDEgfTsKCi8vIOKUgOKUgCBOQVZJR0FUSU9OIOKUgOKUgApmdW5jdGlvbiBnb1N0ZXAoaWR4KSB7CiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndpemFyZC1zZWN0aW9uJykuZm9yRWFjaCgocywgaSkgPT4gewogICAgcy5zdHlsZS5kaXNwbGF5ID0gaSA9PT0gaWR4ID8gJ2Jsb2NrJyA6ICdub25lJzsKICB9KTsKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2l6YXJkLXN0ZXAnKS5mb3JFYWNoKChzLCBpKSA9PiB7CiAgICBzLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGkgPT09IGlkeCk7CiAgICBzLmNsYXNzTGlzdC50b2dnbGUoJ2RvbmUnLCBpIDwgaWR4KTsKICB9KTsKICBjdXJyZW50U3RlcCA9IGlkeDsKICBpZiAoaWR4ID09PSA0KSBzaG93UmFjaWFsQm9udXNlcygpOwogIGlmIChpZHggPT09IDYpIHJlbmRlckJ1aWxkU3VtbWFyeSgpOwogIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKfQoKLy8g4pSA4pSAIENIT0lDRSBDQVJEUyDilIDilIAKZnVuY3Rpb24gc2VsZWN0Q2hvaWNlKGZpZWxkLCB2YWx1ZSwgZWwpIHsKICBjb25zdCBncmlkID0gZWwuY2xvc2VzdCgnLmNob2ljZS1ncmlkJyk7CiAgZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hvaWNlLWNhcmQnKS5mb3JFYWNoKGMgPT4gYy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsKICBlbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZC0nICsgZmllbGQpLnZhbHVlID0gdmFsdWU7CiAgYnVpbGRbZmllbGRdID0gdmFsdWU7CiAgLy8gQXV0by10cmlnZ2VyIEFJIGV4cGxhbmF0aW9uCiAgaWYgKE9MTEFNQV9PSykgewogICAgY29uc3Qgc3RlcE1hcCA9IHsgcmFjZTogMSwgY2hhcl9jbGFzczogMiwgYmFja2dyb3VuZDogMyB9OwogICAgY29uc3Qgc3RlcElkeCA9IHN0ZXBNYXBbZmllbGRdOwogICAgY29uc3Qgc3RlcE5hbWUgPSBmaWVsZCA9PT0gJ2NoYXJfY2xhc3MnID8gJ2NsYXNzJyA6IGZpZWxkOwogICAgaWYgKHN0ZXBJZHggIT09IHVuZGVmaW5lZCkgewogICAgICBhZGRBSU1zZyhzdGVwSWR4LCBgVGVsbCBtZSBhYm91dCAke3ZhbHVlfSBhcyBhICR7c3RlcE5hbWV9IGNob2ljZSBmb3IgbXkgYnVpbGQuYCwgJ3VzZXInKTsKICAgICAgZmV0Y2hBSShzdGVwSWR4LCBzdGVwTmFtZSwgYFRlbGwgbWUgYWJvdXQgJHt2YWx1ZX0gYXMgYSAke3N0ZXBOYW1lfSBjaG9pY2UuIEJlIHNwZWNpZmljIGFib3V0IHRyYWl0cywgYm9udXNlcywgYW5kIGhvdyBpdCBmaXRzIG15IGN1cnJlbnQgYnVpbGQuYCk7CiAgICB9CiAgfQp9CgovLyDilIDilIAgQUkgQ0hBVCDilIDilIAKZnVuY3Rpb24gYWRkQUlNc2coc3RlcElkeCwgdGV4dCwgcm9sZSkgewogIGNvbnN0IGJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LScgKyBzdGVwSWR4KTsKICBpZiAoIWJveCkgcmV0dXJuOwogIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGRpdi5jbGFzc05hbWUgPSAnYWktbXNnICcgKyByb2xlOwogIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7CiAgYm94LmFwcGVuZENoaWxkKGRpdik7CiAgYm94LnNjcm9sbFRvcCA9IGJveC5zY3JvbGxIZWlnaHQ7CiAgcmV0dXJuIGRpdjsKfQoKYXN5bmMgZnVuY3Rpb24gZmV0Y2hBSShzdGVwSWR4LCBzdGVwTmFtZSwgbWVzc2FnZSkgewogIGNvbnN0IHRoaW5raW5nID0gYWRkQUlNc2coc3RlcElkeCwgJy4uLnRoaW5raW5nLi4uJywgJ3RoaW5raW5nJyk7CiAgc3luY0J1aWxkRnJvbUZvcm0oKTsKICB0cnkgewogICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJy9jaGFyYWN0ZXJzL2FpX3N0ZXAnLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGVwOiBzdGVwTmFtZSwgYnVpbGQsIG1lc3NhZ2UgfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICBpZiAodGhpbmtpbmcpIHRoaW5raW5nLnJlbW92ZSgpOwogICAgYWRkQUlNc2coc3RlcElkeCwgZGF0YS5yZXBseSB8fCAnW05vIHJlc3BvbnNlXScsICdkbScpOwogIH0gY2F0Y2ggKGUpIHsKICAgIGlmICh0aGlua2luZykgdGhpbmtpbmcucmVtb3ZlKCk7CiAgICBhZGRBSU1zZyhzdGVwSWR4LCAnW0FJIHVuYXZhaWxhYmxlXScsICdkbScpOwogIH0KfQoKZnVuY3Rpb24gYXNrQUkoc3RlcElkeCwgc3RlcE5hbWUpIHsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dC0nICsgc3RlcElkeCk7CiAgY29uc3QgbXNnID0gKGlucHV0Py52YWx1ZSB8fCAnJykudHJpbSgpOwogIGlmICghbXNnKSByZXR1cm47CiAgYWRkQUlNc2coc3RlcElkeCwgbXNnLCAndXNlcicpOwogIGlucHV0LnZhbHVlID0gJyc7CiAgZmV0Y2hBSShzdGVwSWR4LCBzdGVwTmFtZSwgbXNnKTsKfQoKLy8gRW50ZXIga2V5IG9uIEFJIGlucHV0cwpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWktaW5wdXQnKS5mb3JFYWNoKChpbnB1dCwgaSkgPT4gewogIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHsKICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgewogICAgICBjb25zdCBzdGVwTWFwID0gW1snZ2VuZXJhbCcsMF0sWydyYWNlJywxXSxbJ2NsYXNzJywyXSxbJ2JhY2tncm91bmQnLDNdLFsnYWJpbGl0aWVzJyw0XSxbJ3BlcnNvbmFsaXR5Jyw1XSxbJ2dlbmVyYWwnLDZdXTsKICAgICAgYXNrQUkoaSwgc3RlcE1hcFtpXT8uWzBdIHx8ICdnZW5lcmFsJyk7CiAgICB9CiAgfSk7Cn0pOwoKZnVuY3Rpb24gZ2V0U3RhdFJlY29tbWVuZGF0aW9uKCkgewogIHN5bmNCdWlsZEZyb21Gb3JtKCk7CiAgZmV0Y2hBSSg0LCAnYWJpbGl0aWVzJywgYFJlY29tbWVuZCBleGFjdGx5IGhvdyB0byBhc3NpZ24gdGhlIHN0YW5kYXJkIGFycmF5ICgxNSwxNCwxMywxMiwxMCw4KSB0byBTVFIsIERFWCwgQ09OLCBJTlQsIFdJUywgQ0hBIGZvciBhICR7YnVpbGQucmFjZX0gJHtidWlsZC5jaGFyX2NsYXNzfS4gTGlzdCBlYWNoIHN0YXQgYXNzaWdubWVudCBleHBsaWNpdGx5LmApOwp9CgpmdW5jdGlvbiBnZXRQZXJzb25hbGl0eVN1Z2dlc3Rpb24oKSB7CiAgc3luY0J1aWxkRnJvbUZvcm0oKTsKICBmZXRjaEFJKDUsICdwZXJzb25hbGl0eScsIGBHZW5lcmF0ZSBhIFBlcnNvbmFsaXR5IFRyYWl0LCBJZGVhbCwgQm9uZCwgYW5kIEZsYXcgZm9yIGEgJHtidWlsZC5yYWNlfSAke2J1aWxkLmNoYXJfY2xhc3N9IHdpdGggYSAke2J1aWxkLmJhY2tncm91bmR9IGJhY2tncm91bmQuIEZvcm1hdCBjbGVhcmx5IHdpdGggbGFiZWxzOiBUUkFJVDosIElERUFMOiwgQk9ORDosIEZMQVc6YCk7Cn0KCi8vIOKUgOKUgCBBQklMSVRZIFNDT1JFUyDilIDilIAKZnVuY3Rpb24gdXBkYXRlTW9kKHN0YXQpIHsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZS0nICsgc3RhdCk7CiAgY29uc3QgbW9kRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kLScgKyBzdGF0KTsKICBjb25zdCBzY29yZSA9IHBhcnNlSW50KGlucHV0Py52YWx1ZSkgfHwgMTA7CiAgY29uc3QgbW9kID0gTWF0aC5mbG9vcigoc2NvcmUgLSAxMCkgLyAyKTsKICBpZiAobW9kRWwpIG1vZEVsLnRleHRDb250ZW50ID0gKG1vZCA+PSAwID8gJysnIDogJycpICsgbW9kOwogIGJ1aWxkW3N0YXRdID0gc2NvcmU7Cn0KCmZ1bmN0aW9uIGFwcGx5U3RhbmRhcmRBcnJheSgpIHsKICBjb25zdCBvcmRlciA9IFsnc3RyZW5ndGgnLCdkZXh0ZXJpdHknLCdjb25zdGl0dXRpb24nLCdpbnRlbGxpZ2VuY2UnLCd3aXNkb20nLCdjaGFyaXNtYSddOwogIGNvbnN0IHZhbHMgPSBbMTUsMTQsMTMsMTIsMTAsOF07CiAgb3JkZXIuZm9yRWFjaCgocywgaSkgPT4gewogICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUtJyArIHMpOwogICAgaWYgKGVsKSB7IGVsLnZhbHVlID0gdmFsc1tpXTsgdXBkYXRlTW9kKHMpOyB9CiAgfSk7Cn0KCmNvbnN0IFJBQ0lBTF9CT05VU0VTID0gewogIHslIGZvciByIGluIHJhY2VzICV9CiAgInt7IHIubmFtZSB9fSI6IHt7IHIuYWJpbGl0eV9ib251c2VzIHwgdG9qc29uIH19LAogIHslIGVuZGZvciAlfQp9OwoKZnVuY3Rpb24gc2hvd1JhY2lhbEJvbnVzZXMoKSB7CiAgY29uc3QgcmFjZSA9IGJ1aWxkLnJhY2UgfHwgJ0h1bWFuJzsKICBjb25zdCBib251c2VzID0gUkFDSUFMX0JPTlVTRVNbcmFjZV0gfHwge307CiAgY29uc3Qgbm90ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWNpYWwtYm9udXMtbm90ZScpOwogIGlmICghbm90ZSkgcmV0dXJuOwogIGNvbnN0IHBhcnRzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykubWFwKChbaywgdl0pID0+IGArJHt2fSAke2sudG9VcHBlckNhc2UoKX1gKTsKICBpZiAocGFydHMubGVuZ3RoKSB7CiAgICBub3RlLnRleHRDb250ZW50ID0gYCR7cmFjZX0gcmFjaWFsIGJvbnVzZXMgYXBwbGllZCBhZnRlciBmaW5hbGl6ZTogJHtwYXJ0cy5qb2luKCcsICcpfWA7CiAgfSBlbHNlIHsKICAgIG5vdGUudGV4dENvbnRlbnQgPSAnJzsKICB9Cn0KCi8vIOKUgOKUgCBCVUlMRCBTVU1NQVJZIOKUgOKUgApmdW5jdGlvbiBzeW5jQnVpbGRGcm9tRm9ybSgpIHsKICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXItZm9ybScpOwogIGlmICghZm9ybSkgcmV0dXJuOwogIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhKGZvcm0pOwogIGZkLmZvckVhY2goKHYsIGspID0+IHsgaWYgKHYpIGJ1aWxkW2tdID0gdjsgfSk7CiAgYnVpbGQubmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZC1uYW1lJyk/LnZhbHVlIHx8ICcnOwogIGJ1aWxkLmxldmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkLWxldmVsJyk/LnZhbHVlIHx8IDE7Cn0KCmZ1bmN0aW9uIHJlbmRlckJ1aWxkU3VtbWFyeSgpIHsKICBzeW5jQnVpbGRGcm9tRm9ybSgpOwogIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1aWxkLXN1bW1hcnknKTsKICBpZiAoIWVsKSByZXR1cm47CgogIGNvbnN0IHN0YXRzID0gWydzdHJlbmd0aCcsJ2RleHRlcml0eScsJ2NvbnN0aXR1dGlvbicsJ2ludGVsbGlnZW5jZScsJ3dpc2RvbScsJ2NoYXJpc21hJ107CiAgY29uc3QgYWJiciA9IFsnU1RSJywnREVYJywnQ09OJywnSU5UJywnV0lTJywnQ0hBJ107CiAgY29uc3Qgc3RhdFJvdyA9IHN0YXRzLm1hcCgocywgaSkgPT4gewogICAgY29uc3QgdmFsID0gcGFyc2VJbnQoYnVpbGRbc10gfHwgMTApOwogICAgY29uc3QgbW9kID0gTWF0aC5mbG9vcigodmFsIC0gMTApIC8gMik7CiAgICByZXR1cm4gYDxzcGFuIHN0eWxlPSJtYXJnaW4tcmlnaHQ6MTJweCI+PHN0cm9uZyBzdHlsZT0iY29sb3I6dmFyKC0tZ29sZCkiPiR7YWJicltpXX08L3N0cm9uZz4gJHt2YWx9IDxzcGFuIHN0eWxlPSJjb2xvcjp2YXIoLS10ZXh0LWRpbSkiPigke21vZCA+PSAwID8gJysnIDogJyd9JHttb2R9KTwvc3Bhbj48L3NwYW4+YDsKICB9KS5qb2luKCcnKTsKCiAgZWwuaW5uZXJIVE1MID0gYAogICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOnZhcigtLWdvbGQtbGlnaHQpIj4ke2J1aWxkLm5hbWUgfHwgJ1VubmFtZWQnfTwvc3Ryb25nPjwvZGl2PgogICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo0cHg7Y29sb3I6dmFyKC0tdGV4dC1kaW0pIj4KICAgICAgJHtidWlsZC5yYWNlIHx8ICfigJQnfSAke2J1aWxkLmNoYXJfY2xhc3MgfHwgJ+KAlCd9IMK3IExldmVsICR7YnVpbGQubGV2ZWx9IMK3ICR7YnVpbGQuYmFja2dyb3VuZCB8fCAn4oCUJ30gwrcgJHtidWlsZC5hbGlnbm1lbnQgfHwgJ+KAlCd9CiAgICA8L2Rpdj4KICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDtmb250LXNpemU6MTNweCI+JHtzdGF0Um93fTwvZGl2PgogIGA7Cn0KCi8vIFByZS1zZWxlY3QgSHVtYW4gYW5kIEZpZ2h0ZXIgb24gbG9hZApkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gewogIGNvbnN0IGh1bWFuQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyYWNlLWdyaWQgW2RhdGEtbmFtZT0iSHVtYW4iXScpOwogIGlmIChodW1hbkNhcmQpIGh1bWFuQ2FyZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIGNvbnN0IGZpZ2h0ZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NsYXNzLWdyaWQgW2RhdGEtbmFtZT0iRmlnaHRlciJdJyk7CiAgaWYgKGZpZ2h0ZXJDYXJkKSBmaWdodGVyQ2FyZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIGNvbnN0IHNvbGRpZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JnLWdyaWQgW2RhdGEtbmFtZT0iU29sZGllciJdJyk7CiAgaWYgKHNvbGRpZXJDYXJkKSBzb2xkaWVyQ2FyZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwoKICAvLyBVcGRhdGUgYWxsIG1vZHMgb24gbG9hZAogIFsnc3RyZW5ndGgnLCdkZXh0ZXJpdHknLCdjb25zdGl0dXRpb24nLCdpbnRlbGxpZ2VuY2UnLCd3aXNkb20nLCdjaGFyaXNtYSddLmZvckVhY2godXBkYXRlTW9kKTsKfSk7Cjwvc2NyaXB0Pgp7JSBlbmRibG9jayAlfQo="
[System.IO.File]::WriteAllBytes("$root\templates\characters\wizard.html", [System.Convert]::FromBase64String($b))

# templates\characters\sheet.html
$b = "eyUgZXh0ZW5kcyAiYmFzZS5odG1sIiAlfQp7JSBibG9jayB0aXRsZSAlfXt7IGNoYXIubmFtZSB9fSDigJQgQ2hhcmFjdGVyRm9yZ2V7JSBlbmRibG9jayAlfQp7JSBibG9jayBjb250ZW50ICV9CjxkaXYgc3R5bGU9Im1heC13aWR0aDoxMDAwcHgiPgoKPCEtLSBIZWFkZXIgLS0+CjxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4O2ZsZXgtd3JhcDp3cmFwO2dhcDoxMnB4Ij4KICA8ZGl2PgogICAgPGgxIHN0eWxlPSJtYXJnaW4tYm90dG9tOjJweCI+e3sgY2hhci5uYW1lIH19PC9oMT4KICAgIDxkaXYgc3R5bGU9ImNvbG9yOnZhcigtLXRleHQtZGltKTtmb250LXN0eWxlOml0YWxpYztmb250LXNpemU6MTZweCI+CiAgICAgIHt7IGRhdGEucmFjZSB9fSDCtyB7eyBkYXRhLmNoYXJfY2xhc3MgfX17JSBpZiBkYXRhLnN1YmNsYXNzICV9ICh7eyBkYXRhLnN1YmNsYXNzIH19KXslIGVuZGlmICV9IMK3IExldmVsIHt7IGRhdGEubGV2ZWwgfX0KICAgICAgwrcge3sgZGF0YS5iYWNrZ3JvdW5kIG9yICfigJQnIH19IMK3IHt7IGRhdGEuYWxpZ25tZW50IG9yICfigJQnIH19CiAgICAgIHslIGlmIGNoYXIuaXNfbnBjICV9PHNwYW4gY2xhc3M9Im5wYy1iYWRnZSIgc3R5bGU9Im1hcmdpbi1sZWZ0OjhweCI+TlBDPC9zcGFuPnslIGVuZGlmICV9CiAgICA8L2Rpdj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJmbGV4IiBzdHlsZT0iZ2FwOjhweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1zZWxmOmZsZXgtc3RhcnQiPgogICAgeyUgaWYgY2hhci5jYW1wYWlnbl9pZCAlfQogICAgICA8YSBocmVmPSIvY2FtcGFpZ25zL3t7IGNoYXIuY2FtcGFpZ25faWQgfX0iIGNsYXNzPSJidG4gYnRuLWdob3N0IGJ0bi1zbSI+4oaQIENhbXBhaWduPC9hPgogICAgeyUgZWxpZiBjaGFyLmlzX25wYyAlfQogICAgICA8YSBocmVmPSIvZG0vIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBETSBEYXNoYm9hcmQ8L2E+CiAgICB7JSBlbHNlICV9CiAgICAgIDxhIGhyZWY9Ii9wbGF5ZXIvIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBNeSBDaGFyYWN0ZXJzPC9hPgogICAgeyUgZW5kaWYgJX0KICAgIHslIGlmIGNhbl9kZWxldGUgJX0KICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIvY2hhcmFjdGVycy97eyBjaGFyLmlkIH19L2RlbGV0ZSIgY2xhc3M9ImNvbmZpcm0tYWN0aW9uIiBkYXRhLWNvbmZpcm09IkRlbGV0ZSB7eyBjaGFyLm5hbWUgfX0/IFRoaXMgY2Fubm90IGJlIHVuZG9uZS4iPgogICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSI+RGVsZXRlPC9idXR0b24+CiAgICA8L2Zvcm0+CiAgICB7JSBlbmRpZiAlfQogIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gUm93IDE6IFByb2ZpY2llbmN5ICsgSW5zcGlyYXRpb24gKyBDb3JlIENvbWJhdCAtLT4KPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoYXV0by1maWxsLG1pbm1heCgxMTBweCwxZnIpKTtnYXA6MTBweDttYXJnaW4tYm90dG9tOjE0cHgiPgogIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlIj4KICAgIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlLWxhYmVsIj5Qcm9maWNpZW5jeTwvZGl2PgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtdmFsIj4re3sgZGF0YS5wcm9maWNpZW5jeV9ib251cyB9fTwvZGl2PgogIDwvZGl2PgogIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlIj4KICAgIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlLWxhYmVsIj5Bcm1vciBDbGFzczwvZGl2PgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtdmFsIj57eyBkYXRhLmFybW9yX2NsYXNzIH19PC9kaXY+CiAgPC9kaXY+CiAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUiPgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtbGFiZWwiPkluaXRpYXRpdmU8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlLXZhbCI+e3sgJysnIGlmIGRhdGEuZGV4X21vZCA+PSAwIGVsc2UgJycgfX17eyBkYXRhLmRleF9tb2QgfX08L2Rpdj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZSI+CiAgICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZS1sYWJlbCI+U3BlZWQ8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlLXZhbCI+e3sgZGF0YS5zcGVlZCB9fWZ0PC9kaXY+CiAgPC9kaXY+CiAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUiPgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtbGFiZWwiPkhpdCBEaWNlPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJzdGF0LWJ1YmJsZS12YWwiIHN0eWxlPSJmb250LXNpemU6MTZweCI+e3sgZGF0YS5oaXRfZGljZSBvciAn4oCUJyB9fTwvZGl2PgogIDwvZGl2PgogIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlIj4KICAgIDxkaXYgY2xhc3M9InN0YXQtYnViYmxlLWxhYmVsIj5YUDwvZGl2PgogICAgPGRpdiBjbGFzcz0ic3RhdC1idWJibGUtdmFsIiBzdHlsZT0iZm9udC1zaXplOjE2cHgiPnt7IGRhdGEuZXhwZXJpZW5jZV9wb2ludHMgfX08L2Rpdj4KICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIEhQIEJsb2NrIC0tPgo8ZGl2IGNsYXNzPSJwYW5lbCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTRweDtwYWRkaW5nOjE0cHgiPgogIDxkaXYgc3R5bGU9ImRpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDFmciAxZnI7Z2FwOjE2cHg7YWxpZ24taXRlbXM6Y2VudGVyIj4KICAgIDxkaXY+CiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtZmFtaWx5OidDaW56ZWwnLHNlcmlmO2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLXRleHQtZGltKTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPkhpdCBQb2ludHM8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjI4cHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOnZhcigtLXRleHQtYnJpZ2h0KSI+e3sgZGF0YS5jdXJyZW50X2hwIH19IDxzcGFuIHN0eWxlPSJmb250LXNpemU6MTZweDtjb2xvcjp2YXIoLS10ZXh0LWRpbSkiPi8ge3sgZGF0YS5tYXhfaHAgfX08L3NwYW4+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImhwLWJhci10cmFjayIgc3R5bGU9ImhlaWdodDo4cHg7bWFyZ2luLXRvcDo2cHgiPjxkaXYgY2xhc3M9ImhwLWJhci1maWxsIiBkYXRhLWN1cj0ie3sgZGF0YS5jdXJyZW50X2hwIH19IiBkYXRhLW1heD0ie3sgZGF0YS5tYXhfaHAgfX0iPjwvZGl2PjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciI+CiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtZmFtaWx5OidDaW56ZWwnLHNlcmlmO2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLXRleHQtZGltKTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPlRlbXAgSFA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjI0cHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOnt7ICd2YXIoLS1pbmspJyBpZiBkYXRhLnRlbXBfaHAgZWxzZSAndmFyKC0tdGV4dC1kaW0pJyB9fSI+e3sgZGF0YS50ZW1wX2hwIG9yICfigJQnIH19PC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQiPgogICAgICA8ZGl2IHN0eWxlPSJmb250LWZhbWlseTonQ2luemVsJyxzZXJpZjtmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS10ZXh0LWRpbSk7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuNXB4O21hcmdpbi1ib3R0b206NnB4Ij5EZWF0aCBTYXZlczwvZGl2PgogICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjRweDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQiPgogICAgICAgIDxzcGFuIHN0eWxlPSJjb2xvcjp2YXIoLS1ncmVlbi1saWdodCkiPuKYkCDimJAg4piQPC9zcGFuPgogICAgICAgIDxzcGFuIHN0eWxlPSJjb2xvcjp2YXIoLS1yZWQtbGlnaHQpO21hcmdpbi1sZWZ0OjhweCI+4piQIOKYkCDimJA8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS10ZXh0LWRpbSk7bWFyZ2luLXRvcDoycHgiPlN1Y2Nlc3NlcyAvIEZhaWx1cmVzPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIE1haW4gU2hlZXQ6IDMgY29sdW1ucyAtLT4KPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxODBweCAxZnIgMWZyO2dhcDoxNHB4O2FsaWduLWl0ZW1zOnN0YXJ0Ij4KCjwhLS0gQ29sIDE6IEFiaWxpdHkgU2NvcmVzICsgU2F2ZXMgLS0+CjxkaXY+CiAgeyUgc2V0IGFiaWxpdHlfZGF0YSA9IFsKICAgICgnU3RyZW5ndGgnLCdzdHJfbW9kJywnc3RyZW5ndGgnKSwKICAgICgnRGV4dGVyaXR5JywnZGV4X21vZCcsJ2RleHRlcml0eScpLAogICAgKCdDb25zdGl0dXRpb24nLCdjb25fbW9kJywnY29uc3RpdHV0aW9uJyksCiAgICAoJ0ludGVsbGlnZW5jZScsJ2ludF9tb2QnLCdpbnRlbGxpZ2VuY2UnKSwKICAgICgnV2lzZG9tJywnd2lzX21vZCcsJ3dpc2RvbScpLAogICAgKCdDaGFyaXNtYScsJ2NoYV9tb2QnLCdjaGFyaXNtYScpCiAgXSAlfQoKICB7JSBmb3IgbGFiZWwsIG1vZF9rZXksIHN0YXRfa2V5IGluIGFiaWxpdHlfZGF0YSAlfQogIHslIHNldCBpc19zYXZlID0gZGF0YS5zYXZpbmdfdGhyb3dzLmdldChsYWJlbCwgRmFsc2UpICV9CiAgPGRpdiBjbGFzcz0iYWJpbGl0eS1ibG9jayI+CiAgICA8ZGl2IGNsYXNzPSJhYmlsaXR5LWJsb2NrLW5hbWUiPnt7IGxhYmVsWzozXS51cHBlcigpIH19PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJhYmlsaXR5LWJsb2NrLXNjb3JlIj57eyBkYXRhW3N0YXRfa2V5XSB9fTwvZGl2PgogICAgPGRpdiBjbGFzcz0iYWJpbGl0eS1ibG9jay1tb2QiPnt7ICcrJyBpZiBkYXRhW21vZF9rZXldID49IDAgZWxzZSAnJyB9fXt7IGRhdGFbbW9kX2tleV0gfX08L2Rpdj4KICAgIDxkaXYgY2xhc3M9InNhdmUtcm93Ij4KICAgICAgPHNwYW4gY2xhc3M9InByb2YtZG90IHt7ICdmaWxsZWQnIGlmIGlzX3NhdmUgZWxzZSAnJyB9fSI+PC9zcGFuPgogICAgICA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjExcHg7Y29sb3I6dmFyKC0tdGV4dC1kaW0pIj5TYXZlIHt7ICcrJyBpZiBkYXRhW21vZF9rZXldICsgKGRhdGEucHJvZmljaWVuY3lfYm9udXMgaWYgaXNfc2F2ZSBlbHNlIDApID49IDAgZWxzZSAnJyB9fXt7IGRhdGFbbW9kX2tleV0gKyAoZGF0YS5wcm9maWNpZW5jeV9ib251cyBpZiBpc19zYXZlIGVsc2UgMCkgfX08L3NwYW4+CiAgICA8L2Rpdj4KICA8L2Rpdj4KICB7JSBlbmRmb3IgJX0KPC9kaXY+Cgo8IS0tIENvbCAyOiBTa2lsbHMgLS0+CjxkaXYgY2xhc3M9InBhbmVsIiBzdHlsZT0icGFkZGluZzoxNHB4Ij4KICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+U2tpbGxzPC9oMz4KICB7JSBzZXQgc2tpbGxfbWFwID0gWwogICAgKCdBY3JvYmF0aWNzJywnZGV4X21vZCcpLCgnQW5pbWFsIEhhbmRsaW5nJywnd2lzX21vZCcpLCgnQXJjYW5hJywnaW50X21vZCcpLAogICAgKCdBdGhsZXRpY3MnLCdzdHJfbW9kJyksKCdEZWNlcHRpb24nLCdjaGFfbW9kJyksKCdIaXN0b3J5JywnaW50X21vZCcpLAogICAgKCdJbnNpZ2h0Jywnd2lzX21vZCcpLCgnSW50aW1pZGF0aW9uJywnY2hhX21vZCcpLCgnSW52ZXN0aWdhdGlvbicsJ2ludF9tb2QnKSwKICAgICgnTWVkaWNpbmUnLCd3aXNfbW9kJyksKCdOYXR1cmUnLCdpbnRfbW9kJyksKCdQZXJjZXB0aW9uJywnd2lzX21vZCcpLAogICAgKCdQZXJmb3JtYW5jZScsJ2NoYV9tb2QnKSwoJ1BlcnN1YXNpb24nLCdjaGFfbW9kJyksKCdSZWxpZ2lvbicsJ2ludF9tb2QnKSwKICAgICgnU2xlaWdodCBvZiBIYW5kJywnZGV4X21vZCcpLCgnU3RlYWx0aCcsJ2RleF9tb2QnKSwoJ1N1cnZpdmFsJywnd2lzX21vZCcpCiAgXSAlfQogIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxM3B4Ij4KICB7JSBmb3Igc2tpbGwsIG1vZF9rZXkgaW4gc2tpbGxfbWFwICV9CiAgeyUgc2V0IGlzX3Byb2YgPSBkYXRhLnNraWxscy5nZXQoc2tpbGwsIEZhbHNlKSAlfQogIHslIHNldCB0b3RhbCA9IGRhdGFbbW9kX2tleV0gKyAoZGF0YS5wcm9maWNpZW5jeV9ib251cyBpZiBpc19wcm9mIGVsc2UgMCkgJX0KICA8ZGl2IGNsYXNzPSJza2lsbC1yb3cge3sgJ3NraWxsLXByb2YnIGlmIGlzX3Byb2YgZWxzZSAnJyB9fSI+CiAgICA8c3BhbiBjbGFzcz0icHJvZi1kb3Qge3sgJ2ZpbGxlZCcgaWYgaXNfcHJvZiBlbHNlICcnIH19Ij48L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0ic2tpbGwtcm93LW1vZCI+e3sgJysnIGlmIHRvdGFsID49IDAgZWxzZSAnJyB9fXt7IHRvdGFsIH19PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InNraWxsLXJvdy1uYW1lIj57eyBza2lsbCB9fTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJza2lsbC1yb3ctYWJpbGl0eSI+KHt7IG1vZF9rZXlbOjNdLnVwcGVyKCkgfX0pPC9zcGFuPgogIDwvZGl2PgogIHslIGVuZGZvciAlfQogIDwvZGl2PgoKICA8IS0tIFBhc3NpdmUgUGVyY2VwdGlvbiAtLT4KICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEycHg7cGFkZGluZy10b3A6MTBweDtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpIj4KICAgIHslIHNldCBwZXJjX3Byb2YgPSBkYXRhLnNraWxscy5nZXQoJ1BlcmNlcHRpb24nLCBGYWxzZSkgJX0KICAgIHslIHNldCBwYXNzaXZlID0gMTAgKyBkYXRhLndpc19tb2QgKyAoZGF0YS5wcm9maWNpZW5jeV9ib251cyBpZiBwZXJjX3Byb2YgZWxzZSAwKSAlfQogICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjEzcHg7Y29sb3I6dmFyKC0tdGV4dC1kaW0pIj5QYXNzaXZlIFBlcmNlcHRpb246IDxzdHJvbmcgc3R5bGU9ImNvbG9yOnZhcigtLXRleHQtYnJpZ2h0KSI+e3sgcGFzc2l2ZSB9fTwvc3Ryb25nPjwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gQ29sIDM6IEZlYXR1cmVzLCBFcXVpcG1lbnQsIFBlcnNvbmFsaXR5IC0tPgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoxNHB4Ij4KCiAgeyUgaWYgZGF0YS5mZWF0dXJlcyAlfQogIDxkaXYgY2xhc3M9InBhbmVsIiBzdHlsZT0icGFkZGluZzoxNHB4Ij4KICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij5GZWF0dXJlcyAmIFRyYWl0czwvaDM+CiAgICA8ZGl2PgogICAgICB7JSBmb3IgZmVhdCBpbiBkYXRhLmZlYXR1cmVzICV9CiAgICAgICAgPHNwYW4gY2xhc3M9ImZlYXR1cmUtdGFnIj57eyBmZWF0IH19PC9zcGFuPgogICAgICB7JSBlbmRmb3IgJX0KICAgIDwvZGl2PgogIDwvZGl2PgogIHslIGVuZGlmICV9CgogIHslIGlmIGRhdGEuZXF1aXBtZW50ICV9CiAgPGRpdiBjbGFzcz0icGFuZWwiIHN0eWxlPSJwYWRkaW5nOjE0cHgiPgogICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOjhweCI+RXF1aXBtZW50PC9oMz4KICAgIHslIGZvciBpdGVtIGluIGRhdGEuZXF1aXBtZW50ICV9CiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxM3B4O3BhZGRpbmc6M3B4IDA7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgcmdiYSg0Miw0Niw2OCwwLjUpO2NvbG9yOnZhcigtLXRleHQpIj57eyBpdGVtIH19PC9kaXY+CiAgICB7JSBlbmRmb3IgJX0KICA8L2Rpdj4KICB7JSBlbmRpZiAlfQoKICA8IS0tIFBlcnNvbmFsaXR5IGJsb2NrIC0tPgogIHslIHNldCB0cmFpdHMgPSBkYXRhLnRyYWl0cyAlfQogIHslIGlmIHRyYWl0cy5nZXQoJ3BlcnNvbmFsaXR5Jykgb3IgdHJhaXRzLmdldCgnaWRlYWwnKSBvciB0cmFpdHMuZ2V0KCdib25kJykgb3IgdHJhaXRzLmdldCgnZmxhdycpICV9CiAgPGRpdiBjbGFzcz0icGFuZWwiIHN0eWxlPSJwYWRkaW5nOjE0cHgiPgogICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHgiPlBlcnNvbmFsaXR5PC9oMz4KICAgIHslIGlmIHRyYWl0cy5nZXQoJ3BlcnNvbmFsaXR5JykgJX0KICAgIDxkaXYgY2xhc3M9InRyYWl0LWJsb2NrIj48ZGl2IGNsYXNzPSJ0cmFpdC1sYWJlbCI+UGVyc29uYWxpdHkgVHJhaXQ8L2Rpdj48ZGl2IGNsYXNzPSJ0cmFpdC10ZXh0Ij57eyB0cmFpdHMucGVyc29uYWxpdHkgfX08L2Rpdj48L2Rpdj4KICAgIHslIGVuZGlmICV9CiAgICB7JSBpZiB0cmFpdHMuZ2V0KCdpZGVhbCcpICV9CiAgICA8ZGl2IGNsYXNzPSJ0cmFpdC1ibG9jayI+PGRpdiBjbGFzcz0idHJhaXQtbGFiZWwiPklkZWFsPC9kaXY+PGRpdiBjbGFzcz0idHJhaXQtdGV4dCI+e3sgdHJhaXRzLmlkZWFsIH19PC9kaXY+PC9kaXY+CiAgICB7JSBlbmRpZiAlfQogICAgeyUgaWYgdHJhaXRzLmdldCgnYm9uZCcpICV9CiAgICA8ZGl2IGNsYXNzPSJ0cmFpdC1ibG9jayI+PGRpdiBjbGFzcz0idHJhaXQtbGFiZWwiPkJvbmQ8L2Rpdj48ZGl2IGNsYXNzPSJ0cmFpdC10ZXh0Ij57eyB0cmFpdHMuYm9uZCB9fTwvZGl2PjwvZGl2PgogICAgeyUgZW5kaWYgJX0KICAgIHslIGlmIHRyYWl0cy5nZXQoJ2ZsYXcnKSAlfQogICAgPGRpdiBjbGFzcz0idHJhaXQtYmxvY2siPjxkaXYgY2xhc3M9InRyYWl0LWxhYmVsIj5GbGF3PC9kaXY+PGRpdiBjbGFzcz0idHJhaXQtdGV4dCI+e3sgdHJhaXRzLmZsYXcgfX08L2Rpdj48L2Rpdj4KICAgIHslIGVuZGlmICV9CiAgPC9kaXY+CiAgeyUgZW5kaWYgJX0KCiAgeyUgaWYgZGF0YS5ub3RlcyAlfQogIDxkaXYgY2xhc3M9InBhbmVsIiBzdHlsZT0icGFkZGluZzoxNHB4Ij4KICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPk5vdGVzPC9oMz4KICAgIDxwIHN0eWxlPSJmb250LXNpemU6MTRweDtmb250LXN0eWxlOml0YWxpYztjb2xvcjp2YXIoLS10ZXh0KTt3aGl0ZS1zcGFjZTpwcmUtd3JhcCI+e3sgZGF0YS5ub3RlcyB9fTwvcD4KICA8L2Rpdj4KICB7JSBlbmRpZiAlfQoKPC9kaXY+CjwvZGl2PjwhLS0gZW5kIDMtY29sIGdyaWQgLS0+Cgo8L2Rpdj4KCjxzdHlsZT4KLnN0YXQtYnViYmxlIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1iZzIpOwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nb2xkKTsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgcGFkZGluZzogMTBweCA4cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5zdGF0LWJ1YmJsZS1sYWJlbCB7IGZvbnQtc2l6ZTogMTBweDsgZm9udC1mYW1pbHk6ICdDaW56ZWwnLCBzZXJpZjsgY29sb3I6IHZhcigtLXRleHQtZGltKTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyBtYXJnaW4tYm90dG9tOiA0cHg7IH0KLnN0YXQtYnViYmxlLXZhbCB7IGZvbnQtc2l6ZTogMjJweDsgZm9udC13ZWlnaHQ6IDcwMDsgY29sb3I6IHZhcigtLXRleHQtYnJpZ2h0KTsgZm9udC1mYW1pbHk6ICdDaW56ZWwnLCBzZXJpZjsgfQoKLmFiaWxpdHktYmxvY2sgewogIGJhY2tncm91bmQ6IHZhcigtLWJnMik7CiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWdvbGQpOwogIGJvcmRlci1yYWRpdXM6IDhweDsKICBwYWRkaW5nOiA4cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1hcmdpbi1ib3R0b206IDhweDsKfQouYWJpbGl0eS1ibG9jay1uYW1lIHsgZm9udC1zaXplOiAxMHB4OyBmb250LWZhbWlseTogJ0NpbnplbCcsIHNlcmlmOyBjb2xvcjogdmFyKC0tdGV4dC1kaW0pOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMC41cHg7IH0KLmFiaWxpdHktYmxvY2stc2NvcmUgeyBmb250LXNpemU6IDI4cHg7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiB2YXIoLS10ZXh0LWJyaWdodCk7IGxpbmUtaGVpZ2h0OiAxLjE7IH0KLmFiaWxpdHktYmxvY2stbW9kIHsgZm9udC1zaXplOiAxOHB4OyBjb2xvcjogdmFyKC0tZ29sZCk7IGZvbnQtd2VpZ2h0OiA2MDA7IGJhY2tncm91bmQ6IHZhcigtLWJnMyk7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDM2cHg7IGhlaWdodDogMzZweDsgbGluZS1oZWlnaHQ6IDM2cHg7IG1hcmdpbjogNHB4IGF1dG87IH0KLnNhdmUtcm93IHsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogNHB4OyBtYXJnaW4tdG9wOiA0cHg7IH0KCi5wcm9mLWRvdCB7IHdpZHRoOiAxMHB4OyBoZWlnaHQ6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWdvbGQpOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZsZXgtc2hyaW5rOiAwOyB9Ci5wcm9mLWRvdC5maWxsZWQgeyBiYWNrZ3JvdW5kOiB2YXIoLS1nb2xkKTsgYm9yZGVyLWNvbG9yOiB2YXIoLS1nb2xkKTsgfQoKLnNraWxsLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNnB4OyBwYWRkaW5nOiAzcHggMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoNDIsNDYsNjgsMC40KTsgfQouc2tpbGwtcm93LnNraWxsLXByb2YgLnNraWxsLXJvdy1uYW1lIHsgY29sb3I6IHZhcigtLXRleHQtYnJpZ2h0KTsgfQouc2tpbGwtcm93LW1vZCB7IHdpZHRoOiAyOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6IHZhcigtLXRleHQtYnJpZ2h0KTsgZm9udC1zaXplOiAxMnB4OyB9Ci5za2lsbC1yb3ctbmFtZSB7IGZsZXg6IDE7IGNvbG9yOiB2YXIoLS10ZXh0KTsgfQouc2tpbGwtcm93LWFiaWxpdHkgeyBmb250LXNpemU6IDExcHg7IGNvbG9yOiB2YXIoLS10ZXh0LWRpbSk7IH0KCi50cmFpdC1ibG9jayB7IG1hcmdpbi1ib3R0b206IDEwcHg7IH0KLnRyYWl0LWxhYmVsIHsgZm9udC1mYW1pbHk6ICdDaW56ZWwnLCBzZXJpZjsgZm9udC1zaXplOiAxMHB4OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMC41cHg7IGNvbG9yOiB2YXIoLS1nb2xkKTsgbWFyZ2luLWJvdHRvbTogM3B4OyB9Ci50cmFpdC10ZXh0IHsgZm9udC1zaXplOiAxM3B4OyBjb2xvcjogdmFyKC0tdGV4dCk7IGZvbnQtc3R5bGU6IGl0YWxpYzsgfQoKQG1lZGlhKG1heC13aWR0aDo3MDBweCkgewogIGRpdltzdHlsZSo9ImdyaWQtdGVtcGxhdGUtY29sdW1uczoxODBweCJdIHsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgIWltcG9ydGFudDsgfQp9Cjwvc3R5bGU+CnslIGVuZGJsb2NrICV9Cg=="
[System.IO.File]::WriteAllBytes("$root\templates\characters\sheet.html", [System.Convert]::FromBase64String($b))

# templates\campaigns\view.html
$b = "eyUgZXh0ZW5kcyAiYmFzZS5odG1sIiAlfQp7JSBibG9jayB0aXRsZSAlfXt7IGNhbXBhaWduLm5hbWUgfX0g4oCUIENoYXJhY3RlckZvcmdlCjxzY3JpcHQ+CmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlTlBDKCkgewogIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnBjLWFpLWRlc2MnKT8udmFsdWU/LnRyaW0oKTsKICBpZiAoIWRlc2MpIHsgYWxlcnQoJ0VudGVyIGEgZGVzY3JpcHRpb24gZmlyc3QuJyk7IHJldHVybjsgfQogIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCducGMtYWktc3RhdHVzJyk7CiAgc3RhdHVzLnRleHRDb250ZW50ID0gJ+KPsyBHZW5lcmF0aW5nIHN0YXQgYmxvY2suLi4gKHRoaXMgbWF5IHRha2UgMzAtNjAgc2Vjb25kcyknOwoKICB0cnkgewogICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJy9jaGFyYWN0ZXJzL2FpX25wYycsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe2Rlc2NyaXB0aW9uOiBkZXNjfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICBpZiAoIWRhdGEub2spIHsgc3RhdHVzLnRleHRDb250ZW50ID0gJ+KdjCAnICsgZGF0YS5lcnJvcjsgcmV0dXJuOyB9CiAgICBjb25zdCBucGMgPSBkYXRhLm5wYzsKICAgIC8vIFBvcHVsYXRlIGZvcm0gZmllbGRzCiAgICBjb25zdCBzZXQgPSAobmFtZSwgdmFsKSA9PiB7CiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI25wYy1mb3JtIFtuYW1lPSIke25hbWV9Il1gKTsKICAgICAgaWYgKGVsICYmIHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gbnVsbCkgZWwudmFsdWUgPSB2YWw7CiAgICB9OwogICAgc2V0KCduYW1lJywgbnBjLm5hbWUpOwogICAgc2V0KCdsZXZlbCcsIG5wYy5sZXZlbCk7CiAgICBzZXQoJ2NoYXJfY2xhc3MnLCBucGMuY2hhcl9jbGFzcyk7CiAgICBzZXQoJ3JhY2UnLCBucGMucmFjZSk7CiAgICBzZXQoJ2FsaWdubWVudCcsIG5wYy5hbGlnbm1lbnQpOwogICAgc2V0KCdzdHJlbmd0aCcsIG5wYy5zdHJlbmd0aCk7CiAgICBzZXQoJ2RleHRlcml0eScsIG5wYy5kZXh0ZXJpdHkpOwogICAgc2V0KCdjb25zdGl0dXRpb24nLCBucGMuY29uc3RpdHV0aW9uKTsKICAgIHNldCgnaW50ZWxsaWdlbmNlJywgbnBjLmludGVsbGlnZW5jZSk7CiAgICBzZXQoJ3dpc2RvbScsIG5wYy53aXNkb20pOwogICAgc2V0KCdjaGFyaXNtYScsIG5wYy5jaGFyaXNtYSk7CiAgICBzZXQoJ2FybW9yX2NsYXNzX292ZXJyaWRlJywgbnBjLmFybW9yX2NsYXNzKTsKICAgIHNldCgnaHBfb3ZlcnJpZGUnLCBucGMubWF4X2hwKTsKICAgIHNldCgnc3BlZWQnLCBucGMuc3BlZWQpOwogICAgc2V0KCdub3RlcycsIG5wYy5ub3RlcyArIChucGMucmVhc29uaW5nID8gJ1xuXG5bQUkgcmVhc29uaW5nOiAnICsgbnBjLnJlYXNvbmluZyArICddJyA6ICcnKSk7CiAgICBzdGF0dXMudGV4dENvbnRlbnQgPSAn4pyFIFN0YXQgYmxvY2sgZ2VuZXJhdGVkISBSZXZpZXcgYW5kIHN1Ym1pdCBiZWxvdy4nOwogIH0gY2F0Y2goZSkgewogICAgc3RhdHVzLnRleHRDb250ZW50ID0gJ+KdjCBSZXF1ZXN0IGZhaWxlZDogJyArIGU7CiAgfQp9Cjwvc2NyaXB0Pgp7JSBlbmRibG9jayAlfQp7JSBibG9jayBjb250ZW50ICV9Cgo8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiIgc3R5bGU9Im1hcmdpbi1ib3R0b206NHB4O2ZsZXgtd3JhcDp3cmFwO2dhcDoxMnB4Ij4KICA8ZGl2PgogICAgPGgxPnt7IGNhbXBhaWduLm5hbWUgfX08L2gxPgogICAgeyUgaWYgY2FtcGFpZ24uZGVzY3JpcHRpb24gJX0KICAgICAgPHAgY2xhc3M9InN1YnRpdGxlIj57eyBjYW1wYWlnbi5kZXNjcmlwdGlvbiB9fTwvcD4KICAgIHslIGVuZGlmICV9CiAgPC9kaXY+CiAgPGRpdiBjbGFzcz0iZmxleCIgc3R5bGU9ImdhcDo4cHg7YWxpZ24tc2VsZjpmbGV4LXN0YXJ0O21hcmdpbi10b3A6OHB4Ij4KICAgIHslIGlmIGlzX2RtICV9CiAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGJ0bi1zbSIgb25jbGljaz0ib3Blbk1vZGFsKCdtb2RhbC1hZGQtbnBjJykiPisgUXVpY2sgTlBDPC9idXR0b24+CiAgICB7JSBlbmRpZiAlfQogICAgeyUgaWYgc2Vzc2lvbi5nZXQoJ3JvbGUnKSBpbiBbJ2FkbWluJywnZG0nXSAlfQogICAgICA8YSBocmVmPSIvZG0vIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBETSBEYXNoYm9hcmQ8L2E+CiAgICB7JSBlbHNlICV9CiAgICAgIDxhIGhyZWY9Ii9wbGF5ZXIvIiBjbGFzcz0iYnRuIGJ0bi1naG9zdCBidG4tc20iPuKGkCBNeSBDaGFyYWN0ZXJzPC9hPgogICAgeyUgZW5kaWYgJX0KICA8L2Rpdj4KPC9kaXY+Cgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciB7JSBpZiBpc19kbSAlfTMwMHB4eyUgZW5kaWYgJX07Z2FwOjIwcHg7YWxpZ24taXRlbXM6c3RhcnQ7bWFyZ2luLXRvcDoyMHB4Ij4KCjwhLS0gTWFpbiBjb250ZW50IC0tPgo8ZGl2PgoKICA8IS0tIFBsYXllciBDaGFyYWN0ZXJzIC0tPgogIDxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLWdvbGQiPgogICAgPGgyPlBsYXllciBDaGFyYWN0ZXJzPC9oMj4KICAgIHslIGlmIHBjX2NoYXJzICV9CiAgICAgIDxkaXYgY2xhc3M9ImNoYXItY2FyZHMtZ3JpZCI+CiAgICAgICAgeyUgZm9yIGMgaW4gcGNfY2hhcnMgJX0KICAgICAgICA8YSBocmVmPSIvY2hhcmFjdGVycy97eyBjLmlkIH19L3NoZWV0IiBjbGFzcz0iY2hhci1jYXJkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXItY2FyZC1oZWFkZXIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFyLWNhcmQtbmFtZSI+e3sgYy5uYW1lIH19PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXItY2FyZC1jbGFzcyI+e3sgYy5yYWNlIG9yICfigJQnIH19IHt7IGMuY2hhcl9jbGFzcyBvciAn4oCUJyB9fTwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFyLWNhcmQtYm9keSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXItc3RhdCI+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNoYXItc3RhdC1sYWJlbCI+TGV2ZWw8L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNoYXItc3RhdC12YWwiPnt7IGMubGV2ZWwgfX08L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFyLXN0YXQiPgogICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjaGFyLXN0YXQtbGFiZWwiPkFDPC9zcGFuPgogICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjaGFyLXN0YXQtdmFsIj57eyBjLmFybW9yX2NsYXNzIH19PC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hhci1zdGF0IiBzdHlsZT0iZ3JpZC1jb2x1bW46c3BhbiAyIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJocC1iYXItd3JhcCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJocC1iYXItdHJhY2siPjxkaXYgY2xhc3M9ImhwLWJhci1maWxsIiBkYXRhLWN1cj0ie3sgYy5jdXJyZW50X2hwIH19IiBkYXRhLW1heD0ie3sgYy5tYXhfaHAgfX0iPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaHAtdGV4dCI+e3sgYy5jdXJyZW50X2hwIH19IC8ge3sgYy5tYXhfaHAgfX0gSFA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIHslIGlmIGlzX2RtICV9CiAgICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOjZweCAxNHB4O2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWJvcmRlcikiPgogICAgICAgICAgICA8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iL2NhbXBhaWducy97eyBjYW1wYWlnbi5pZCB9fS9yZW1vdmVfY2hhci97eyBjLmlkIH19IiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKSIgY2xhc3M9ImNvbmZpcm0tYWN0aW9uIiBkYXRhLWNvbmZpcm09IlJlbW92ZSAne3sgYy5uYW1lIH19JyBmcm9tIGNhbXBhaWduPyAoQ2hhcmFjdGVyIHdvbid0IGJlIGRlbGV0ZWQpIj4KICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tc20gYnRuLWRhbmdlciIgc3R5bGU9IndpZHRoOjEwMCUiPlJlbW92ZSBmcm9tIENhbXBhaWduPC9idXR0b24+CiAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgeyUgZW5kaWYgJX0KICAgICAgICA8L2E+CiAgICAgICAgeyUgZW5kZm9yICV9CiAgICAgIDwvZGl2PgogICAgeyUgZWxzZSAlfQogICAgICA8cCBjbGFzcz0iZW1wdHktc3RhdGUiPk5vIHBsYXllciBjaGFyYWN0ZXJzIHlldC4gUGxheWVycyBjcmVhdGUgY2hhcmFjdGVycyBmcm9tIHRoZWlyIGRhc2hib2FyZCDigJQgdGhlIERNIGFkZHMgdGhlbSBoZXJlLjwvcD4KICAgIHslIGVuZGlmICV9CiAgPC9kaXY+CgogIDwhLS0gTlBDcyAtLT4KICA8ZGl2IGNsYXNzPSJwYW5lbCIgc3R5bGU9Im1hcmdpbi10b3A6MTZweCI+CiAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiI+CiAgICAgIDxoMj5OUENzICYgRW5lbWllczwvaDI+CiAgICAgIHslIGlmIGlzX2RtICV9CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tc2Vjb25kYXJ5IiBvbmNsaWNrPSJvcGVuTW9kYWwoJ21vZGFsLWFkZC1ucGMnKSI+KyBRdWljayBOUEM8L2J1dHRvbj4KICAgICAgeyUgZW5kaWYgJX0KICAgIDwvZGl2PgogICAgeyUgaWYgbnBjX2NoYXJzICV9CiAgICAgIDxkaXYgY2xhc3M9ImNoYXItY2FyZHMtZ3JpZCIgc3R5bGU9Im1hcmdpbi10b3A6MTJweCI+CiAgICAgICAgeyUgZm9yIGMgaW4gbnBjX2NoYXJzICV9CiAgICAgICAgPGEgaHJlZj0iL2NoYXJhY3RlcnMve3sgYy5pZCB9fS9zaGVldCIgY2xhc3M9ImNoYXItY2FyZCBucGMtY2FyZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFyLWNhcmQtaGVhZGVyIiBzdHlsZT0iYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLHJnYmEoMTM5LDMyLDMyLDAuMTUpLHRyYW5zcGFyZW50KSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXItY2FyZC1uYW1lIj57eyBjLm5hbWUgfX0gPHNwYW4gY2xhc3M9Im5wYy1iYWRnZSI+TlBDPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFyLWNhcmQtY2xhc3MiIHN0eWxlPSJjb2xvcjojZTA3MDcwIj57eyBjLnJhY2Ugb3IgJ+KAlCcgfX0gwrcge3sgYy5jaGFyX2NsYXNzIG9yICdOUEMnIH19PC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXItY2FyZC1ib2R5Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hhci1zdGF0Ij48c3BhbiBjbGFzcz0iY2hhci1zdGF0LWxhYmVsIj5DUi9Mdmw8L3NwYW4+PHNwYW4gY2xhc3M9ImNoYXItc3RhdC12YWwiPnt7IGMubGV2ZWwgfX08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXItc3RhdCI+PHNwYW4gY2xhc3M9ImNoYXItc3RhdC1sYWJlbCI+QUM8L3NwYW4+PHNwYW4gY2xhc3M9ImNoYXItc3RhdC12YWwiPnt7IGMuYXJtb3JfY2xhc3MgfX08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXItc3RhdCIgc3R5bGU9ImdyaWQtY29sdW1uOnNwYW4gMiI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaHAtYmFyLXdyYXAiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaHAtYmFyLXRyYWNrIj48ZGl2IGNsYXNzPSJocC1iYXItZmlsbCIgZGF0YS1jdXI9Int7IGMuY3VycmVudF9ocCB9fSIgZGF0YS1tYXg9Int7IGMubWF4X2hwIH19Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhwLXRleHQiPnt7IGMuY3VycmVudF9ocCB9fSAvIHt7IGMubWF4X2hwIH19IEhQPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9hPgogICAgICAgIHslIGVuZGZvciAlfQogICAgICA8L2Rpdj4KICAgIHslIGVsc2UgJX0KICAgICAgPHAgY2xhc3M9ImVtcHR5LXN0YXRlIj5ObyBOUENzIHlldC48L3A+CiAgICB7JSBlbmRpZiAlfQogIDwvZGl2PgoKPC9kaXY+Cgo8IS0tIERNIFNpZGViYXIgLS0+CnslIGlmIGlzX2RtICV9CjxkaXY+CgogIDwhLS0gQXZhaWxhYmxlIENoYXJhY3RlcnMgdG8gUHVsbCBJbiAtLT4KICB7JSBpZiBhdmFpbGFibGVfY2hhcnMgJX0KICA8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1nb2xkIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4Ij4KICAgIDxoMj5BdmFpbGFibGUgdG8gQWRkPC9oMj4KICAgIDxwIGNsYXNzPSJ0ZXh0LWRpbSIgc3R5bGU9ImZvbnQtc2l6ZToxM3B4O21hcmdpbi1ib3R0b206MTJweCI+UGxheWVyIGNoYXJhY3RlcnMgd2FpdGluZyB0byBqb2luIHRoaXMgY2FtcGFpZ24uPC9wPgogICAgeyUgZm9yIGNoYXIsIHVzZXIgaW4gYXZhaWxhYmxlX2NoYXJzICV9CiAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOjEwcHg7YmFja2dyb3VuZDp2YXIoLS1iZzMpO2JvcmRlci1yYWRpdXM6OHB4O21hcmdpbi1ib3R0b206OHB4Ij4KICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQtYnJpZ2h0KSI+e3sgY2hhci5uYW1lIH19PC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxM3B4O2NvbG9yOnZhcigtLXRleHQtZGltKSI+e3sgY2hhci5yYWNlIG9yICfigJQnIH19IHt7IGNoYXIuY2hhcl9jbGFzcyBvciAn4oCUJyB9fSDCtyBMdmwge3sgY2hhci5sZXZlbCB9fTwvZGl2PgogICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1pbmspO21hcmdpbi1ib3R0b206OHB4Ij5QbGF5ZXI6IHt7IHVzZXIuZGlzcGxheV9uYW1lIG9yIHVzZXIudXNlcm5hbWUgaWYgdXNlciBlbHNlICfigJQnIH19PC9kaXY+CiAgICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIvY2FtcGFpZ25zL3t7IGNhbXBhaWduLmlkIH19L2Fzc2lnbl9jaGFyL3t7IGNoYXIuaWQgfX0iPgogICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6dmFyKC0tZ3JlZW4pO2NvbG9yOndoaXRlO2JvcmRlcjpub25lO3dpZHRoOjEwMCUiPisgQWRkIHRvIENhbXBhaWduPC9idXR0b24+CiAgICAgIDwvZm9ybT4KICAgIDwvZGl2PgogICAgeyUgZW5kZm9yICV9CiAgPC9kaXY+CiAgeyUgZW5kaWYgJX0KCiAgPCEtLSBQZW5kaW5nIHBsYXllcnMgLS0+CiAgeyUgaWYgcGVuZGluZyAlfQogIDxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLWdvbGQiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPgogICAgPGgyPlBlbmRpbmcgQXBwcm92YWxzPC9oMj4KICAgIHslIGZvciBtLCB1c2VyIGluIHBlbmRpbmcgJX0KICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MTBweCAwO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcikiPgogICAgICA8ZGl2IGNsYXNzPSJmbGV4Ij4KICAgICAgICA8c3BhbiBjbGFzcz0icGVuZGluZy1kb3QiPjwvc3Bhbj4KICAgICAgICA8ZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQtYnJpZ2h0KSI+e3sgdXNlci5kaXNwbGF5X25hbWUgb3IgdXNlci51c2VybmFtZSBpZiB1c2VyIGVsc2UgJ+KAlCcgfX08L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLXRleHQtZGltKSI+d2FudHMgdG8gam9pbjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iZmxleCIgc3R5bGU9Im1hcmdpbi10b3A6OHB4O2dhcDo2cHgiPgogICAgICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIvZG0vY2FtcGFpZ25zL3t7IGNhbXBhaWduLmlkIH19L2FwcHJvdmUve3sgbS51c2VyX2lkIH19Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6dmFyKC0tZ3JlZW4pO2NvbG9yOndoaXRlO2JvcmRlcjpub25lIj7inJMgQXBwcm92ZTwvYnV0dG9uPgogICAgICAgIDwvZm9ybT4KICAgICAgICA8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iL2RtL2NhbXBhaWducy97eyBjYW1wYWlnbi5pZCB9fS9raWNrL3t7IG0udXNlcl9pZCB9fSI+CiAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tc20gYnRuLWRhbmdlciI+4pyVIERlbnk8L2J1dHRvbj4KICAgICAgICA8L2Zvcm0+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICB7JSBlbmRmb3IgJX0KICA8L2Rpdj4KICB7JSBlbmRpZiAlfQoKICA8IS0tIEFjdGl2ZSBtZW1iZXJzIC0tPgogIDxkaXYgY2xhc3M9InBhbmVsIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4Ij4KICAgIDxoMj5NZW1iZXJzPC9oMj4KICAgIHslIGZvciBtLCB1c2VyIGluIG1lbWJlcnMgJX0KICAgIHslIGlmIHVzZXIgJX0KICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6OHB4IDA7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tYm9yZGVyKSI+CiAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICA8ZGl2PgogICAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOnZhcigtLXRleHQtYnJpZ2h0KSI+e3sgdXNlci5kaXNwbGF5X25hbWUgb3IgdXNlci51c2VybmFtZSB9fTwvc3Bhbj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJiYWRnZSBiYWRnZS17eyBtLnJvbGUgfX0iIHN0eWxlPSJtYXJnaW4tbGVmdDo4cHgiPnt7IG0ucm9sZSB9fTwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICB7JSBpZiBtLnJvbGUgIT0gJ2RtJyAlfQogICAgICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIvZG0vY2FtcGFpZ25zL3t7IGNhbXBhaWduLmlkIH19L2tpY2sve3sgdXNlci5pZCB9fSIgY2xhc3M9ImNvbmZpcm0tYWN0aW9uIiBkYXRhLWNvbmZpcm09IlJlbW92ZSB7eyB1c2VyLnVzZXJuYW1lIH19IGZyb20gY2FtcGFpZ24/Ij4KICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tZGFuZ2VyIj7inJU8L2J1dHRvbj4KICAgICAgICA8L2Zvcm0+CiAgICAgICAgeyUgZW5kaWYgJX0KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIHslIGVuZGlmICV9CiAgICB7JSBlbmRmb3IgJX0KICAgIHslIGlmIG5vdCBtZW1iZXJzICV9CiAgICAgIDxwIGNsYXNzPSJ0ZXh0LWRpbSIgc3R5bGU9ImZvbnQtc2l6ZToxNHB4Ij5ObyBhcHByb3ZlZCBtZW1iZXJzIHlldC48L3A+CiAgICB7JSBlbmRpZiAlfQogIDwvZGl2PgoKICA8IS0tIERhbmdlciB6b25lIC0tPgogIDxkaXYgY2xhc3M9InBhbmVsIj4KICAgIDxoMyBzdHlsZT0iY29sb3I6I2UwNzA3MCI+RGFuZ2VyIFpvbmU8L2gzPgogICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ii9kbS9jYW1wYWlnbnMve3sgY2FtcGFpZ24uaWQgfX0vZGVsZXRlIiBjbGFzcz0iY29uZmlybS1hY3Rpb24iIGRhdGEtY29uZmlybT0iRGVsZXRlICd7eyBjYW1wYWlnbi5uYW1lIH19Jz8gQWxsIGNoYXJhY3RlcnMgd2lsbCBiZSB1bmxpbmtlZC4gVGhpcyBjYW5ub3QgYmUgdW5kb25lLiI+CiAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIiIHN0eWxlPSJ3aWR0aDoxMDAlO21hcmdpbi10b3A6OHB4Ij5EZWxldGUgQ2FtcGFpZ248L2J1dHRvbj4KICAgIDwvZm9ybT4KICA8L2Rpdj4KCjwvZGl2Pgp7JSBlbmRpZiAlfQoKPC9kaXY+PCEtLSBlbmQgZ3JpZCAtLT4KCjwhLS0gUXVpY2sgTlBDIE1vZGFsIC0tPgp7JSBpZiBpc19kbSAlfQo8ZGl2IGNsYXNzPSJtb2RhbC1vdmVybGF5IiBpZD0ibW9kYWwtYWRkLW5wYyI+CiAgPGRpdiBjbGFzcz0ibW9kYWwiIHN0eWxlPSJtYXgtd2lkdGg6NTIwcHgiPgogICAgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtY2xvc2UiIG9uY2xpY2s9ImNsb3NlTW9kYWwoJ21vZGFsLWFkZC1ucGMnKSI+4pyVPC9idXR0b24+CiAgICA8aDI+UXVpY2sgTlBDIC8gRW5lbXk8L2gyPgogICAgPHAgY2xhc3M9InRleHQtZGltIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4Ij5GYXN0IGNyZWF0aW9uIGZvciBlbmNvdW50ZXJzLiBTUkQgcnVsZXMgYXBwbHkgdW5sZXNzIHlvdSBvdmVycmlkZS48L3A+CiAgICA8IS0tIEFJIEdlbmVyYXRlIHNlY3Rpb24gLS0+CiAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHg7cGFkZGluZzoxNHB4O2JhY2tncm91bmQ6dmFyKC0tYmczKTtib3JkZXItcmFkaXVzOjhweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcikiPgogICAgICA8ZGl2IHN0eWxlPSJmb250LWZhbWlseTonQ2luemVsJyxzZXJpZjtmb250LXNpemU6MTNweDtjb2xvcjp2YXIoLS1nb2xkKTttYXJnaW4tYm90dG9tOjhweCI+8J+OsiBBSSBHZW5lcmF0ZSBmcm9tIERlc2NyaXB0aW9uPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O21hcmdpbi1ib3R0b206OHB4Ij4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im5wYy1haS1kZXNjIiBwbGFjZWhvbGRlcj0iZS5nLiBncnVmZiBkd2FyZiBibGFja3NtaXRoIENSMywgc2VjcmV0bHkgd29yc2hpcHMgVGlhbWF0IiBzdHlsZT0iZmxleDoxIj4KICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGJ0bi1zbSIgb25jbGljaz0iZ2VuZXJhdGVOUEMoKSI+R2VuZXJhdGU8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgaWQ9Im5wYy1haS1zdGF0dXMiIHN0eWxlPSJmb250LXNpemU6MTNweDtjb2xvcjp2YXIoLS10ZXh0LWRpbSk7Zm9udC1zdHlsZTppdGFsaWMiPjwvZGl2PgogICAgPC9kaXY+CgogICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ii9jaGFyYWN0ZXJzL2NyZWF0ZSIgaWQ9Im5wYy1mb3JtIj4KICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY2FtcGFpZ25faWQiIHZhbHVlPSJ7eyBjYW1wYWlnbi5pZCB9fSI+CiAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImlzX25wYyIgdmFsdWU9InRydWUiPgoKICAgICAgPGRpdiBjbGFzcz0iZm9ybS1yb3ciPgogICAgICAgIDxkaXY+CiAgICAgICAgICA8bGFiZWw+TmFtZTwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibmFtZSIgcmVxdWlyZWQgcGxhY2Vob2xkZXI9ImUuZy4gQmFuZGl0IENhcHRhaW4iPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXY+CiAgICAgICAgICA8bGFiZWw+Q1IgLyBMZXZlbDwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJsZXZlbCIgdmFsdWU9IjEiIG1pbj0iMSIgbWF4PSIzMCI+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0iZm9ybS1yb3ciPgogICAgICAgIDxkaXY+CiAgICAgICAgICA8bGFiZWw+VHlwZSAvIENsYXNzPC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgbmFtZT0iY2hhcl9jbGFzcyI+CiAgICAgICAgICAgIDxvcHRpb24+RmlnaHRlcjwvb3B0aW9uPjxvcHRpb24+Um9ndWU8L29wdGlvbj48b3B0aW9uPldpemFyZDwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uPkNsZXJpYzwvb3B0aW9uPjxvcHRpb24+QmFyYmFyaWFuPC9vcHRpb24+PG9wdGlvbj5SYW5nZXI8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbj5QYWxhZGluPC9vcHRpb24+PG9wdGlvbj5Tb3JjZXJlcjwvb3B0aW9uPjxvcHRpb24+V2FybG9jazwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uPkRydWlkPC9vcHRpb24+PG9wdGlvbj5Nb25rPC9vcHRpb24+PG9wdGlvbj5CYXJkPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2PgogICAgICAgICAgPGxhYmVsPlJhY2UgLyBUeXBlPC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgbmFtZT0icmFjZSI+CiAgICAgICAgICAgIDxvcHRpb24+SHVtYW48L29wdGlvbj48b3B0aW9uPkdvYmxpbjwvb3B0aW9uPjxvcHRpb24+T3JjPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24+VW5kZWFkPC9vcHRpb24+PG9wdGlvbj5EcmFnb248L29wdGlvbj48b3B0aW9uPkZpZW5kPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24+QmVhc3Q8L29wdGlvbj48b3B0aW9uPkVsZjwvb3B0aW9uPjxvcHRpb24+RHdhcmY8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbj5Db25zdHJ1Y3Q8L29wdGlvbj48b3B0aW9uPkFiZXJyYXRpb248L29wdGlvbj48b3B0aW9uPkVsZW1lbnRhbDwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0iZm9ybS1yb3ciIHN0eWxlPSJtYXJnaW4tdG9wOjRweCI+CiAgICAgICAgPGRpdj48bGFiZWw+U1RSPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJzdHJlbmd0aCIgdmFsdWU9IjEwIiBtaW49IjEiIG1heD0iMzAiPjwvZGl2PgogICAgICAgIDxkaXY+PGxhYmVsPkRFWDwvbGFiZWw+PGlucHV0IHR5cGU9Im51bWJlciIgbmFtZT0iZGV4dGVyaXR5IiB2YWx1ZT0iMTAiIG1pbj0iMSIgbWF4PSIzMCI+PC9kaXY+CiAgICAgICAgPGRpdj48bGFiZWw+Q09OPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJjb25zdGl0dXRpb24iIHZhbHVlPSIxMCIgbWluPSIxIiBtYXg9IjMwIj48L2Rpdj4KICAgICAgICA8ZGl2PjxsYWJlbD5JTlQ8L2xhYmVsPjxpbnB1dCB0eXBlPSJudW1iZXIiIG5hbWU9ImludGVsbGlnZW5jZSIgdmFsdWU9IjEwIiBtaW49IjEiIG1heD0iMzAiPjwvZGl2PgogICAgICAgIDxkaXY+PGxhYmVsPldJUzwvbGFiZWw+PGlucHV0IHR5cGU9Im51bWJlciIgbmFtZT0id2lzZG9tIiB2YWx1ZT0iMTAiIG1pbj0iMSIgbWF4PSIzMCI+PC9kaXY+CiAgICAgICAgPGRpdj48bGFiZWw+Q0hBPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJjaGFyaXNtYSIgdmFsdWU9IjEwIiBtaW49IjEiIG1heD0iMzAiPjwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgY2xhc3M9ImZvcm0tcm93IiBzdHlsZT0ibWFyZ2luLXRvcDo0cHgiPgogICAgICAgIDxkaXY+PGxhYmVsPkFDIE92ZXJyaWRlPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJhcm1vcl9jbGFzc19vdmVycmlkZSIgcGxhY2Vob2xkZXI9IkF1dG8iIG1pbj0iMSIgbWF4PSIzMCI+PC9kaXY+CiAgICAgICAgPGRpdj48bGFiZWw+SFAgT3ZlcnJpZGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJudW1iZXIiIG5hbWU9ImhwX292ZXJyaWRlIiBwbGFjZWhvbGRlcj0iQXV0byIgbWluPSIxIj48L2Rpdj4KICAgICAgICA8ZGl2PjxsYWJlbD5TcGVlZCAoZnQpPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJzcGVlZCIgdmFsdWU9IjMwIiBtaW49IjAiIG1heD0iMTIwIj48L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICA8bGFiZWw+QWxpZ25tZW50PC9sYWJlbD4KICAgICAgPHNlbGVjdCBuYW1lPSJhbGlnbm1lbnQiPgogICAgICAgIDxvcHRpb24+VHJ1ZSBOZXV0cmFsPC9vcHRpb24+PG9wdGlvbj5MYXdmdWwgRXZpbDwvb3B0aW9uPjxvcHRpb24+TmV1dHJhbCBFdmlsPC9vcHRpb24+CiAgICAgICAgPG9wdGlvbj5DaGFvdGljIEV2aWw8L29wdGlvbj48b3B0aW9uPkxhd2Z1bCBHb29kPC9vcHRpb24+PG9wdGlvbj5OZXV0cmFsIEdvb2Q8L29wdGlvbj4KICAgICAgICA8b3B0aW9uPkNoYW90aWMgR29vZDwvb3B0aW9uPjxvcHRpb24+TGF3ZnVsIE5ldXRyYWw8L29wdGlvbj48b3B0aW9uPkNoYW90aWMgTmV1dHJhbDwvb3B0aW9uPgogICAgICA8L3NlbGVjdD4KCiAgICAgIDxsYWJlbD5Ob3RlcyAvIFNwZWNpYWwgQWJpbGl0aWVzPC9sYWJlbD4KICAgICAgPHRleHRhcmVhIG5hbWU9Im5vdGVzIiByb3dzPSIzIiBwbGFjZWhvbGRlcj0iUGFjayB0YWN0aWNzLCBNdWx0aWF0dGFjaywgU3BlbGxjYXN0aW5nLCBldGMuIj48L3RleHRhcmVhPgoKICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYmFja2dyb3VuZCIgdmFsdWU9IlNvbGRpZXIiPgogICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9Im1hcmdpbi10b3A6MTZweDt3aWR0aDoxMDAlIj5DcmVhdGUgTlBDPC9idXR0b24+CiAgICA8L2Zvcm0+CiAgPC9kaXY+CjwvZGl2Pgp7JSBlbmRpZiAlfQoKCjxzY3JpcHQ+CmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlTlBDKCkgewogIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnBjLWFpLWRlc2MnKT8udmFsdWU/LnRyaW0oKTsKICBpZiAoIWRlc2MpIHsgYWxlcnQoJ0VudGVyIGEgZGVzY3JpcHRpb24gZmlyc3QuJyk7IHJldHVybjsgfQogIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCducGMtYWktc3RhdHVzJyk7CiAgc3RhdHVzLnRleHRDb250ZW50ID0gJ+KPsyBHZW5lcmF0aW5nIHN0YXQgYmxvY2suLi4gKHRoaXMgbWF5IHRha2UgMzAtNjAgc2Vjb25kcyknOwoKICB0cnkgewogICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJy9jaGFyYWN0ZXJzL2FpX25wYycsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe2Rlc2NyaXB0aW9uOiBkZXNjfSkKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICBpZiAoIWRhdGEub2spIHsgc3RhdHVzLnRleHRDb250ZW50ID0gJ+KdjCAnICsgZGF0YS5lcnJvcjsgcmV0dXJuOyB9CiAgICBjb25zdCBucGMgPSBkYXRhLm5wYzsKICAgIC8vIFBvcHVsYXRlIGZvcm0gZmllbGRzCiAgICBjb25zdCBzZXQgPSAobmFtZSwgdmFsKSA9PiB7CiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI25wYy1mb3JtIFtuYW1lPSIke25hbWV9Il1gKTsKICAgICAgaWYgKGVsICYmIHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gbnVsbCkgZWwudmFsdWUgPSB2YWw7CiAgICB9OwogICAgc2V0KCduYW1lJywgbnBjLm5hbWUpOwogICAgc2V0KCdsZXZlbCcsIG5wYy5sZXZlbCk7CiAgICBzZXQoJ2NoYXJfY2xhc3MnLCBucGMuY2hhcl9jbGFzcyk7CiAgICBzZXQoJ3JhY2UnLCBucGMucmFjZSk7CiAgICBzZXQoJ2FsaWdubWVudCcsIG5wYy5hbGlnbm1lbnQpOwogICAgc2V0KCdzdHJlbmd0aCcsIG5wYy5zdHJlbmd0aCk7CiAgICBzZXQoJ2RleHRlcml0eScsIG5wYy5kZXh0ZXJpdHkpOwogICAgc2V0KCdjb25zdGl0dXRpb24nLCBucGMuY29uc3RpdHV0aW9uKTsKICAgIHNldCgnaW50ZWxsaWdlbmNlJywgbnBjLmludGVsbGlnZW5jZSk7CiAgICBzZXQoJ3dpc2RvbScsIG5wYy53aXNkb20pOwogICAgc2V0KCdjaGFyaXNtYScsIG5wYy5jaGFyaXNtYSk7CiAgICBzZXQoJ2FybW9yX2NsYXNzX292ZXJyaWRlJywgbnBjLmFybW9yX2NsYXNzKTsKICAgIHNldCgnaHBfb3ZlcnJpZGUnLCBucGMubWF4X2hwKTsKICAgIHNldCgnc3BlZWQnLCBucGMuc3BlZWQpOwogICAgc2V0KCdub3RlcycsIG5wYy5ub3RlcyArIChucGMucmVhc29uaW5nID8gJ1xuXG5bQUkgcmVhc29uaW5nOiAnICsgbnBjLnJlYXNvbmluZyArICddJyA6ICcnKSk7CiAgICBzdGF0dXMudGV4dENvbnRlbnQgPSAn4pyFIFN0YXQgYmxvY2sgZ2VuZXJhdGVkISBSZXZpZXcgYW5kIHN1Ym1pdCBiZWxvdy4nOwogIH0gY2F0Y2goZSkgewogICAgc3RhdHVzLnRleHRDb250ZW50ID0gJ+KdjCBSZXF1ZXN0IGZhaWxlZDogJyArIGU7CiAgfQp9Cjwvc2NyaXB0Pgp7JSBlbmRibG9jayAlfQo="
[System.IO.File]::WriteAllBytes("$root\templates\campaigns\view.html", [System.Convert]::FromBase64String($b))

Write-Host "AI patch applied! Restart app.py" -ForegroundColor Green